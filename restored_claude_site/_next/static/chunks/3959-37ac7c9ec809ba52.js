"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3959],{8905:function(e,n,t){t.d(n,{Bo:function(){return E},Bt:function(){return T},C_:function(){return Y},II:function(){return X},KN:function(){return Q},MH:function(){return I},Ns:function(){return V},Nt:function(){return j},QO:function(){return B},QU:function(){return b},Qw:function(){return C},RF:function(){return S},Ux:function(){return g},Wb:function(){return L},XO:function(){return _},Xg:function(){return K},Y:function(){return P},bN:function(){return w},bR:function(){return x},cM:function(){return R},fq:function(){return W},is:function(){return U},kK:function(){return M},kS:function(){return N},oy:function(){return D},pV:function(){return z},pl:function(){return O},vF:function(){return k},w3:function(){return h},xt:function(){return A}});var i=t(5362),a=t(27218),r=t(27895),u=t(6600),o=t(30947),l=t(13262),s=t(92841),c=t(77930),d=t(7653),v=t(27248),y=t(36662),f=t(82137),p=t(59016),m=t(68571);function g(e){let{onSuccess:n,onError:t}=e,{activeOrganization:r}=(0,a.t)(),{data:u,variables:o,...l}=(0,i.uC)("/api/billing/".concat(null==r?void 0:r.uuid,"/consumer_pricing"),"POST",{enabled:!!r,meta:{noToast:!0},onError:t,onSuccess:n}),[s,c]=(0,d.useState)(),[v,y]=(0,d.useState)();return(0,d.useEffect)(()=>{u&&(c(u),y(o))},[u,o]),{data:s,variables:v,...l}}function b(e){let{onError:n}=e,{activeOrganization:t}=(0,a.t)(),{data:r,variables:u,...o}=(0,i.uC)("/api/billing/".concat(null==t?void 0:t.uuid,"/cw_pricing"),"POST",{enabled:!!t,meta:{noToast:!0},onError:n}),[l,s]=(0,d.useState)(),[c,v]=(0,d.useState)();return(0,d.useEffect)(()=>{r&&(s(r),v(u))},[r,u]),{data:l,variables:c,...o}}function _(){var e,n,t,r;let{perBillingPeriod:u,onSuccess:o,onError:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:s}=(0,a.t)(),[c,y]=(0,d.useState)(null),[f,p]=(0,d.useState)(),{data:m,isPending:g,error:b,mutate:_}=(0,i.uC)("/api/billing/".concat(null==s?void 0:s.uuid,"/individual_plan_pricing/v2"),"POST",{enabled:!!s,meta:{noToast:!0},onError:l,onSuccess:o});(0,d.useEffect)(()=>{m&&p(m)},[m]);let h=f||m;return{fiveXPricing:h&&{country:h.country,currency:h.currency,price:u?null===(e=h.product_prices_per_billing_period)||void 0===e?void 0:e.max_5x_monthly:null===(n=h.product_prices_due_today)||void 0===n?void 0:n.max_5x_monthly,planType:v.BT.FIVE_X},twentyXPricing:h&&{country:h.country,currency:h.currency,price:u?null===(t=h.product_prices_per_billing_period)||void 0===t?void 0:t.max_20x_monthly:null===(r=h.product_prices_due_today)||void 0===r?void 0:r.max_20x_monthly,planType:v.BT.TWENTY_X},isPending:g,error:b,fetchAllPricing:(0,d.useCallback)(e=>{y(e),e.noCache&&p(void 0),_(e)},[_]),addressParams:c}}let h=()=>{let{activeOrganization:e}=(0,a.t)();return(0,i.WE)("/api/billing/".concat(null==e?void 0:e.uuid,"/reset_pricing"),{enabled:!!e,meta:{noToast:!0}})},Q=()=>{let{activeOrganization:e}=(0,a.t)();return(0,i.uC)("/api/organizations/".concat(null==e?void 0:e.uuid,"/subscription"),"PUT",{enabled:!!e})},w=()=>{let{activeOrganization:e}=(0,a.t)();return(0,i.uC)("/api/organizations/".concat(null==e?void 0:e.uuid,"/subscription/cw"),"PUT",{enabled:!!e})},S=()=>{let{activeOrganization:e}=(0,a.t)();return(0,i.uC)("/api/organizations/".concat(null==e?void 0:e.uuid,"/rate_limit_reset"),"POST",{enabled:!!e})};function K(e){let{activeOrganization:n}=(0,a.t)(),t=(0,a.rW)();return(0,i.WE)("/api/organizations/".concat(null==n?void 0:n.uuid,"/subscription_details"),{queryKey:[l.QU,null==n?void 0:n.uuid],staleTime:0,initialData:null==e?void 0:e.initialData,refetchOnMount:null==e||!e.forceRefetch||"always",enabled:!!n&&t,meta:{noToast:e=>e instanceof o.Hx&&404===e.statusCode}})}let T=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{addError:i}=(0,r.e)(),a=(0,c.useQueryClient)(),u=(0,y.Iw)(e,{...t,async onSuccess(r,o,s){var c;if("payment_intent_client_secret"in r){let e=await n;if(!e){i("Stripe failed to initialize. Please try again.");return}if((await e.confirmPayment({clientSecret:r.payment_intent_client_secret,redirect:"if_required"})).error){i("Payment confirmation failed. Please try again.");return}u.mutate(o);return}a.invalidateQueries({queryKey:[l.je,e]}),a.invalidateQueries({queryKey:[l.sM,e]}),await (null===(c=t.onSuccess)||void 0===c?void 0:c.call(t,r,o,s))}});return u},C=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{addError:i}=(0,r.e)(),a=(0,c.useQueryClient)(),u=(0,y.Qx)(e,{...t,async onSuccess(r,o,s){var c;if("payment_intent_client_secret"in r){let e=await n;if(!e){i("Stripe failed to initialize. Please try again.");return}if((await e.confirmPayment({clientSecret:r.payment_intent_client_secret,redirect:"if_required"})).error){i("Payment confirmation failed. Please try again.");return}u.mutate(o);return}a.invalidateQueries({queryKey:[l.je,e]}),a.invalidateQueries({queryKey:[l.sM,e]}),await (null===(c=t.onSuccess)||void 0===c?void 0:c.call(t,r,o,s))}});return u};function q(){let{activeOrganization:e}=(0,a.t)(),n=(0,a.Cf)();return m.env.NEXT_PUBLIC_DISABLE_PAYMENTS?{data:{status:"active",cancel_at_ts:null},isLoading:!1}:(0,i.WE)("/api/organizations/".concat(null==e?void 0:e.uuid,"/subscription_status"),{queryKey:[l.sM,null==e?void 0:e.uuid],staleTime:0,enabled:!!e&&n,meta:{noToast:e=>e instanceof o.Hx&&404===e.statusCode}})}function x(){let{data:e,isLoading:n}=q();return{isRavenTrialing:(null==e?void 0:e.status)==="trialing",isLoading:n}}function z(){let{data:e,isLoading:n}=q();return{isRavenCanceled:(null==e?void 0:e.status)==="canceled"||(null==e?void 0:e.status)==="unpaid",isLoading:n}}function U(){let{data:e,isLoading:n}=q();return{isRavenPastDue:(null==e?void 0:e.status)==="past_due",isLoading:n}}function P(){let{data:e,isLoading:n}=q();return{isRavenPendingCancellation:!!(null==e?void 0:e.cancel_at_ts),isLoading:n}}function M(){let{activeOrganization:e}=(0,a.t)(),{isRavenCanceled:n,isLoading:t}=z(),{isRavenPastDue:i,isLoading:r}=U(),u=t||r,o=(null==e?void 0:e.billing_type)==="stripe_subscription_contracted";return{isLoading:u,canManageMembers:!u&&!n&&(o||!i)}}function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,a.t)(),t=(0,c.useQueryClient)(),r=null==n?void 0:n.uuid;return(0,i.uC)("/api/organizations/".concat(r,"/end_subscription"),"PUT",{...e,onSuccess(n,i,a){var u;t.setQueryData([l.QU,r],e=>{if(e)return{...e,plan_ending_before:"".concat(n.plan_ends_at,"T00:00:00+00:00")}}),t.invalidateQueries({queryKey:[l.sM,r]}),t.invalidateQueries({queryKey:[l.je,r]}),null===(u=e.onSuccess)||void 0===u||u.call(e,n,i,a)},enabled:!!n})}function D(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,a.t)(),t=(0,c.useQueryClient)(),r=null==n?void 0:n.uuid;return(0,i.uC)("/api/organizations/".concat(r,"/resume_subscription"),"PUT",{...e,onSuccess(n,i,a){var u;t.setQueryData([l.QU,r],e=>{if(e)return{...e,plan_ending_before:null}}),t.invalidateQueries({queryKey:[l.sM,r]}),t.invalidateQueries({queryKey:[l.je,r]}),null===(u=e.onSuccess)||void 0===u||u.call(e,n,i,a)},enabled:!!n})}function k(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,a.t)(),t=(0,c.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(null==n?void 0:n.uuid,"/renew_subscription/cw"),"PUT",{...e,onSuccess(i,a,r){var u;t.invalidateQueries({queryKey:[l.QU,null==n?void 0:n.uuid]}),t.invalidateQueries({queryKey:[l.sM,null==n?void 0:n.uuid]}),t.invalidateQueries({queryKey:[l.RK,null==n?void 0:n.uuid]}),t.invalidateQueries({queryKey:[l.je,null==n?void 0:n.uuid]}),null===(u=e.onSuccess)||void 0===u||u.call(e,i,a,r)},enabled:!!n})}function I(e){let{limit:n,createdSince:t,organizationUUID:r,meta:u}=e,{activeOrganization:o}=(0,a.t)(),s=Math.round(t.toSeconds()),c=r||(null==o?void 0:o.uuid);return(0,i.WE)("/api/stripe/".concat(c,"/invoices?limit=").concat(n,"&created_since_ts=").concat(s),{queryKey:[l.RK,c,{limit:n,created_since_ts:s}],staleTime:0,enabled:!!c,meta:u})}function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,a.t)(),t=(0,a.Cf)();return(0,i.WE)("/api/stripe/".concat(null==n?void 0:n.uuid,"/upcoming_invoice"),{queryKey:[l.je,null==n?void 0:n.uuid],staleTime:0,enabled:!!n&&t,meta:{noToast:e=>e instanceof o.Hx&&500===e.statusCode},...e})}function N(){let{activeOrganization:e}=(0,a.t)(),n=(0,c.useQueryClient)(),t=null==e?void 0:e.uuid;return(0,i.uC)("/api/organizations/".concat(t,"/payment_method/update_latest"),"POST",{onSuccess:async e=>{let i=n.getQueryData([l.QU,t]);i&&e?n.setQueryData([l.QU,t],{...i,payment_method:{...e}}):await n.invalidateQueries({queryKey:[l.QU,t]}),n.invalidateQueries({queryKey:[l.sM,t]}),n.invalidateQueries({queryKey:[l.RK,t]})},meta:{noToast:!0}})}function B(){let{data:e,isLoading:n}=(0,f.uy)(),{data:t,isLoading:i}=(0,y.cK)(),r=(0,u.N)(s.YB.MembersManage),{data:o}=(0,p.aJ)(),l=(0,a.gQ)(),c=n||i||!e||!t||!o;if(c)return{isLoading:c,hasManageMembersPermission:r,membersWithMinApplied:!1,activeMembers:0,invitedMembers:0,unclaimedMembers:0,minimumApplied:!1,memberLimit:0,isUnlimited:!1};let d=e.length,v=t.filter(e=>"pending"===e.status).length,m=d+v,g=l?o.members_limit-m:Math.max(5-m,0);return{isLoading:c,hasManageMembersPermission:r,totalMembersWithoutMinimumApplied:m,totalMembersWithMinimumApplied:Math.max(d+v,5),activeMembers:d,invitedMembers:v,unclaimedMembers:g,minimumApplied:m<5,memberLimit:o.members_limit,isUnlimited:o.unlimited_members||!1}}function W(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,a.t)(),r="/api/organizations/".concat(null!==(e=null==t?void 0:t.uuid)&&void 0!==e?e:"","/profile"),u=(0,c.useQueryClient)();return(0,i.uC)(r,"PUT",{...n,async onSuccess(){for(var e,t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];await u.invalidateQueries({queryKey:[l.eo]}),await (null===(e=n.onSuccess)||void 0===e?void 0:e.call(n,...i))}})}function A(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,a.t)(),t=(0,c.useQueryClient)(),r=null==n?void 0:n.uuid;return(0,i.uC)("/api/organizations/".concat(r,"/pro/upgrade_to_yearly"),"PUT",{...e,onSuccess(n,i,a){var u;t.invalidateQueries({queryKey:[l.QU,r]}),t.invalidateQueries({queryKey:[l.sM,r]}),t.invalidateQueries({queryKey:[l.je,r]}),t.invalidateQueries({queryKey:[l.RK,r]}),null===(u=e.onSuccess)||void 0===u||u.call(e,n,i,a)},enabled:!!n})}function O(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,a.t)(),t=(0,c.useQueryClient)(),r=null==n?void 0:n.uuid;return(0,i.uC)("/api/organizations/".concat(r,"/upgrade_to_max"),"PUT",{...e,transformVariables:e=>({max_tier:e.maxTier,promo_code:e.promoCode}),onSuccess(n,i,a){var u;t.invalidateQueries({queryKey:[l.QU,r]}),t.invalidateQueries({queryKey:[l.sM,r]}),t.invalidateQueries({queryKey:[l.je,r]}),t.invalidateQueries({queryKey:[l.RK,r]}),null===(u=e.onSuccess)||void 0===u||u.call(e,n,i,a)},enabled:!!n})}function R(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,a.t)(),t=(0,c.useQueryClient)(),r=null==n?void 0:n.uuid;return(0,i.uC)("/api/organizations/".concat(r,"/downgrade_individual_claude_subscription"),"PUT",{...e,onSuccess(n,i,a){var u;if(n.downgrade_timestamp){let e=new Date(1e3*n.downgrade_timestamp).toISOString();t.setQueryData([l.QU,r],n=>{if(n)return{...n,scheduled_downgrade:{base_price_in_minor_units:0,billing_interval:i.target_plan_type.includes("annual")?"yearly":"monthly",currency:"USD",date:e,plan_type:i.target_plan_type},has_schedule:!0}})}t.invalidateQueries({queryKey:[l.QU,r]}),t.invalidateQueries({queryKey:[l.sM,r]}),null===(u=e.onSuccess)||void 0===u||u.call(e,n,i,a)},enabled:!!n})}function L(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,a.t)(),t=(0,c.useQueryClient)(),r=null==n?void 0:n.uuid;return(0,i.uC)("/api/organizations/".concat(r,"/cancel_subscription_downgrade"),"PUT",{...e,onSuccess(n,i,a){var u;t.setQueryData([l.QU,r],e=>{if(e)return{...e,scheduled_downgrade:void 0,has_schedule:!1}}),t.invalidateQueries({queryKey:[l.QU,r]}),t.invalidateQueries({queryKey:[l.sM,r]}),null===(u=e.onSuccess)||void 0===u||u.call(e,n,i,a)},enabled:!!n})}function X(e){let{activeOrganization:n}=(0,a.t)();return(0,i.WE)("/api/stripe/".concat(null==n?void 0:n.uuid,"/balance"),{queryKey:["stripe-balance",null==n?void 0:n.uuid],staleTime:18e5,enabled:!!n,...e})}function Y(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:n}=(0,a.t)(),t=null==n?void 0:n.uuid;return(0,i.WE)("/api/organizations/".concat(t,"/check_3ds_required"),{enabled:e&&!!n,queryKey:["check-3ds-required",t],meta:{noToast:!0},staleTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1})}function V(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,a.t)(),t=(0,c.useQueryClient)(),r=null==n?void 0:n.uuid;return(0,i.uC)("/api/organizations/".concat(r,"/verify_payment_method_3ds"),"POST",{...e,onSuccess(n,i,a){var u;t.invalidateQueries({queryKey:["check-3ds-required",r]}),t.invalidateQueries({queryKey:[l.QU,r]}),null===(u=e.onSuccess)||void 0===u||u.call(e,n,i,a)},enabled:!!n})}},27248:function(e,n,t){var i,a,r,u;t.d(n,{BT:function(){return a},kT:function(){return i}}),(r=i||(i={})).MONTHLY="monthly",r.YEARLY="yearly",(u=a||(a={})).FIVE_X="max_5x",u.TWENTY_X="max_20x"},36662:function(e,n,t){t.d(n,{DT:function(){return v},Iw:function(){return c},Qx:function(){return d},cK:function(){return s},wA:function(){return y}});var i=t(5362),a=t(27218),r=t(27895),u=t(30947),o=t(13262),l=t(77930);let s=()=>{var e;let{activeOrganization:n}=(0,a.t)();return(0,i.WE)("/api/organizations/".concat(null!==(e=null==n?void 0:n.uuid)&&void 0!==e?e:"","/invites"),{enabled:!!(null==n?void 0:n.uuid)&&(n.capabilities.includes("api")||n.capabilities.includes("raven")),queryKey:[o.BB,{orgUUID:null==n?void 0:n.uuid}],staleTime:0})},c=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,l.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(e,"/invites"),"POST",{...n,async onSuccess(){for(var i,a=arguments.length,r=Array(a),u=0;u<a;u++)r[u]=arguments[u];await t.invalidateQueries({queryKey:[o.BB,{orgUUID:e}]}),t.invalidateQueries({queryKey:[o.je,e]}),t.invalidateQueries({queryKey:[o.sM,e]}),await (null===(i=n.onSuccess)||void 0===i?void 0:i.call(n,...r))}})},d=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,l.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(e,"/invites/bulk"),"POST",{...n,async onSuccess(){for(var i,a=arguments.length,r=Array(a),u=0;u<a;u++)r[u]=arguments[u];await t.invalidateQueries({queryKey:[o.BB,{orgUUID:e}]}),t.invalidateQueries({queryKey:[o.je,e]}),t.invalidateQueries({queryKey:[o.sM,e]}),await (null===(i=n.onSuccess)||void 0===i?void 0:i.call(n,...r))}})},v=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,l.useQueryClient)(),{addError:s}=(0,r.e)();return(0,i.uC)("/api/organizations/".concat(e,"/invites/").concat(n),"DELETE",{...t,meta:{noToast:!0},async onSuccess(){for(var n,i=arguments.length,r=Array(i),u=0;u<i;u++)r[u]=arguments[u];await a.invalidateQueries({queryKey:[o.BB,{orgUUID:e}]}),a.invalidateQueries({queryKey:[o.je,e]}),a.invalidateQueries({queryKey:[o.sM,e]}),await (null===(n=t.onSuccess)||void 0===n?void 0:n.call(t,...r))},onError(e){var n,t;e instanceof u.Hx&&(null===(t=e.extra)||void 0===t?void 0:null===(n=t.details)||void 0===n?void 0:n.type)==="seat_minimum_reached"?s("You cannot go below 5 members."):s("There was an error revoking the invite.")}})},y=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,l.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(e,"/invites/").concat(n),"PUT",{...t,async onSuccess(){for(var n,i=arguments.length,r=Array(i),u=0;u<i;u++)r[u]=arguments[u];await a.invalidateQueries({queryKey:[o.BB,{orgUUID:e}]}),await (null===(n=t.onSuccess)||void 0===n?void 0:n.call(t,...r))}})}},82137:function(e,n,t){t.d(n,{er:function(){return d},gK:function(){return c},uy:function(){return s}});var i=t(5362),a=t(27218),r=t(27895),u=t(30947),o=t(13262),l=t(77930);let s=()=>{var e;let{activeOrganization:n}=(0,a.t)();return(0,i.WE)("/api/organizations/".concat(null!==(e=null==n?void 0:n.uuid)&&void 0!==e?e:"","/members"),{enabled:!!(null==n?void 0:n.uuid)&&(n.capabilities.includes("api")||n.capabilities.includes("raven")),queryKey:[o.I_,{orgUUID:null==n?void 0:n.uuid}],staleTime:0})},c=function(e){var n;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:r}=(0,a.t)(),u=(0,l.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(null!==(n=null==r?void 0:r.uuid)&&void 0!==n?n:"","/members/").concat(e),"PUT",{...t,meta:{errorMessage:"There was an error updating the user’s role."},async onSuccess(){for(var e,n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];await Promise.all([u.invalidateQueries({queryKey:[o.I_,{orgUUID:null==r?void 0:r.uuid}]}),u.invalidateQueries({queryKey:[o.BB,{orgUUID:null==r?void 0:r.uuid}]})]),await (null===(e=t.onSuccess)||void 0===e?void 0:e.call(t,...i))}})},d=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,l.useQueryClient)(),{addError:s}=(0,r.e)(),c="uuid"in n?n.uuid:n.account.uuid,d="email_address"in n?n.email_address:n.account.email_address;return(0,i.uC)("/api/organizations/".concat(e,"/members/").concat(c),"DELETE",{...t,meta:{noToast:!0},async onSuccess(){for(var n,i=arguments.length,r=Array(i),u=0;u<i;u++)r[u]=arguments[u];await a.invalidateQueries({queryKey:[o.I_,{orgUUID:e}]}),a.invalidateQueries({queryKey:[o.je,e]}),a.invalidateQueries({queryKey:[o.sM,e]}),await (null===(n=t.onSuccess)||void 0===n?void 0:n.call(t,...r))},onError(e){var n,t;e instanceof u.Hx&&(null===(t=e.extra)||void 0===t?void 0:null===(n=t.details)||void 0===n?void 0:n.type)==="seat_minimum_reached"?s("You cannot go below 5 members."):s("There was an error removing ".concat(d," from the organization."))}})}},59016:function(e,n,t){t.d(n,{$f:function(){return f},$r:function(){return o},CQ:function(){return l},KJ:function(){return d},Kg:function(){return v},Zd:function(){return p},aJ:function(){return s},hb:function(){return y},k6:function(){return m},vA:function(){return c}});var i=t(5362),a=t(27218),r=t(13262),u=t(77930);let o=e=>(0,i.WE)("/api/organizations/".concat(e),{queryKey:[r.mm,e],enabled:!!e,staleTime:3e4}),l=()=>{let{activeOrganization:e}=(0,a.t)(),n=null==e?void 0:e.uuid;return(0,i.Ne)(e=>{let{flagType:t}=e;return"/api/organizations/".concat(n,"/flags/").concat(t,"/dismiss")},"POST",(e,n)=>{let{flagType:t}=e;if(n)return{...n,active_flags:n.active_flags.filter(e=>e.type!==t)}},{queryKey:[r.mm,n]})},s=()=>{let{activeOrganization:e}=(0,a.t)(),n=null==e?void 0:e.uuid;return(0,i.WE)("/api/organizations/".concat(n,"/members_limit"),{queryKey:[r.UD,n],enabled:!!n,staleTime:0})},c=()=>{let{activeOrganization:e}=(0,a.t)(),n=null==e?void 0:e.uuid,t=(0,u.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(n,"/contracted_quantity"),"PUT",{enabled:!!n,onSuccess:async()=>{await t.invalidateQueries({queryKey:[r.UD,n]})}})},d=()=>{let{activeOrganization:e}=(0,a.t)(),n=null==e?void 0:e.uuid;return(0,i.WE)("/api/organizations/".concat(n,"/public_projects_enabled"),{queryKey:[r.eu,n],enabled:!!n,staleTime:0})},v=()=>{let{activeOrganization:e}=(0,a.t)(),n=null==e?void 0:e.uuid;return(0,i.WE)("/api/organizations/".concat(n,"/feature_settings"),{queryKey:[r.XC,n],enabled:!!n,staleTime:0})},y=()=>{var e,n;let{activeOrganization:t}=(0,a.t)(),{data:i}=o(null==t?void 0:t.uuid);return null===(n=null==i?void 0:null===(e=i.settings)||void 0===e?void 0:e.claude_ai_completion_feedback_enabled)||void 0===n||n};function f(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,a.t)(),o="/api/organizations/".concat(null!==(e=null==t?void 0:t.uuid)&&void 0!==e?e:""),l=(0,u.useQueryClient)();return(0,i.uC)(o,"PUT",{enabled:!!t,...n,async onSuccess(){for(var e,t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];await Promise.all([l.invalidateQueries({queryKey:[r.aY]}),l.invalidateQueries({queryKey:[r.mm]})]),await (null===(e=n.onSuccess)||void 0===e?void 0:e.call(n,...i))}})}let p=()=>{let{activeOrganization:e}=(0,a.t)(),n=null==e?void 0:e.uuid;return(0,i.WE)("/api/organizations/".concat(n,"/allowed_domains"),{queryKey:[r.Kl,n],enabled:!!n})},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,a.t)(),t=null==n?void 0:n.uuid,o=(0,u.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(t,"/allowed_domains"),"PUT",{enabled:!!t,...e,onSuccess:async function(){for(var n,i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];await o.invalidateQueries({queryKey:[r.Kl,t]}),await (null===(n=e.onSuccess)||void 0===n?void 0:n.call(e,...a))}})}},27895:function(e,n,t){t.d(n,{ErrorsProvider:function(){return b},e:function(){return _},v:function(){return w}});var i=t(27573),a=t(35228),r=t(87033),u=t(97975),o=t.n(u),l=t(55854),s=t.n(l),c=t(78646),d=t.n(c),v=t(81695),y=t(7653),f=t(41270),p=t(27218),m=t(18013);let g=(0,y.createContext)(void 0);function b(e){let{children:n}=e,t=(0,y.useRef)(1),[a,r]=(0,y.useState)([]),u=(0,y.useCallback)(e=>{r(n=>n.filter(n=>n.id!==e))},[]),o=(0,y.useCallback)((e,n)=>{let i=t.current++;return r(n=>[...n,{id:i,message:e instanceof Error?e.message:e,toastType:"error"}]),n&&setTimeout(()=>u(i),n),i},[u]),l=(0,y.useCallback)((e,n)=>{let i=t.current++;return r(n=>[...n,{id:i,message:e,toastType:"success"}]),n&&setTimeout(()=>u(i),n),i},[u]),s=(0,y.useMemo)(()=>({toasts:a,addError:o,addSuccess:l,clearToast:u}),[a,o,l,u]);return(0,i.jsx)(g.Provider,{value:s,children:n})}function _(){let e=(0,y.useContext)(g);if(!e)throw Error("Must be called within ErrorsProvider");return e}let h=f.z.object({id:f.z.string().optional().nullable(),title:f.z.string().optional().nullable(),message:f.z.string().optional().nullable(),displayFrequencyHours:f.z.number().optional().nullable()}),Q={};function w(){var e;let{id:n,title:t,message:i,displayFrequencyHours:u}=(0,r.xQ)("claude_system_message",Q,h),{account:l}=(0,p.t)(),c=null!==(e=null==l?void 0:l.uuid)&&void 0!==e?e:"logged-out",f=(0,v.usePathname)(),[g,b]=(0,m.R)("dismissed-system-messages",{}),_=(0,y.useMemo)(()=>()=>b(e=>{let t=o()(e);return n&&d()(t,[c,n],Date.now()),t}),[b,c,n]);return(0,y.useMemo)(()=>{if(!l||(0,a.cG)(l,!0)||"/download"===f||!n)return!1;let e=s()(g,[c,n]);return!e||"boolean"==typeof e||!!u&&Date.now()-e>=36e5*u},[l,n,c,g,u,f])?{currentSystemMessageId:n,currentSystemMessageTitle:t,currentSystemMessageContent:i,dismissCurrentSystemMessage:_}:{currentSystemMessageId:null,currentSystemMessageTitle:null,currentSystemMessageContent:null,dismissCurrentSystemMessage:()=>null}}},6600:function(e,n,t){t.d(n,{N:function(){return u}});var i=t(92841),a=t(7653),r=t(27218);function u(e){let{account:n,activeOrganization:t}=(0,r.t)();return(0,a.useMemo)(()=>(0,i.Di)(n,t,e),[n,t,e])}},18013:function(e,n,t){t.d(n,{A:function(){return r},R:function(){return u}});var i=t(83981),a=t(14418);function r(e,n){return(0,i.X)({key:"SSS-".concat(e),defaultValue:n,serialize:JSON.stringify,deserialize:e=>void 0===e?n:JSON.parse(e)})}function u(e,n){return(0,a.I)({key:"LSS-".concat(e),defaultValue:n,serialize:JSON.stringify,deserialize:e=>void 0===e?n:JSON.parse(e),getInitialValueInEffect:!1,sync:!0})}},70354:function(e,n,t){t.d(n,{z:function(){return d}});var i=t(27573),a=t(11607),r=t(49289),u=t(10607),o=t(88146),l=t(7653);let s="\n    text-text-000\n    border-0.5\n    border-border-300\n    relative\n    overflow-hidden\n    font-styrene\n    font-medium\n    transition\n    duration-100\n    hover:border-border-300/0\n    bg-bg-300/0\n    hover:bg-bg-400\n    backface-hidden",c=(0,r.j)("inline-flex\n  items-center\n  justify-center\n  relative\n  shrink-0\n  can-focus\n  select-none\n  disabled:pointer-events-none\n  disabled:opacity-50\n  disabled:shadow-none\n  disabled:drop-shadow-none",{variants:{variant:{primary:"bg-text-000\n        text-bg-000\n        relative\n        overflow-hidden\n        font-medium\n        font-styrene\n        transition-transform\n        will-change-transform\n        ease-[cubic-bezier(0.165,0.85,0.45,1)]\n        duration-150\n        hover:scale-y-[1.015]\n        hover:scale-x-[1.005]\n        backface-hidden\n        after:absolute\n        after:inset-0\n        after:bg-[radial-gradient(at_bottom,hsla(var(--bg-000)/20%),hsla(var(--bg-000)/0%))]\n        after:opacity-0\n        after:transition\n        after:duration-200\n        after:translate-y-2\n        hover:after:opacity-100\n        hover:after:translate-y-0",flat:"bg-accent-main-000\n          text-oncolor-100\n          font-styrene\n          font-medium\n          transition-colors\n          hover:bg-accent-main-200",secondary:s,outline:s,ghost:"text-text-300\n          border-transparent\n          transition\n          font-styrene\n          duration-300\n          ease-[cubic-bezier(0.165,0.85,0.45,1)]\n          hover:bg-bg-400\n          aria-pressed:bg-bg-400\n          aria-checked:bg-bg-400\n          aria-expanded:bg-bg-300\n          hover:text-text-100\n          aria-pressed:text-text-100\n          aria-checked:text-text-100\n          aria-expanded:text-text-100",underline:"opacity-80\n          transition-all\n          active:scale-[0.985]\n          hover:opacity-100\n          hover:underline\n          underline-offset-3",danger:"bg-danger-200\n          text-oncolor-100\n          font-styrene\n          font-medium\n          transition\n          hover:scale-y-[1.015]\n          hover:scale-x-[1.005]\n          hover:opacity-95",unstyled:""},size:{default:"h-9 px-4 py-2 rounded-lg min-w-[5rem] active:scale-[0.985] whitespace-nowrap text-sm",sm:"h-8 rounded-md px-3 text-xs min-w-[4rem] active:scale-[0.985] whitespace-nowrap",lg:"h-11 rounded-[0.6rem] px-5 min-w-[6rem] active:scale-[0.985] whitespace-nowrap",icon:"h-9 w-9 rounded-md active:scale-95 shrink-0",icon_xs:"h-6 w-6 rounded-md active:scale-95",icon_sm:"h-8 w-8 rounded-md active:scale-95",icon_lg:"h-11 w-11 rounded-[0.6rem] active:scale-95",inline:"px-0.5 rounded-[0.25rem]",unset:""},option:{rounded:"!rounded-full",prepend:"",append:""},state:{active:""}},compoundVariants:[{size:"default",option:"prepend",class:"pl-2 pr-3 gap-1"},{size:"lg",option:"prepend",class:"pl-2.5 pr-3.5 gap-1"},{size:"sm",option:"prepend",class:" pl-2 pr-2.5 gap-1"},{size:"default",option:"append",class:"pl-3 pr-2 gap-1"},{size:"lg",option:"append",class:"pl-3.5 pr-2.5 gap-1"},{size:"sm",option:"append",class:"pl-2.5 pr-2 gap-1"},{variant:"ghost",state:"active",class:"!bg-bg-400"}],defaultVariants:{variant:"primary",size:"default"}}),d=(0,l.forwardRef)((e,n)=>{let{className:t,variant:r,size:l,option:s,loading:d,href:v,onLinkClick:y,target:f,prepend:p,append:m,state:g,disabled:b,children:_,type:h="button",...Q}=e;p&&(s="prepend"),m&&(s="append");let w=(0,u.Z)(c({variant:r,size:l,option:s,state:g,className:t}),d&&"text-transparent ![text-shadow:_none]"),S=(0,i.jsxs)(i.Fragment,{children:[d&&(0,i.jsx)("div",{className:(0,u.Z)("absolute inset-0 flex items-center justify-center",r&&"flat"!==r&&"danger"!==r?"text-bg-300":"text-bg-000"),children:(0,i.jsx)(a.Loading,{size:"sm",inheritColor:!0,delay:0})}),p,_,m]});return v?(0,i.jsx)(o.default,{href:v,target:f||"_self",className:w,"aria-label":Q["aria-label"],onClick:y,children:S}):(0,i.jsx)("button",{className:w,ref:n,disabled:b||d,type:h,...Q,children:S})});d.displayName="Button"},35228:function(e,n,t){t.d(n,{D_:function(){return u},IC:function(){return o},c6:function(){return a},cG:function(){return l},kK:function(){return r},wJ:function(){return i}});let i=e=>{let{account:n,isClaudeDot:t}=e;return t?!1===n.settings.has_finished_claudeai_onboarding:!n.full_name||!n.display_name},a=(e,n)=>n&&!e.is_verified,r=(e,n)=>!!function(e,n){for(let t of e.invites)if(t.organization.capabilities&&t.organization.capabilities.includes(n))return t}(e,n?"raven":"api"),u=(e,n)=>!n&&0===e.invites.length&&0===e.memberships.filter(e=>e.organization.capabilities.includes("api")).length,o=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t&&n&&!e.age_is_verified},l=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i({account:e,isClaudeDot:n})||a(e,n)||r(e,n)||u(e,n)||o(e,n,t)}}}]);