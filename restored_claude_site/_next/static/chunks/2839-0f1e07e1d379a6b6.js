"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2839,6551],{1445:function(e,t,n){n.d(t,{Ad:function(){return y},Le:function(){return N},hU:function(){return k},iH:function(){return b},wH:function(){return j},zA:function(){return w}});var s=n(76220),i=n(5362),r=n(27218),a=n(48410),o=n(87033),l=n(10228),c=n(98649),d=n(94449),u=n(51375),p=n(2949),h=n(85465),x=n(19132),m=n(46200),g=n(68571);let f=()=>{let{value:e}=(0,o.FL)("use_incoherent_traffic_light_noises"),{selectedTier:t,isTierSelectorEnabled:n,shouldOverrideFeatureAccess:s}=(0,a.i)();return n&&s&&t?t===c.kQ.MAX||t===c.kQ.ENTERPRISE:e},b=()=>{let e=f(),t=v();return e&&t&&!g.env.NEXT_PUBLIC_DISABLE_COMPASS},y=()=>{let e=f(),t=w();return e&&t},j=()=>{let e=(0,s.E6)();return t=>e(t,"compass")},v=()=>{let e=(0,m.uH)(),t=(0,p.$Z)(),n=(0,x._3)(l.Fg.GMAIL),s=(0,x._3)(l.Fg.GCAL),i=(0,d.ij)();return e||t||n||s||i},w=()=>{let e=(0,m.ou)(),t=(0,p.ez)(),n=(0,x.te)(l.Fg.GMAIL),s=(0,x.te)(l.Fg.GCAL),{servers:i}=(0,u.cH)(),r=i.filter(e=>"remote"===e.type).length>0;return e||t||n||s||r},k=e=>{var t;let n=(0,m.qS)(e),s=(0,p.EU)(e),{isAuthenticated:i}=(0,p.oE)(),r=(0,x.j5)(l.Fg.GMAIL,e),{isAuthenticated:a}=(0,x.QD)(l.Fg.GMAIL),o=(0,x.j5)(l.Fg.GCAL,e),{isAuthenticated:c}=(0,x.QD)(l.Fg.GCAL),{servers:d}=(0,u.cH)(),g=!1,f=null!==(t=(0,h.gE)("enabled_mcp_tools"))&&void 0!==t?t:{};for(let e of d.filter(e=>"remote"===e.type&&(e.isConnected||e.isAuthless))||[])if(e.tools.some(t=>!1!==f[(0,u.q)(e.uuid,t.name)])){g=!0;break}return n||s&&i||r&&a||o&&c||g},N=(e,t)=>{let{activeOrganization:n}=(0,r.t)(),s=null==n?void 0:n.uuid;return(0,i.uC)("/api/organizations/".concat(s,"/chat_conversations/").concat(e,"/task/").concat(t,"/stop"),"POST",{enabled:!!(s&&e&&t)})}},46200:function(e,t,n){n.d(t,{FD:function(){return p},j9:function(){return m},ou:function(){return h},qS:function(){return x},uH:function(){return u}});var s=n(76220),i=n(27218),r=n(48410),a=n(87033),o=n(98649),l=n(59016);let c=!n(68571).env.NEXT_PUBLIC_DISABLE_WEB_SEARCH,d=()=>{let{value:e}=(0,a.FL)("claudeai_web_search_default_on");return e&&c},u=()=>{let{value:e}=(0,a.FL)("claudeai_web_search"),{selectedTier:t,isTierSelectorEnabled:n,shouldOverrideFeatureAccess:s}=(0,r.i)();return n&&s&&t?t===o.kQ.PRO||t===o.kQ.MAX||t===o.kQ.ENTERPRISE:e&&c},p=()=>{var e;let t=(0,i.Cf)(),{data:n}=(0,l.Kg)(),s=!!n&&!(null===(e=n.disabled_features)||void 0===e?void 0:e.includes("web_search"));return c&&(!t||s)},h=()=>{let e=u(),t=p();return e&&t},x=e=>{var t,n,s;let r=p(),{account:a}=(0,i.t)(),o=d();if(!r)return!1;let l=o?(null==a?void 0:null===(t=a.settings)||void 0===t?void 0:t.enabled_web_search)!==!1:!!(null==a?void 0:null===(n=a.settings)||void 0===n?void 0:n.enabled_web_search);return e?!!(null==e?void 0:null===(s=e.conversationSettings)||void 0===s?void 0:s.enabled_web_search):l},m=e=>{let t=(0,s.E6)()(e,"web_search");return c&&t}},95440:function(e,t,n){n.d(t,{M:function(){return p}});var s=n(27573),i=n(70354),r=n(32737),a=n(96346),o=n(80151),l=n(10607),c=n(68425),d=n(7653),u=n(57860);let p=d.forwardRef((e,t)=>{let{indicatorActive:n,disabled:d,text:p,tag:h,className:x,buttonClassName:m,tooltip:g,hideIndicatorText:f,icon:b,showRemoveIcon:y,showCaretIcon:j,...v}=e,w=(0,s.jsx)(c.E.div,{className:(0,l.Z)("flex",p?"shrink min-w-8":"shrink-0",x),initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:700,damping:32,mass:.7},children:(0,s.jsxs)(i.z,{variant:"unstyled",size:"unset",className:(0,l.Z)("border-0.5 transition-all h-8 min-w-8 rounded-lg flex items-center px-[7.5px] group !pointer-events-auto !outline-offset-1",n?"text-accent-secondary-100 bg-accent-secondary-100/[8%] border-accent-secondary-200/20":"text-text-300 border-border-300",!d&&(n?"active:scale-[0.98] hover:text-accent-secondary-000 hover:bg-accent-secondary-100/[12%]":"active:scale-[0.98] hover:text-text-200/90 hover:bg-bg-100"),m),disabled:d,...v,children:[b,!!p&&!f&&(0,s.jsxs)("div",{className:"min-w-0 flex items-center",children:[(0,s.jsx)("p",{className:"min-w-0 pl-1 text-xs tracking-tight text-ellipsis whitespace-nowrap break-words overflow-hidden shrink",children:p}),!!h&&(0,s.jsx)(u.e,{tag:h,className:"!top-0 !ml-1"})]}),j&&(0,s.jsx)(a.p,{size:12,className:"ml-1 opacity-70"}),!d&&y&&(0,s.jsx)("div",{className:"duration-100 w-0 group-hover:w-3 opacity-0 group-hover:opacity-70 transition-all ml-0 group-hover:ml-1",children:(0,s.jsx)(o.X,{size:12})})]})});return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r.u,{tooltipContent:g,disableHoverableContent:!0,side:"bottom",align:"center",children:w})})});p.displayName="InputMenuButton"},57860:function(e,t,n){n.d(t,{P:function(){return v},e:function(){return Z}});var s=n(41596),i=n(27573),r=n(5984),a=n(9677),o=n(9788),l=n(32737),c=n(1133),d=n(7992),u=n(37141),p=n(85689),h=n(39727),x=n(10607),m=n(50294),g=n(45790);let f=e=>{let{count:t}=e;return(0,i.jsx)("span",{className:"w-[1.125rem] h-[1.125rem] border-border-300 border-0.5 flex items-center justify-center text-[0.625rem] font-medium bg-accent-secondary-100/[8%] text-accent-secondary-100 rounded-full",children:t})};function b(){let e=(0,s._)(["\n  flex \n  flex-row \n  items-center \n  flex-1 \n  min-w-28\n"]);return b=function(){return e},e}function y(){let e=(0,s._)(["\n  flex \n  flex-col  \n  flex-1 \n  min-w-0\n"]);return y=function(){return e},e}function j(){let e=(0,s._)(["\n  text-[0.75rem]\n  text-text-500\n  text-ellipsis \n  break-words \n  whitespace-nowrap \n  min-w-0\n  overflow-hidden\n"]);return j=function(){return e},e}let v=e=>{let{item:t,onClick:n,isHighlighted:s,onMouseOver:o,countDisplayVariant:l}=e,m=s&&!(0,c.r3)(),b={disabled:t.isDisabled,onClick:t.isDisabled?void 0:()=>{null==n||n()},onMouseOver:o},y=t.isDisabled||"pro"===t.tag||"new chat"===t.tag;return"subheader"===t.type?(0,i.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,i.jsx)(k,{...b,children:(0,i.jsx)(S,{children:t.label})})}):"button"===t.type?(0,i.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,i.jsxs)(k,{className:(0,x.Z)("primary"===t.variant&&"justify-center pr-4","primary"===t.variant&&m&&"!bg-accent-secondary-900/50 !text-accent-secondary-100"),isHighlighted:m,...b,children:[(0,i.jsx)(N,{appearsDisabled:y,isHighlighted:m,itemKey:t.key,children:t.icon}),(0,i.jsxs)(C,{children:[(0,i.jsx)(A,{isHighlighted:m,appearsDisabled:y,children:t.label}),(0,i.jsx)(Z,{tag:t.tag})]}),(0,i.jsx)(_,{className:"!text-text-500 opacity-70",children:t.secondaryText}),t.isExternal&&(0,i.jsx)(d.O,{size:16,className:"text-text-500 opacity-70"})]})}):"buttonGroup"===t.type?(0,i.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,i.jsxs)(k,{...b,isHighlighted:m,children:[(0,i.jsx)(N,{appearsDisabled:y,isHighlighted:m,itemKey:t.key,children:t.icon}),(0,i.jsxs)(C,{children:[(0,i.jsx)(A,{isHighlighted:m,appearsDisabled:y,children:t.label}),(0,i.jsx)(Z,{tag:t.tag})]}),(0,i.jsx)(u.T,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"toggleGroup"===t.type?(0,i.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,i.jsxs)(k,{...b,isHighlighted:m,children:[(0,i.jsx)(N,{appearsDisabled:y,isHighlighted:m,itemKey:t.key,children:t.icon}),(0,i.jsxs)(C,{children:[(0,i.jsx)(A,{isHighlighted:m,appearsDisabled:y,children:t.label}),(0,i.jsx)(Z,{tag:t.tag})]}),t.enabledCount?"verbose"===l?(0,i.jsx)("span",{className:"text-accent-secondary-100",children:(0,i.jsx)(g.Z,{defaultMessage:"{count} enabled",values:{count:t.enabledCount},id:"yA/nbBqm+9"})}):(0,i.jsx)(f,{count:t.enabledCount}):(0,i.jsx)("span",{className:"text-text-500",children:(0,i.jsx)(g.Z,{defaultMessage:"Disabled",id:"tthToSLF5Z"})}),(0,i.jsx)(u.T,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"optionGroup"===t.type?(0,i.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,i.jsxs)(k,{...b,isHighlighted:m,children:[(0,i.jsx)(N,{appearsDisabled:y,isHighlighted:m,itemKey:t.key,children:t.icon}),(0,i.jsxs)(C,{children:[(0,i.jsx)(A,{isHighlighted:m,appearsDisabled:y,children:t.label}),(0,i.jsx)(Z,{tag:t.tag})]}),(0,i.jsx)(_,{children:t.secondaryText}),(0,i.jsx)(u.T,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"toggleAll"===t.type||"toggle"===t.type||"switch"===t.type||"option"===t.type?(0,i.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,i.jsxs)(k,{...b,hasSubtitle:!!t.subtitle,className:(0,x.Z)("active:!scale-100",t.isChecked&&"text-primary-500"),isHighlighted:m,children:[(0,i.jsx)(N,{appearsDisabled:y,isHighlighted:m,itemKey:t.key,children:t.icon}),(0,i.jsxs)(E,{children:[(0,i.jsxs)(C,{children:[(0,i.jsx)(A,{isHighlighted:m,appearsDisabled:y,children:t.label}),(0,i.jsx)(I,{tag:t.timeTag}),(0,i.jsx)(Z,{tag:t.tag})]}),(0,i.jsx)(L,{children:t.subtitle})]}),"toggleAll"===t.type&&(0,i.jsx)(r.XZ,{variant:"minus",disabled:!0,checked:t.isChecked,label:"",hideLabel:!0,className:(0,x.Z)(y?"!cursor-default":"!opacity-100 !cursor-pointer")}),"toggle"===t.type&&(0,i.jsx)(r.XZ,{disabled:!0,checked:t.isChecked,label:"",hideLabel:!0,className:(0,x.Z)(y?"!cursor-default":"!opacity-100 !cursor-pointer")}),"switch"===t.type&&(0,i.jsx)(a.Z,{readOnly:!0,height:16,width:28,checked:t.isChecked,className:(0,x.Z)(!t.isDisabled&&"!cursor-pointer",y&&"opacity-50")}),"option"===t.type&&t.isChecked&&(0,i.jsx)(p.J,{weight:"bold",size:16,className:"text-accent-secondary-100 shrink-0"})]})}):"divider"===t.type?(0,i.jsx)("div",{className:"h-[0.5px] my-1.5 mx-0.5 bg-border-300"}):"back"===t.type?(0,i.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,i.jsxs)(k,{...b,isHighlighted:m,children:[(0,i.jsx)(N,{itemKey:t.key,children:(0,i.jsx)(h.X,{size:16,className:(0,x.Z)("h-4 w-4 text-text-500 group-hover:!text-text-400",m&&"!text-text-400")})}),(0,i.jsx)("span",{className:"relative",children:(0,i.jsxs)(C,{children:[(0,i.jsx)(A,{className:(0,x.Z)("opacity-100 transition-opacity text-text-500 group-hover:!text-text-400",m&&"!text-text-400"),children:t.label}),(0,i.jsx)(Z,{tag:t.tag})]})})]})}):null},w=e=>{let{tooltip:t,tooltipImage:n,children:s}=e,r=(0,i.jsx)("div",{className:"",children:s});return t?(0,i.jsx)(l.u,{sideOffset:10,contentStyle:n?"sampleImage":"inputMenu",tooltipContent:(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[!!n&&(0,i.jsx)(m.default,{src:n.src,alt:"",width:n.width,height:n.height,className:"rounded-[6px] overflow-hidden"}),(0,i.jsx)("p",{className:"p-1",children:t})]}),side:"right",children:r}):r},k=e=>{let{isHighlighted:t,className:n,hasSubtitle:s,...r}=e;return(0,i.jsx)("button",{...r,className:(0,x.Z)("group flex w-full items-center text-left gap-2.5 py-auto px-1.5 text-[0.875rem] text-text-200 rounded-md transition-colors select-none",t&&!r.disabled&&"!bg-bg-200/50 !text-text-000",n,!r.disabled&&"active:scale-[0.995] hover:bg-bg-200/50 hover:text-text-000",s?"h-[3rem]":"h-[2rem]")})},N=e=>{let{appearsDisabled:t,isHighlighted:n,itemKey:s,children:r,...a}=e;return(0,i.jsx)("div",{className:(0,x.Z)("group/icon min-w-4 min-h-4 flex items-center justify-center text-text-300 shrink-0",t&&"opacity-50",n&&!t&&"!text-text-100",!t&&"group-hover:text-text-100"),...a,children:r})},C=o.q.div(b()),E=o.q.div(y()),S=e=>{let{className:t,...n}=e;return(0,i.jsx)("p",{...n,className:(0,x.Z)("text-[0.8125rem] text-text-500 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",t)})},A=e=>{let{appearsDisabled:t,isHighlighted:n,className:s,...r}=e;return(0,i.jsx)("p",{...r,className:(0,x.Z)("text-[0.9375rem] text-text-300 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",n&&!t&&"!text-text-100",s,t&&"opacity-50",!t&&"group-hover:text-text-100")})},L=o.q.p(j()),_=e=>{let{className:t,...n}=e;return n.children?(0,i.jsx)("p",{...n,className:(0,x.Z)("flex-initial text-right shrink text-[0.875rem] text-accent-secondary-100 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",t)}):null},Z=e=>{let{tag:t,className:n}=e;return t?(0,i.jsx)("div",{className:(0,x.Z)("uppercase inline-flex items-center text-[0.5625rem] font-medium h-4 px-2 rounded-2xl ml-2.5 relative top-[1px] shrink-0 will-change-transform",("pro"===t||"new chat"===t||"alpha"===t)&&"text-text-300 bg-bg-300/60","beta"===t&&"text-accent-secondary-100 bg-accent-secondary-100/[8%]",n),children:t}):null},I=e=>{let{tag:t,className:n}=e;return t?(0,i.jsx)("div",{className:(0,x.Z)("text-text-500 bg-bg-100 inline-flex items-center text-[0.5625rem] h-4 px-2 rounded-2xl ml-2.5 relative top-[1px] shrink-0",n),children:t}):null}},45783:function(e,t,n){n.d(t,{h:function(){return b}});var s=n(27573),i=n(94872),r=n(70354),a=n(32737),o=n(15595),l=n(25075),c=n(12403),d=n(8927),u=n(68425),p=n(7653),h=n(40950),x=n(45790),m=n(1445),g=n(52939);let f=e=>{let{isOpen:t,onClose:n,onConfirm:i,isLoading:a=!1}=e,o=(0,p.useCallback)(e=>{"Enter"!==e.key||a||i()},[i,a]);return(0,p.useEffect)(()=>(t&&window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}),[t,o]),(0,s.jsxs)(g.u_,{isOpen:t,onClose:n,title:(0,s.jsx)(x.Z,{defaultMessage:"Want to stop researching?",id:"H+/TRHeeuc"}),children:[(0,s.jsx)("div",{className:"mt-4 mb-6",children:(0,s.jsx)(x.Z,{defaultMessage:"This can’t be undone. If you want to research this topic again, you can ask in this chat or start a new session.",id:"RuV1dagwp6"})}),(0,s.jsxs)(g.dm,{children:[(0,s.jsx)(r.z,{variant:"danger",onClick:i,disabled:a,autoFocus:!0,children:(0,s.jsx)(x.Z,{defaultMessage:"Stop research",id:"l3tljn/kXe"})}),(0,s.jsx)(r.z,{variant:"secondary",onClick:n,children:(0,s.jsx)(x.Z,{defaultMessage:"Keep researching",id:"ODR/0L48DC"})})]})]})},b=e=>{let{prompt:t,files:n,attachments:i,syncSourceUuids:r,conversation:a,onSend:o,onStop:l,isSending:c,isDisabled:u,disabledReason:p,currentCompassTask:h}=e,x=(()=>{if(h)return"researching";if(a){let{isSampling:e,isStoppingSampling:t}=a;if(e)return t?"stopping":"sampling"}return t.length>0||n.length>0||i.length>0||r.length>0?"drafting":"empty"})();return(0,s.jsx)(d.M,{children:"sampling"===x||"stopping"===x?(0,s.jsx)(j,{onStop:l,isLoading:"stopping"===x},"stop"):"researching"===x?(0,s.jsx)(y,{conversationId:null==a?void 0:a.id,taskId:h},"stop_research"):(0,s.jsx)(v,{isSending:c,isDisabled:u,disabledReason:p,onSend:o},"send")})},y=e=>{let{conversationId:t,taskId:n}=e,i=(0,h.Z)(),[c,d]=(0,p.useState)(!1),{mutate:u,isPending:g}=(0,m.Le)(t,null!=n?n:""),b=(0,p.useCallback)(()=>{t&&n&&(u(),d(!1))},[t,n,u]),y=(0,p.useCallback)(()=>{d(!0)},[]);return(0,p.useEffect)(()=>{let e=e=>{"Escape"!==e.key||g||d(!0)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[g]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.u,{tooltipContent:(0,s.jsxs)("div",{className:"inline-flex items-center justify-center gap-1",children:[(0,s.jsx)(x.Z,{defaultMessage:"Stop Claude response",id:"BonFmr6O3r"}),(0,s.jsx)("div",{className:"border-border-200 rounded-md border px-0.5 py-px text-center font-mono",children:(0,s.jsx)(x.Z,{defaultMessage:"ESC",description:"The escape key",id:"xoF0kR5Fua"})})]}),children:(0,s.jsx)(r.z,{variant:"secondary",size:"icon_sm",className:"!rounded-lg",onClick:y,"aria-label":i.formatMessage({defaultMessage:"Stop response",id:"RANC4/S/j1"}),children:g?(0,s.jsx)(o.U,{className:"animate-spin",size:18}):(0,s.jsx)(l.P,{weight:"bold",size:16})})}),(0,s.jsx)(f,{isOpen:c,onClose:()=>d(!1),onConfirm:b,isLoading:g})]})},j=e=>{let{onStop:t,isLoading:n}=e,i=(0,h.Z)();return(0,p.useEffect)(()=>{let e=e=>{"Escape"!==e.key||n||t()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t,n]),(0,s.jsx)(a.u,{tooltipContent:(0,s.jsxs)("div",{className:"inline-flex items-center justify-center gap-1",children:[(0,s.jsx)(x.Z,{defaultMessage:"Stop Claude response",id:"BonFmr6O3r"}),(0,s.jsx)("div",{className:"border-border-200 rounded-md border px-0.5 py-px text-center font-mono",children:(0,s.jsx)(x.Z,{defaultMessage:"ESC",description:"The escape key",id:"xoF0kR5Fua"})})]}),children:(0,s.jsx)(r.z,{variant:"secondary",size:"icon_sm",className:"!rounded-lg",onClick:()=>t(),"aria-label":i.formatMessage({defaultMessage:"Stop response",id:"RANC4/S/j1"}),children:n?(0,s.jsx)(o.U,{className:"animate-spin",size:18}):(0,s.jsx)(l.P,{weight:"bold",size:16})})})},v=e=>{let{isSending:t,isDisabled:n,disabledReason:l,onSend:d}=e,x=(0,h.Z)(),m=(0,p.useCallback)(()=>{(0,i.bq)("event","msg_sent",{location:"chat_input"}),d()},[d]);return(0,s.jsx)(u.E.div,{initial:{scale:.3,opacity:0},animate:{scale:1,opacity:1,transition:{delay:.15,scale:{type:"spring",stiffness:600,damping:30},opacity:{duration:.1}}},children:(0,s.jsx)(a.u,{tooltipContent:l,children:(0,s.jsx)("div",{children:(0,s.jsx)(r.z,{variant:"flat",size:"icon_sm",className:"!rounded-lg !h-8 !w-8",disabled:n,onClick:()=>m(),"aria-label":x.formatMessage({defaultMessage:"Send message",id:"Xx0WZVz8QS"}),children:t?(0,s.jsx)(o.U,{className:"animate-spin",weight:"bold",size:16}):(0,s.jsx)(c.a,{weight:"bold",size:16})})})})})}},66551:function(e,t,n){n.d(t,{E:function(){return Q}});var s=n(27573),i=n(7653);let r=(0,i.createContext)({setOverrideSubmit:()=>!1});var a=n(1133),o=n(17845),l=n(81631),c=n(10761),d=n(93785),u=n(51716),p=n(81165),h=n(96633),x=n(19021),m=n(29860),g=n.n(m);let f=new c.H$("inputAutocomplete"),b=()=>({decoration:null,completion:null}),y=(e,t)=>c.Y1.atEnd(e).$anchor.pos===t.$anchor.pos,j=e=>{let{editor:t}=e;if(!y(t.state.doc,t.state.selection))return!1;let n=f.getState(t.state);return!!n.decoration&&(t.view.dispatch(t.state.tr.insertText(n.completion.content)),!0)},v=(e,t,n,s)=>{let i=e.getMeta(f);if(i&&i.prompt===s.doc.textContent&&(t.completion=i),!y(s.doc,s.selection)||!t.completion||t.completion.prompt!==s.doc.textContent)return t.decoration=null,t;let r=document.createElement("span");r.className="text-text-500",r.textContent=t.completion.content;let a=document.createElement("span");a.className="ml-1 px-1 border rounded-lg align-[1px] font-medium text-xs text-text-500",a.textContent="Tab";let o=s.selection.$head.pos,l=x.p.widget(o,r),c=x.p.widget(o,a),d=x.EH.create(s.doc,[l,c]);return t.decoration=d,t},w=d.hj.create({name:"inputAutocompletion",addOptions:()=>({fetchInputAutocompletion:e=>Promise.resolve("")}),addProseMirrorPlugins(){let e=g()(async(e,t)=>{try{let n=this.options.fetchInputAutocompletion,s=await n(t);s&&e.dispatch(e.state.tr.setMeta(f,{prompt:t,content:s}))}catch(e){}},300);return[new c.Sy({key:f,state:{init:b,apply:v},props:{decorations(e){return this.getState(e).decoration}},view:t=>{let{textContent:n}=t.state.doc;return n.length>=3&&e(t,n),{update:(t,n)=>{var s;let{state:i}=t,{doc:r}=i;!n.doc.eq(r)&&(null===(s=f.getState(i).completion)||void 0===s?void 0:s.prompt)!==r.textContent&&r.textContent.length>=3&&e(t,r.textContent)}}}})]},addKeyboardShortcuts:()=>({Tab:j})});var k=n(64295);let N=e=>0===e.state.selection.$from.parentOffset,C=e=>"codeBlock"===e.state.selection.$from.parent.type.name,E=e=>e.state.selection.$from.marks().some(e=>"code"===e.type.name),S=e=>"heading"===e.state.selection.$from.parent.type.name,A=e=>e.state.selection.$from.marks().some(e=>"bold"===e.type.name),L=e=>e.state.selection.$from.marks().some(e=>"italic"===e.type.name),_=e=>e.state.selection.$from.marks().some(e=>"strike"===e.type.name),Z=e=>{let t=e.state.selection.$from;return t.parentOffset===t.parent.nodeSize-2},I=e=>{let t=e.state.tr;t.setStoredMarks([]),t.insertText("​"),e.view.dispatch(t)},H=e=>!(e.state.selection.$from.before()>0)&&(I(e),!0),M=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&(I(e),!0),D=e=>!(e.state.selection.$from.before()>0)&&e.chain().insertContentAt(0,"<p></p>").run(),z=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&e.chain().insertContent("<p></p>").run(),T=d.hj.create({name:"CodeBlockKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(C(t)&&N(t))&&D(t)}})}),R=d.hj.create({name:"InlineCodeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(E(t)&&N(t))&&D(t)},ArrowDown:e=>{let{editor:t}=e;return!!(E(t)&&Z(t))&&z(t)},ArrowRight:e=>{let{editor:t}=e;return!!(E(t)&&Z(t))&&M(t)},ArrowLeft:e=>{let{editor:t}=e;return!!(E(t)&&N(t))&&H(t)}})}),K=d.hj.create({name:"HeadingKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(S(t)&&N(t))&&D(t)},ArrowDown:e=>{let{editor:t}=e;return!!(S(t)&&Z(t))&&z(t)}})}),F=d.hj.create({name:"BoldKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(A(t)&&Z(t))&&M(t)}})}),P=d.hj.create({name:"ItalicKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(L(t)&&Z(t))&&M(t)}})}),$=d.hj.create({name:"StrikeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(_(t)&&Z(t))&&M(t)}})}),O=d.hj.create({name:"PTagShiftEnterCreateExtension",addKeyboardShortcuts:()=>({"Shift-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0},"Alt-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0}})}),B=d.hj.create({name:"pasteCodeAsPlainText",addProseMirrorPlugins:()=>[new c.Sy({key:new c.H$("pasteCodeAsPlainText"),props:{handlePaste:(e,t,n)=>{let{schema:s}=e.state;if(!t.clipboardData||!t.clipboardData.types.includes("vscode-editor-data"))return!1;let i=t.clipboardData.getData("text/plain"),r=s.text(i);return e.dispatch(e.state.tr.replaceSelectionWith(r)),!0}}})]}),q=()=>(0,s.jsx)(u.T5,{className:"code-block",children:(0,s.jsx)("pre",{className:"my-4 block rounded-md bg-[#282c34] p-2 text-[0.875rem] text-[#abb2bf]",children:(0,s.jsx)(u.ms,{as:"code"})})}),U=e=>{let{tipTapEditorState:t,setTipTapEditorState:n,onReady:s,placeholder:i,extraEditorAttributes:r={},fetchInputAutocompletion:c}=e,d=[p.Z.configure({codeBlock:!1,blockquote:!1,hardBreak:!1,heading:!1,horizontalRule:!1}),o.Z.extend({addNodeView:()=>(0,u.fW)(q)}).configure({lowlight:h.$}),F,T,K,R,P,$,B,O,l.Z.configure({placeholder:i,emptyEditorClass:"is-editor-empty before:!text-text-500 before:whitespace-nowrap"}),w.configure({fetchInputAutocompletion:c})];return{editor:(0,u.jE)({editorProps:{attributes:{enterkeyhint:"enter",class:"break-words max-w-[60ch]",...r}},onCreate:()=>{null==s||s()},autofocus:!(0,a.tq)()&&"end",extensions:d,content:t,onUpdate(e){let{editor:t}=e,s=t.isEmpty,i=t.getJSON();n((0,k._B)(i)),s&&t.commands.focus("end")}})}};var G=n(10607),X=n(40950);let Q=(0,i.forwardRef)((e,t)=>{let{disabled:n,prompt:o,tipTapEditorState:l,setTipTapEditorState:d,placeholder:p,onSubmit:h,onReady:x,onFocus:m,onBlur:g,placement:f,fetchInputAutocompletion:b}=e,y=(0,X.Z)(),{editor:j}=U({tipTapEditorState:l,setTipTapEditorState:d,onReady:x,placeholder:p,fetchInputAutocompletion:b}),[v,w]=(0,i.useState)(!1);return(0,i.useImperativeHandle)(t,()=>({setContent(e){e!==o&&(null==j||j.commands.setContent(e,!1,{preserveWhitespace:"full"}))},setEditable(e){j.setOptions({editable:e})},focus(){null==j||j.commands.focus()},getPosition:()=>null==j?void 0:j.state.selection.$anchor,getEditor:()=>j,getIsAtEnd(){if(!j)return;let e=j.state.selection.$anchor.pos;return c.Y1.atEnd(j.state.doc).$anchor.pos===e},scrollToEnd(){j&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{j.commands.setTextSelection(j.state.doc.content.size),j.commands.scrollIntoView();let e=j.view.dom.parentElement;e&&(e.scrollTop=e.scrollHeight)})})}}),[j,o]),(0,i.useEffect)(()=>{null==j||j.setOptions({editable:!n})},[j,n]),(0,i.useEffect)(()=>{if(null!==j&&""!==p){let e=j.extensionManager.extensions.filter(e=>"placeholder"===e.name)[0];e&&(e.options.placeholder=p,j.view.dispatch(j.state.tr))}},[j,p]),(0,s.jsx)(r.Provider,{value:{setOverrideSubmit:w},children:(0,s.jsx)(u.kg,{"aria-label":y.formatMessage({defaultMessage:"Write your prompt to Claude",id:"Lxn7p6AQvE"}),className:(0,G.Z)("max-h-96 w-full overflow-y-auto break-words transition-opacity duration-200","bottom"===f?"min-h-[1.5rem]":"min-h-[3rem]",!(null==j?void 0:j.isEditable)&&"opacity-60"),editor:j,onKeyDownCapture:e=>{"Enter"===e.key&&(!h||v||e.shiftKey||e.altKey||e.nativeEvent.isComposing||(0,a.tq)()&&!e.metaKey&&!e.ctrlKey||(e.preventDefault(),h(e)))},onFocus:m,onBlur:g})})});Q.displayName="PromptInput"},72538:function(e,t,n){n.d(t,{p:function(){return l}});var s=n(27573),i=n(32737),r=n(10607),a=n(23607),o=n(7653);function l(e){let{state:t="static",className:l="w-8 text-accent-brand inline-block",isInteractive:d=!0}=e,u=(0,o.useRef)(null),p=(0,o.useRef)(t),h=(0,a.J)(),[x,m]=(0,o.useState)(),[g,f]=(0,o.useState)(t),[b,y]=(0,o.useReducer)(e=>e+1,0);(0,o.useEffect)(()=>{n.e(8199).then(n.bind(n,88199)).then(e=>{m(e.animations)})},[]),(0,o.useEffect)(()=>f(t),[t]),(0,o.useEffect)(()=>{let e;let t=u.current&&"function"==typeof u.current.animate;if(!h&&"static"!==g&&t&&x){let{frameCount:t,speed:n}=x[g],s=Array.from({length:t},(e,n)=>({transform:"translateY(-".concat(100/t*n,"%)")}));e=u.current.animate(s,{duration:n*s.length,iterations:"tickle"===g?1:1/0,easing:"steps(".concat(s.length,", jump-none)")}),"tickle"===g&&(null==e||e.addEventListener("finish",()=>f(p.current)))}return"tickle"!==g&&(p.current=g),()=>{null==e||e.cancel()}},[x,g,h]);let j=()=>{d&&"writing"!==g&&"thinking"!==g&&"tickle"!==g&&(f("tickle"),y())},v="Hi, I’m Claude. How can I help you today?";b<32&&b>24?v="Ugh, well you can’t do that forever":b<=24&&b>18?v="Alright, alright, you have my attention!":b<=18&&b>12?v="Are you still doing that?":b<=12&&b>5&&(v="Yes, yes. What can I do for you?");let w=!d||"writing"===g||"thinking"===g;if("static"===g||h||!x)return(0,s.jsx)(i.u,{className:(0,r.Z)("font-tiempos max-w-none italic tracking-tight",w&&"opacity-0"),tooltipContent:v,side:"right",children:(0,s.jsx)("div",{className:(0,r.Z)(l,"select-none"),onMouseDown:j,children:(0,s.jsx)(c,{className:"w-full fill-current"})})});let{svg:k,width:N,height:C}=x[g];return(0,s.jsx)(i.u,{className:(0,r.Z)("font-tiempos max-w-none italic tracking-tight",w&&"opacity-0"),tooltipContent:v,side:"right",children:(0,s.jsx)("div",{className:(0,r.Z)(l,"overflow-hidden select-none"),style:{aspectRatio:N/C},onMouseDown:j,children:(0,s.jsx)("div",{ref:u,className:"[&>svg]:block [&>svg]:w-full [&>svg]:fill-current",dangerouslySetInnerHTML:{__html:k}})})})}function c(e){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",...e,children:(0,s.jsx)("path",{d:"m19.6 66.5 19.7-11 .3-1-.3-.5h-1l-3.3-.2-11.2-.3L14 53l-9.5-.5-2.4-.5L0 49l.2-1.5 2-1.3 2.9.2 6.3.5 9.5.6 6.9.4L38 49.1h1.6l.2-.7-.5-.4-.4-.4L29 41l-10.6-7-5.6-4.1-3-2-1.5-2-.6-4.2 2.7-3 3.7.3.9.2 3.7 2.9 8 6.1L37 36l1.5 1.2.6-.4.1-.3-.7-1.1L33 25l-6-10.4-2.7-4.3-.7-2.6c-.3-1-.4-2-.4-3l3-4.2L28 0l4.2.6L33.8 2l2.6 6 4.1 9.3L47 29.9l2 3.8 1 3.4.3 1h.7v-.5l.5-7.2 1-8.7 1-11.2.3-3.2 1.6-3.8 3-2L61 2.6l2 2.9-.3 1.8-1.1 7.7L59 27.1l-1.5 8.2h.9l1-1.1 4.1-5.4 6.9-8.6 3-3.5L77 13l2.3-1.8h4.3l3.1 4.7-1.4 4.9-4.4 5.6-3.7 4.7-5.3 7.1-3.2 5.7.3.4h.7l12-2.6 6.4-1.1 7.6-1.3 3.5 1.6.4 1.6-1.4 3.4-8.2 2-9.6 2-14.3 3.3-.2.1.2.3 6.4.6 2.8.2h6.8l12.6 1 3.3 2 1.9 2.7-.3 2-5.1 2.6-6.8-1.6-16-3.8-5.4-1.3h-.8v.4l4.6 4.5 8.3 7.5L89 80.1l.5 2.4-1.3 2-1.4-.2-9.2-7-3.6-3-8-6.8h-.5v.7l1.8 2.7 9.8 14.7.5 4.5-.7 1.4-2.6 1-2.7-.6-5.8-8-6-9-4.7-8.2-.5.4-2.9 30.2-1.3 1.5-3 1.2-2.5-2-1.4-3 1.4-6.2 1.6-8 1.3-6.4 1.2-7.9.7-2.6v-.2H49L43 72l-9 12.3-7.2 7.6-1.7.7-3-1.5.3-2.8L24 86l10-12.8 6-7.9 4-4.6-.1-.5h-.3L17.2 77.4l-4.7.6-2-2 .2-3 1-1 8-5.5Z"})})}},45399:function(e,t,n){n.d(t,{H:function(){return r}});var s=n(27573),i=n(7653);let r=e=>{let{style:t,children:n,duration:r=200,delay:a=0,easing:o="ease-in-out",className:l="",onTransitionEnd:c=()=>void 0}=e,d=(0,i.useRef)(null),[u,p]=(0,i.useState)("auto"),h=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(d.current)return h.current=new ResizeObserver(e=>{for(let t of e){let e=t.contentRect.height;p("".concat(e,"px"))}}),h.current.observe(d.current),()=>{h.current&&h.current.disconnect()}},[]),(0,s.jsx)("div",{style:{height:u,transitionDelay:"".concat(a,"ms"),transitionTimingFunction:o,transitionDuration:"".concat(r,"ms"),transitionProperty:"height",...t},className:l,onTransitionEnd:()=>{c()},children:(0,s.jsx)("div",{className:"w-full",ref:d,children:n})})}}}]);