"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{12099:function(e,t,n){n.d(t,{Ml:function(){return r},Vl:function(){return o}});var a=n(5362),s=n(27218),l=n(87033),i=n(58183);function r(){let e=(0,i.useLayer)("frontend"),{value:t}=(0,l.FL)("chat_suggestion_chips_enabled"),n=e.get("chat_suggestion_chips",!1);return t||n}function o(e){let{mutateAsync:t,enabled:n}=function(){let{activeOrganization:e}=(0,s.t)(),{value:t}=(0,l.FL)("chat_autocomplete"),n=(0,a.uC)("/api/organizations/".concat(null==e?void 0:e.uuid,"/dust/chat_autocomplete"),"POST",{enabled:t,onError:()=>{console.warn("Failed to fetch completion")},meta:{noToast:!0}});return{mutateAsync:n.mutateAsync,isPending:n.isPending,isIdle:n.isIdle,enabled:t}}();return{fetchInputAutocompletion:async a=>{if(!n||!e)return"";let[s,l]=(await t({conversationUUID:null!=e?e:"",prompt:a})).prompt.split("\n").map(e=>e.trim());return"Yes"===s?" "===a[a.length-1]?l||"":" "+(l||""):"No"===s&&l||""}}}},69672:function(e,t,n){n.d(t,{F:function(){return o},a:function(){return r}});var a=n(76220),s=n(48410),l=n(98649),i=n(30131);let r=()=>{let{allModelOptions:e}=(0,a.uL)();return t=>{var n;let a=e.find(e=>e.model===t);return!!(null==a?void 0:null===(n=a.paprika_modes)||void 0===n?void 0:n.includes("extended"))}},o=()=>{let e=(0,i.lE)(),{selectedTier:t,isTierSelectorEnabled:n,shouldOverrideFeatureAccess:a}=(0,s.i)();return n&&a&&t?t===l.kQ.PRO||t===l.kQ.MAX||t===l.kQ.ENTERPRISE:!!e.length}},61377:function(e,t,n){n.d(t,{F4:function(){return d}});var a=n(5362),s=n(27218),l=n(13262),i=n(10228),r=n(2949);let o=e=>[i.co.CREATED,i.co.PENDING,i.co.UPDATING].includes(e),d=()=>{let e=(0,r.EU)(),t=(0,r.r7)(),n=(0,r.ez)(),{data:a}=c(i.Fg.GDRIVE),s=null==a?void 0:a.state;return!!(e&&t&&n&&s&&[i.co.CREATED,i.co.UPDATING,i.co.PENDING].includes(s))},c=e=>{let{account:t,activeOrganization:n}=(0,s.t)(),i=null==t?void 0:t.uuid,r=null==n?void 0:n.uuid;return(0,a.WE)("/api/organizations/".concat(r,"/sync/ingestion/").concat(e,"/progress"),{queryKey:[l.dY,{orgUuid:r,accountUuid:i,syncSourceType:e}],enabled:!!n,refetchInterval:e=>!!(e.state.data&&o(e.state.data.state))&&6e4,meta:{noToast:!0}})}},21878:function(e,t,n){n.d(t,{K:function(){return i}});var a=n(19170),s=n(27218),l=n(7653);function i(){let{mutate:e,isPending:t}=(0,a.Ck)(),{account:n}=(0,s.t)();return{dismiss:(0,l.useCallback)(t=>{var a;n&&e({...n.settings,dismissed_claudeai_banners:[...(null==n?void 0:null===(a=n.settings)||void 0===a?void 0:a.dismissed_claudeai_banners)||[],{banner_id:t,dismissed_at:new Date().toISOString()}]})},[n,e]),isDismissed:(0,l.useCallback)(e=>{var t,a;return(null==n?void 0:null===(a=n.settings)||void 0===a?void 0:null===(t=a.dismissed_claudeai_banners)||void 0===t?void 0:t.some(t=>t.banner_id===e))||!1},[n]),isPending:t}}},15662:function(e,t,n){n.d(t,{x:function(){return nh}});var a,s,l,i,r=n(41596),o=n(27573),d=n(9788),c=n(69321),u=n(87033),m=n(33186),f=n(10607),x=n(8927),p=n(68425),h=n(7653),g=n(40950),v=n(66605),y=n(12099),j=n(58417),b=n(16282),w=n(69735),M=n(89799);let k=e=>{let{attachments:t,files:n,syncSourceResults:a,onRemoveAttachment:s,onRemoveFile:l,onRemoveSyncSource:i,isUploadingFile:r,isUploadingSync:d}=e;return(0,o.jsxs)("div",{className:"border-border-300/25 border-t-0.5 rounded-b-2xl bg-bg-100 !p-3.5 !m-0 flex flex-row overflow-x-auto gap-3 px-3.5 py-2.5 -my-1",children:[t.map((e,t)=>(0,o.jsx)(b.mB,{file:e,size:"md",onRemoveFile:()=>s(t),isEditable:!0},t)),n.map((e,t)=>(0,o.jsx)(b.mB,{file:e,showWarnings:!0,size:"md",onRemoveFile:()=>l(t),isEditable:!0},e.file_uuid)),(0,o.jsx)(w.fz,{isShown:r}),a.map(e=>{let{syncSource:t,uuid:n}=e;return(0,o.jsx)(M.Q,{uuid:n,syncSource:t,onRemove:()=>i(n),isEditable:!0},n)}),(0,o.jsx)(w.fz,{isShown:d})]})};var C=n(22639),N=n(66551),_=n(71912),S=n(26525),E=n(27895),Z=n(10228),I=n(45790),A=n(2949),T=n(70712),z=n(56767);let D=()=>{let{setSyncSourceUuids:e,isAtMaxNumUploads:t,setIsUploadingDriveSync:n,prompt:a}=(0,C.r)(),s=(0,A.Aj)(),{addError:l}=(0,E.e)(),i=(0,g.Z)(),{mutate:r}=(0,v.cE)({onMutate:()=>{n(!0)},onSuccess:t=>{e(e=>[...e,t.uuid]),n(!1)},onError:e=>{n(!1),l((0,z.A)(e))},meta:{noToast:!0}}),{isDriveAuthenticated:d,initDriveAuth:c}=(0,A.nC)({callerIdentifier:"chat-input",handleAuthSuccess:()=>{for(let e of a.match(/(https?:\/\/[^\s]+)/gi)||[]){let t=(0,T.g)(e);t&&u(t,!0)}}}),u=(0,h.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(s||n){if(!d&&!n){l((0,o.jsx)("span",{children:(0,o.jsx)(I.Z,{defaultMessage:"<button>Authenticate</button> to paste link as attachment",id:"85AH1hyv0s",values:{button:e=>(0,o.jsx)("button",{className:"underline",onClick:c,children:e})}})}));return}if(t){l(i.formatMessage({defaultMessage:"You can add at most {maxUploads, plural, one {# attachment} other {# attachments}} to a message.",id:"wvnM4s8976"},{maxUploads:S.Qe}));return}r({sync_source_type:Z.Fg.GDRIVE,sync_source_config:{uri:e}})}},[s,d,t,r,c,l,i]);return u};var R=n(87683),O=n(5362),L=n(27218),F=n(45144),P=n(71817);let G=()=>{let{setPrompt:e,setAttachments:t,setFiles:n}=(0,C.r)(),{failedStreamRetryData:a,setFailedStreamRetryData:s}=(0,P.Qk)();(0,h.useEffect)(()=>{null!==a&&(e(a.prompt),t(a.attachments),n(a.files),s(null))},[a,t,s,n,e])};var U=n(89313),H=n(53949),B=n(35898),K=n(41270),V=n(76220),Y=n(23098);let q=e=>{var t,n;let{model:a,projectUuid:s}=e,{allModelOptions:l}=(0,V.uL)(),i=(0,Y.nR)(s),r=(0,Y.PE)(s),d=null!==(n=null===(t=l.find(e=>e.model===a))||void 0===t?void 0:t.slow_kb_warning_threshold)&&void 0!==n?n:155e3,c=!r&&(null!=i?i:0)>d?(0,o.jsx)("div",{className:"max-md:hidden",children:(0,o.jsx)(I.Z,{defaultMessage:"Large knowledge may slow responses",id:"d6mr4c6d+8"})}):void 0;return(0,o.jsx)("div",{className:"text-text-400 text-xs ml-2",children:null!=c?c:void 0})};var W=n(6766),Q=n(48410),X=n(70354),J=n(45033),$=n(32737),ee=n(1133),et=n(98649),en=n(85689),ea=n(96346),es=n(37141),el=n(81695),ei=n(1445),er=n(69672),eo=n(85465),ed=n(52165),ec=n(22235);function eu(){let e=(0,r._)(["\n  uppercase\n  mt-0.3\n  bg-accent-pro-100/10\n  text-accent-pro-000\n  rounded-full\n  px-2\n  ml-2\n  -mr-1\n  border-0.5\n  border-accent-pro-100/10\n  leading-4\n  h-4\n  text-[0.6rem]\n  font-medium\n  flex-shrink-0\n"]);return eu=function(){return e},e}function em(){let e=(0,r._)(["\n  border-0.5\n  border-border-300\n  -mr-1\n  ml-2\n  translate-y-px\n  rounded-full\n  px-2\n  py-px\n  text-xs\n  text-text-500\n  tracking-tight\n  group-hover:bg-bg-100\n"]);return em=function(){return e},e}let ef=d.q.div(eu()),ex=d.q.div(em()),ep=(0,o.jsx)(I.Z,{defaultMessage:"Upgrade to Claude Pro to use our best and latest models",id:"GFsmqWxmnh"}),eh={model:"missing-model",name:"Legacy Model",description:"",inactive:!0},eg=e=>{var t,n;let{model:a,currentModelOption:s,opensInNewChat:l,onSelect:i,hasMultiModalContent:r,tag:d,tooltip:u}=e,m=(0,h.useMemo)(()=>({"haiku-3-5-description":(0,o.jsx)(I.Z,{defaultMessage:"Fastest model for daily tasks",id:"75wJbzj8Tm",description:"A description of the AI model"}),"sonnet-3-7-description":(0,o.jsx)(I.Z,{defaultMessage:"Our most intelligent model yet",id:"WW0Apyq96E",description:"A description of the AI model"}),"telescope-cinnamon-lampshade":(0,o.jsx)(c.lb,{id:"telescope_cinnamon_lampshade"}),"origami-glacier-marmalade":(0,o.jsx)(c.lb,{id:"origami_glacier_marmalade"})}),[]),x=a.model===(null==s?void 0:s.model),p=(0,ec.g)(a.name,a.model,r);return(0,o.jsx)($.u,{tooltipContent:u,side:"right",children:(0,o.jsxs)(J.hP,{onClick:()=>{x||i(a)},className:(0,f.Z)("group pr-1 py-1.5"),children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"flex-1 text-sm",children:(0,o.jsx)("div",{className:"flex items-center gap-1.5",children:(0,o.jsx)("div",{children:p})})}),d&&!x&&(0,o.jsx)(ef,{children:d}),!x&&l&&!d&&(0,o.jsx)(ex,{children:(0,o.jsx)(I.Z,{defaultMessage:"New chat",id:"ATDyLPIoxz"})})]}),(0,o.jsx)("div",{className:"text-text-500 pr-4 text-xs",children:null!==(n=m[null!==(t=a.description_i18n_key)&&void 0!==t?t:""])&&void 0!==n?n:a.description})]}),x&&(0,o.jsx)(en.J,{className:"text-accent-secondary-100 mb-1 mr-1.5",size:16,weight:"bold"})]})})},ev=e=>{let{models:t,currentModelOption:n,opensInNewChat:a,redirectToUpgradePro:s,handleModelSelect:l,hasMultiModalContent:i,upsellMode:r}=e,d=(0,h.useMemo)(()=>({"velvet-bicycle-thunderstorm":(0,o.jsx)(c.lb,{id:"velvet_bicycle_thunderstorm"})}),[]),u=e=>{var t,a;return r&&e.model!==(null==n?void 0:n.model)?ep:null!==(a=d[null!==(t=e.notice_text_i18n_key)&&void 0!==t?t:""])&&void 0!==a?a:e.notice_text};return(0,o.jsx)(o.Fragment,{children:t.map(e=>(0,o.jsx)(eg,{model:e,currentModelOption:n,opensInNewChat:a,onSelect:r?s:l,hasMultiModalContent:i,tag:r&&e.model!==(null==n?void 0:n.model)?"PRO":void 0,tooltip:u(e)},e.model))})},ey=e=>{let{selectedModel:t,conversationUUID:n,onSelect:a,placement:s,hasMultiModalContent:l,open:i,onOpenChange:r,isNewConversation:d,hideModelNameLogo:c}=e,m=!d,x=(0,el.useRouter)(),{allModelOptions:g,mainModels:v,overflowModels:y}=(0,V.uL)(),j=(0,P.wN)(n||null),b=null!=t?t:j,w=(0,h.useRef)(null),M=(0,eo.gE)("paprika_mode"),k=(0,er.a)(),C=(0,ei.wH)(),{toggleConversationSetting:N}=(0,eo.M0)(),_=g.find(e=>e.model===b);_||(_=eh);let{value:S}=(0,u.FL)("model_selector_enabled"),E=(0,L.rW)(),{selectedTier:Z,shouldOverrideFeatureAccess:A,isTierSelectorEnabled:T}=(0,Q.i)(),z=T&&A&&!!Z,D=z?Z===et.kQ.FREE:!S&&!E,{setStickyModelPreference:R}=(0,W.M)(),[O,F]=(0,h.useState)(!1),G=()=>{x.push("/upgrade/pro")},U=e=>{(S||z&&"free"!==Z)&&(M&&!k(e.model)&&N("paprika_mode",null),C(e.model)||N("compass_mode",null),R(e.model),a(e))};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(J.Lt,{className:(0,f.Z)("!min-w-[17rem] relative"),..."bottom"===s?{side:"top",sideOffset:4}:{side:"bottom",sideOffset:4},align:"end",unstyledTrigger:!0,onCloseAutoFocus:e=>e.preventDefault(),open:i,onOpenChange:e=>{r&&r(e),e||F(!1)},trigger:(0,o.jsx)(p.E.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:700,damping:32,mass:.7},className:"overflow-hidden shrink-0 p-1 -m-1",children:(0,o.jsxs)(X.z,{ref:w,variant:"unstyled",size:"unset","data-testid":"model-selector-dropdown",className:(0,f.Z)("h-7 border-0.5 text-text-100 ml-1.5 inline-flex items-start gap-[0.175em] rounded-md border-transparent text-sm opacity-80 transition hover:opacity-100 disabled:!opacity-80 sm:ml-0 sm:pb-1 sm:pl-1.5 sm:pr-1 sm:pt-1 hover:bg-bg-100 hover:border-border-400"),children:[(0,o.jsx)(ed.u,{model:_,hasMultiModalContent:l,hideModelNameLogo:c}),(0,o.jsx)(ea.p,{size:12,className:"text-text-500 shrink-0"})]})}),children:[(0,o.jsx)(ev,{models:v,currentModelOption:_,opensInNewChat:m,redirectToUpgradePro:G,handleModelSelect:U,hasMultiModalContent:l,upsellMode:D}),y.length>0&&((0,ee.tq)()?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(J.u2,{}),(0,o.jsx)("div",{className:"text-xs text-text-500 pt-2 pb-1 px-2",children:(0,o.jsx)(I.Z,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,o.jsx)(ev,{models:y,currentModelOption:_,opensInNewChat:m,redirectToUpgradePro:G,handleModelSelect:U,hasMultiModalContent:l,upsellMode:D})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(J.u2,{}),(0,o.jsxs)(J.Vy,{children:[(0,o.jsxs)(J.WR,{className:"pl-2 py-1.5 gap-2",children:[(0,o.jsx)("div",{className:"group-hover:text-text-100  text-sm",children:(0,o.jsx)(I.Z,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,o.jsx)(es.T,{className:"text-text-500 group-hover:text-text-300 mr-1",size:16})]}),(0,o.jsx)(J.nI,{children:(0,o.jsx)(J.A2,{sideOffset:4,children:(0,o.jsx)(ev,{models:y,currentModelOption:_,opensInNewChat:m,redirectToUpgradePro:G,handleModelSelect:U,hasMultiModalContent:l,upsellMode:D})})})]})]}))]})})};var ej=n(45783),eb=n(36667),ew=n(87801);n(89368);var eM=n(95440),ek=n(92935),eC=n(11776);let eN=e=>{let{hideIndicatorText:t,hideIndicators:n}=e,a=(0,g.Z)();return n?null:(0,o.jsx)(ew.S,{children:(0,o.jsxs)("div",{className:"flex flex-row items-center gap-2 min-w-0",children:[(0,o.jsx)(e_,{}),"",(0,o.jsx)(eS,{itemKey:et.Mm.COMPASS,tooltip:a.formatMessage({defaultMessage:"Research mode",id:"lYf0AUt2RH"})}),(0,o.jsx)(eE,{hideIndicatorText:t}),(0,o.jsx)(eZ,{hideIndicatorText:t})]})})},e_=()=>{let e=(0,g.Z)(),{menuView:{rootItems:t}}=(0,ek.Aj)(),n=t.find(e=>e.key===et.Mm.EXTENDED_THINKING),a=(0,u.EH)("thinking_sticky_default_on","hide_thinking_chat_indicator",!1,u.gw);return!n||a?null:(0,o.jsx)(eI,{hideIndicatorText:!0,menuItem:n,icon:n.icon,tooltip:e.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"})})},eS=e=>{let{itemKey:t,tooltip:n}=e,{menuView:{rootItems:a}}=(0,ek.jT)(),{menuView:{rootItems:s}}=(0,ek.Aj)(),l=[...a,...s].find(e=>e.key===t);return l?(0,o.jsx)(eI,{hideIndicatorText:!0,menuItem:l,icon:l.icon,tooltip:n}):null},eE=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:n}}=(0,ek.Aj)(),a=(0,eC.jQ)(),s=n.find(e=>"styles"===e.key);return s&&"optionGroup"===s.type?(0,o.jsx)(eI,{hideIndicatorText:t,menuItem:s,icon:(0,o.jsx)(eb.z0,{size:16}),text:s.secondaryText,buttonClassName:"!shrink",handleClick:()=>a("Default")}):null},eZ=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:n}}=(0,ek.jT)(),a=(0,eC.bV)(),s=n.find(e=>e.key===et.Mm.PROJECTS);return s&&"optionGroup"===s.type?(0,o.jsx)(eI,{hideIndicatorText:t,menuItem:s,icon:(0,o.jsx)(eb.pj,{size:16}),text:s.secondaryText,buttonClassName:"!shrink-[2]",handleClick:()=>a(void 0)}):null},eI=e=>{let{menuItem:t,handleClick:n,...a}=e,{handleClickItem:s}=(0,ek.jT)();if(!t||t.isDisabled||"pro"===t.tag||"new chat"===t.tag||!t.indicatorActive)return null;let{indicatorActive:l}=t,i=!!t.menuItemHidden;return(0,o.jsx)(eM.M,{onClick:null!=n?n:()=>s(t),indicatorActive:l,disabled:i,showRemoveIcon:!0,...a})};var eA=n(45399),eT=n(28386);n(20456);var ez=n(91984),eD=n(51375);n(28803);let eR={FROM_ANCHOR:8,POINTER_OFFSET:18,POINTER_HEIGHT:16},eO=e=>{let{anchorRef:t,children:n,side:a,align:s="center",accentColor:l="default",onClose:i,className:r,introDelay:d=0,spacing:c={},buttonText:u,onClickButton:m}=e,x={...eR,...c},g=(0,h.useRef)(null),[v,y]=(0,h.useState)(a),[j,b]=(0,h.useState)(s);(0,h.useEffect)(()=>{if(!g.current||!t.current)return;let e=()=>{let{current:e}=g,{current:n}=t;if(!e||!n)return;let a=n.getBoundingClientRect(),s=e.getBoundingClientRect(),l=window.innerWidth,i=window.innerHeight,r=v,o=j,d=0,c=0,u=()=>{d="top"===r?a.top-s.height-x.FROM_ANCHOR:"bottom"===r?a.bottom+x.FROM_ANCHOR:a.top-x.POINTER_OFFSET+.5*a.height-.5*x.POINTER_HEIGHT},m=()=>{if("left"===r)c=a.left-s.width-x.FROM_ANCHOR;else if("right"===r)c=a.right+x.FROM_ANCHOR;else switch(o){case"start":c=a.left-x.FROM_ANCHOR;break;case"center":c=a.left+(a.width-s.width)/2;break;case"end":c=a.right-s.width+x.FROM_ANCHOR}};u(),m(),c<0?"top"===r||"bottom"===r?o="start":r="bottom":c+s.width>l&&("top"===r||"bottom"===r?o="end":r="bottom"),d<0?r="bottom":d+s.height>i&&(r="top"),u(),m(),e.style.top="".concat(d,"px"),e.style.left="".concat(c,"px"),r!==v&&y(r),o!==j&&b(o)};e();let n=new ResizeObserver(e);t.current&&(n.observe(t.current),t.current.parentElement&&n.observe(t.current.parentElement));let a=e=>{if(i){var t;(null===(t=g.current)||void 0===t?void 0:t.contains(e.target))||i()}};return window.addEventListener("resize",e),window.addEventListener("scroll",e),document.addEventListener("click",a,{capture:!0}),()=>{n.disconnect(),window.removeEventListener("resize",e),window.removeEventListener("scroll",e),document.removeEventListener("click",a,{capture:!0})}},[v,j,t,i,x.FROM_ANCHOR,x.POINTER_HEIGHT,x.POINTER_OFFSET]);let w={};switch(v){case"right":w={translateX:-x.FROM_ANCHOR,opacity:0};break;case"left":w={translateX:x.FROM_ANCHOR,opacity:0};break;case"bottom":w={translateY:-x.FROM_ANCHOR,opacity:0};break;case"top":w={translateY:x.FROM_ANCHOR,opacity:0}}return(0,o.jsxs)(p.E.div,{ref:g,initial:w,animate:{translateY:0,translateX:0,opacity:1,transition:{delay:d,type:"spring",stiffness:200,damping:20,mass:1.5,opacity:{ease:"easeOut",duration:.15}}},exit:{scale:.985,opacity:0,filter:"blur(24px)",transition:{ease:"easeIn",duration:.3,opacity:{duration:.2}}},className:(0,f.Z)("font-styrene text-sm fixed z-tooltip rounded-xl p-4 border-0.5 shadow-sm max-w-[16.6rem]","default"===l&&"bg-bg-200 border-border-300","secondary"===l&&"text-accent-secondary-000 bg-accent-secondary-900 border-accent-secondary-100/50",r),role:"dialog",style:{willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[(0,o.jsx)(eL,{side:v,align:j,accentColor:l,spacing:x}),(0,o.jsxs)("div",{className:"flex flex-col gap-4",children:[n,!!u&&!!m&&(0,o.jsx)(X.z,{variant:"outline",className:(0,f.Z)("!gap-0 !text-sm !rounded-lg  !px-3 !min-w-0 !w-fit","secondary"===l&&"!text-accent-secondary-000 !border-accent-secondary-100/30 hover:!bg-accent-secondary-100 hover:!text-oncolor-100"),onClick:()=>{m(),null==i||i()},size:"sm",children:(0,o.jsx)("p",{className:"inline",children:u})})]})]})},eL=e=>{let{accentColor:t,side:n,align:a,spacing:s=eR}=e,l="fill-bg-200",i="fill-border-300";"secondary"===t&&(l="fill-accent-secondary-900",i="fill-accent-secondary-100/50");let r={};switch(n){case"top":r={top:"100%",left:"50%",marginTop:"-5px",transform:"rotate(-90deg) translateY(-25%)"};break;case"bottom":r={bottom:"100%",left:"50%",marginBottom:"-5px",transform:"rotate(90deg) translateY(25%)"};break;case"right":r={top:s.POINTER_OFFSET};break;case"left":r={top:s.POINTER_OFFSET,left:"100%",transform:"rotate(180deg)"}}if("top"===n||"bottom"===n)switch(a){case"start":r.left=s.POINTER_OFFSET;break;case"end":r.left="auto",r.right=s.POINTER_OFFSET}return(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:s.POINTER_HEIGHT,viewBox:"0 0 6 16",className:(0,f.Z)("absolute origin-center pointer-events-none","right"===n&&"right-full"),style:r,children:[(0,o.jsx)("path",{className:l,d:"M6 0h-.5v1.55c0 .55-.27 1.06-.71 1.55-.53.6-1.16 1.05-1.79 1.51-.57.42-1.15.85-1.65 1.37C.87 6.48.5 7.06.5 7.74c0 .68.37 1.26.85 1.77.5.52 1.08.94 1.65 1.36.63.47 1.26.93 1.79 1.51.44.5.71 1 .71 1.56V16H6V0Z"}),(0,o.jsx)("path",{className:i,fillRule:"evenodd",clipRule:"evenodd",d:"M6 0v1.55c0 .74-.36 1.36-.85 1.9-1.01 1.13-2.4 1.8-3.44 2.89-.45.47-.71.92-.71 1.4 0 .48.26.93.7 1.4 1.05 1.1 2.44 1.76 3.45 2.89.5.54.85 1.17.85 1.9V16h-.5v-2.06c0-.56-.27-1.06-.71-1.56-1.01-1.12-2.4-1.79-3.44-2.87C.87 9 .5 8.42.5 7.74c0-.68.37-1.26.85-1.76C2.4 4.89 3.78 4.22 4.8 3.1c.44-.5.71-1 .71-1.55V0H6Z"})]})};var eF=n(13473),eP=n(21878),eG=n(1399);let eU=e=>{let{anchorRef:t,canShowNux:n,text:a,id:s,nuxItem:l,side:i}=e,{shouldShow:r,dismiss:d}=function(e,t){let{dateAdded:n,priority:a,showAfterOthersDismiss:s}=t,l=(0,h.useContext)(eG.s),{dismiss:i,isDismissed:r}=(0,eP.K)();if(!l)throw Error("useNux must be used within a NuxProvider");let{registerNux:o,unregisterNux:d,currentlyShowing:c}=l;return(0,h.useEffect)(()=>{if(!r(e))return o(e,{dateAdded:n,priority:a,showAfterOthersDismiss:s}),()=>d(e)},[e,n,a,s,r,o,d]),{shouldShow:c===e&&!r(e),dismiss:()=>{i(e),d(e)}}}(s,l);return r&&n?(0,o.jsx)(eO,{side:i,anchorRef:t,onClose:d,accentColor:"secondary",introDelay:.5,children:(0,o.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,o.jsx)(eF.v,{size:16,className:"text-accent-secondary-200"}),(0,o.jsx)("p",{className:"-my-[2px]",children:a})]})}):null};(a=l||(l={}))[a.HIGH=30]="HIGH",a[a.MEDIUM=20]="MEDIUM",a[a.LOW=10]="LOW",a[a.NONE=0]="NONE",n(16173);var eH=n(11510);let eB=e=>{let{path:t}=e,n={drive:(0,g.Z)().formatMessage({defaultMessage:"Paste a Drive link in the chat to upload it",id:"ZJxjEilF0C"})},a=t&&t in n?n[t]:null;return a?(0,o.jsxs)("div",{className:"h-8 w-full bg-bg-100 border-t-0.5 border-border-300 opacity-80 text-text-500 flex flex-row items-center gap-2.5 px-3 text-[0.8125rem]",children:[(0,o.jsx)(eH.k,{size:14}),a]}):null};var eK=n(57860),eV=n(89803),eY=n(89755),eq=n(60105),eW=n(64690);let eQ=e=>{let{tooltip:t,text:n,tag:a,showCaretIcon:s,indicatorActive:l=!1,hideIndicatorText:i,canShowDot:r,onDoubleClick:d,menuType:c,menuView:u,inputMenuIsOpen:m,setInputMenuIsOpen:f}=e,x=(0,g.Z)(),v=(0,h.useRef)(null),{rootItems:y}=u,j={indicatorActive:l,text:n||"",tooltip:t},b=(0,eW.jo)(),w="tools"===c&&b;if(w){j.tooltip=x.formatMessage({defaultMessage:"Style",id:"7mL9QEUFav"});let e=y.find(e=>"option"===e.type&&e.isChecked);e&&"Default"!==e.key&&(j.indicatorActive=!0,j.text=e.label)}let M=y.filter(e=>{let{indicatorActive:t}=e;return t}).length,k=(0,o.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:["plus"===c?(0,o.jsx)(p.E.div,{animate:{rotate:m?45:0},transition:{type:"spring",stiffness:650,damping:32,duration:.1},children:(0,o.jsx)(eY.v,{size:16})}):"research"===c?(0,o.jsx)(eb.A9,{size:16}):w?(0,o.jsx)(eb.z0,{size:16}):(0,o.jsx)(eq.j,{size:16}),(0,o.jsx)(eX,{isShown:r&&M>0})]}),C="plus"===c?x.formatMessage({defaultMessage:"attachments",id:"whkEDsy4V6",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):"research"===c?x.formatMessage({defaultMessage:"research",id:"PUcnDUZD0/",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):w?x.formatMessage({defaultMessage:"styles",id:"G91kUvt+GD",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):x.formatMessage({defaultMessage:"tools",id:"yd3KUET1r+",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"});return(0,o.jsx)("div",{className:"flex items-center",children:(0,o.jsx)(eM.M,{tag:a,showCaretIcon:s,hideIndicatorText:!!i,icon:k,id:"input-".concat(c,"-menu-trigger"),ref:v,onClick:()=>{f(!m)},onKeyDown:e=>{m||"Space"!==e.code&&"ArrowDown"!==e.code||f(!0)},onDoubleClick:d?e=>{e.preventDefault(),null==d||d()}:void 0,"aria-expanded":m,"aria-haspopup":"listbox","aria-controls":"input-menu","data-testid":"input-menu-".concat(c),"aria-label":x.formatMessage({defaultMessage:"Open {menuType} menu",id:"Larie1pvYJ"},{menuType:C}),...j})})},eX=e=>{let{isShown:t}=e;return!!t&&(0,o.jsx)(p.E.div,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},children:(0,o.jsx)("div",{className:"h-1.5 w-1.5 bg-accent-secondary-200 rounded-full mr-0.5"})})};var eJ=n(81342);let e$={forward:{initial:{x:"20%",opacity:0},animate:{x:0,opacity:1}},back:{initial:{x:"-20%",opacity:0},animate:{x:0,opacity:1}},none:{initial:{x:0},animate:{x:0}}},e0=e=>{let{placement:t,canShowDot:n}=e,a=(0,h.useRef)(null),s=(0,g.Z)(),i=(0,ek.Aj)(),r=(0,eD.tF)(),d=(0,eD.Pl)();return(0,o.jsxs)("div",{ref:a,children:[(0,o.jsx)(e5,{canShowDot:n,placement:t,menuType:"tools",...i,tooltip:s.formatMessage({defaultMessage:"Search and tools",id:"lhFEU+uT6i"})}),(0,o.jsx)(eU,{canShowNux:d,anchorRef:a,side:"bottom",text:s.formatMessage({defaultMessage:"Add your everyday tools and apps to get the best out of Claude",id:"olaMSdwPL6"}),id:"research-rmcp-tools-nux-1",nuxItem:{dateAdded:"2025-05-14",priority:l.HIGH,showAfterOthersDismiss:!0}}),(0,o.jsx)(eU,{canShowNux:r,anchorRef:a,side:"bottom",text:s.formatMessage({defaultMessage:"MCP is here now! Access integrations in this menu.",id:"NkJar0wFk+"}),id:"mcp-tools-nux-1",nuxItem:{dateAdded:"2025-04-29",priority:l.HIGH,showAfterOthersDismiss:!0}})]})},e1=e=>{let{placement:t,canShowDot:n}=e,a=(0,ek.jT)();return(0,o.jsx)(e5,{placement:t,menuType:"plus",canShowDot:n,...a})},e2=e=>{let t,{hideIndicatorText:n}=e,a=(0,g.Z)(),{conversation:s,model:l,setModel:i}=(0,C.r)(),r=(0,eo.gE)("compass_mode"),{toggleConversationSetting:d}=(0,eo.M0)(),c=(0,ei.iH)(),u=(0,ei.zA)(),m=(0,ei.hU)(s),f=(0,P.wN)((null==s?void 0:s.id)||null),x=(0,ei.wH)()(null!=l?l:f),p=(0,ei.wH)()(f),h=!s&&!x&&p;if(!c)return null;u?m?x||h||(t=a.formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"})):t=a.formatMessage({defaultMessage:"Enable a search integration to use research",id:"WyiVeak7w5"}):t=a.formatMessage({defaultMessage:"Your administrator must enable a search tool to use research",id:"CzjOV5rgPZ"});let v=!!t;return(0,o.jsx)(eM.M,{disabled:v,tooltip:t,hideIndicatorText:!!n,icon:(0,o.jsx)(eb.A9,{size:18,className:"-m-[1px]"}),onClick:()=>{v||(h&&i(f),d("compass_mode","advanced"===r?null:"advanced"))},indicatorActive:!v&&"advanced"===r,text:a.formatMessage({defaultMessage:"Research",id:"JEe7dVso7F"}),className:"!shrink-0",tag:"beta"})},e5=e=>{let{text:t,tag:n,showCaretIcon:a,indicatorActive:s,canShowDot:l,hideIndicatorText:i,tooltip:r,placement:d,menuType:c,path:u,menuView:m,highlightedItemKey:g,setHighlightedItemKey:v,handleClickItem:y,inputMenuIsOpen:j,setInputMenuIsOpen:b,inputMenuSearchQuery:w,setInputMenuSearchQuery:M,handleBack:k,animationDirection:C}=e,{currentItems:N}=m,_=(0,ez.O)(()=>{b(!1)},["mouseup","touchend"]),S=(0,h.useRef)(null),E=(0,h.useRef)(null),[Z,I]=(0,h.useState)(void 0),[A,T]=(0,h.useState)("bottom"===d?"top":"bottom"),[z,D]=(0,h.useState)(0);(0,h.useEffect)(()=>{if(!S.current||!E.current)return;let e=S.current.getBoundingClientRect(),{updatedHeightAvailable:t,updatedDropdownSide:n}=e3({placement:d,triggerRectTop:e.top,triggerRectBottom:e.bottom});I(Math.min(454,t)),T(n);let a=E.current.getBoundingClientRect();D(Math.min(0,window.innerWidth-a.right-8))},[d,j]);let R=(0,eW.nF)(),O=("plus"===c||"tools"===c)&&R?(0,o.jsx)(eV.a,{path:u,inputMenuSearchQuery:w,setInputMenuSearchQuery:M,handleBack:k}):null;return(0,o.jsxs)("div",{className:"relative shrink-0",onClick:e=>{e.preventDefault()},ref:_,children:[(0,o.jsx)("div",{ref:S,children:(0,o.jsx)(eQ,{tag:n,tooltip:r,text:t,showCaretIcon:a,indicatorActive:s,hideIndicatorText:i,canShowDot:l,menuType:c,menuView:m,inputMenuIsOpen:j,setInputMenuIsOpen:b,onDoubleClick:"plus"===c?()=>(0,eC.CG)(d):void 0})}),(0,o.jsx)("div",{ref:E,className:(0,f.Z)("w-[20rem] absolute max-w-[calc(100vw-16px)]","top"===A?"bottom-10":"top-10",j?"block":"hidden"),children:(0,o.jsx)(x.M,{children:j&&(0,o.jsx)(p.E.div,{initial:{opacity:0,scale:.95,y:"top"===A?8:-8,x:-8},animate:{opacity:1,scale:1,y:0,x:0},exit:{opacity:0,scale:.95,y:"top"===A?8:-8,x:-8},transition:{type:"spring",stiffness:650,damping:23,mass:.6,height:{ease:"easeInOut"}},className:(0,f.Z)("relative w-full will-change-transform h-auto overflow-y-auto overscroll-auto flex z-dropdown bg-bg-000 rounded-lg overflow-hidden border-border-300 border-0.5 shadow-diffused shadow-[hsl(var(--always-black)/6%)]","top"===A?"flex-col-reverse":"flex-col"),onMouseEnter:()=>v(null),style:{maxHeight:Z?"".concat(Z,"px"):void 0,left:z},onClick:e=>{e.stopPropagation(),(0,eJ.q)()},children:(0,o.jsxs)(eA.H,{duration:100,className:(0,f.Z)("flex flex-col min-h-0 w-full !ease-out","top"===A?"justify-end":"justify-start"),children:[(0,o.jsxs)("div",{className:"p-1.5 flex flex-col",children:["bottom"===A&&O,(0,o.jsx)(p.E.div,{variants:e$[C],initial:"initial",animate:"animate",className:"flex flex-col",transition:{x:{duration:.15,ease:eT.J.outCirc},opacity:{duration:.25,ease:"easeInOut"}},children:N.filter(e=>{let{menuItemHidden:t}=e;return!t}).map(e=>(0,o.jsx)(eK.P,{item:e,onClick:()=>y(e),isHighlighted:g===e.key},e.key))},null!=u?u:"root"),"top"===A&&O]}),(0,o.jsx)(eB,{path:u})]})})})})]})},e3=e=>{let{placement:t,triggerRectTop:n,triggerRectBottom:a}=e,s=window.innerHeight-a-8-8;if("bottom"===t){let e=n-76-8;return e<160&&s>e?{updatedDropdownSide:"bottom",updatedHeightAvailable:s}:{updatedDropdownSide:"top",updatedHeightAvailable:e}}{let e=n-8-8;return s<160&&e>s?{updatedDropdownSide:"top",updatedHeightAvailable:e}:{updatedDropdownSide:"bottom",updatedHeightAvailable:s}}},e7=K.z.object({enabled:K.z.boolean(),system_prompt:K.z.string().optional()}),e6=e=>{let{placement:t,isDisabled:n}=e,a=(0,g.Z)();(0,u.xQ)("prompt_improver_config",{enabled:!1},e7);let{projectUuid:s,prompt:l,model:i,setModel:r,attachments:d,files:c,syncSourceUuids:m,sendMessage:f,stopSampling:x,conversation:p,isSending:v,isChatSyncing:y,isProjectSyncing:j,isModelSelectorOpen:b,setIsModelSelectorOpen:w,isNewConversation:M,currentCompassTask:k,improvePrompt:N,isImprovingPrompt:_}=(0,C.r)(),S=y||j?a.formatMessage({defaultMessage:"Syncing knowledge...",id:"QuwefnZNVj"}):void 0,E=(0,h.useMemo)(()=>{var e;return[...c,...null!==(e=null==p?void 0:p.files)&&void 0!==e?e:[]].some(e=>e.file_kind===H.Y.Image||e.file_kind===H.Y.SanitizedDocument)},[c,p]),Z=(0,h.useCallback)(e=>r(e.model),[r]),[I,A]=(0,B.y)({box:"border-box"}),T=A.width||null,z=null===T||T<480,D=null===T||T<396,R=null!==T&&T<440&&!D;return(0,o.jsxs)("div",{className:"flex gap-2.5 w-full items-center",ref:I,children:[(0,o.jsxs)("div",{className:"relative flex-1 flex items-center gap-2 shrink min-w-0",children:[(0,o.jsx)(e1,{placement:t,canShowDot:null!==T&&D}),(0,o.jsx)(e0,{placement:t,canShowDot:null!==T&&D}),"",(0,o.jsx)(e2,{hideIndicatorText:z}),"",null!==T&&(0,o.jsx)(eN,{hideIndicatorText:z,hideIndicators:D}),(0,o.jsx)(q,{model:i,projectUuid:s})]}),(0,o.jsx)(ey,{selectedModel:i,onSelect:Z,hasMultiModalContent:E,placement:t,open:b,onOpenChange:w,isNewConversation:M,hideModelNameLogo:R}),(0,o.jsx)(ej.h,{isSending:v,isDisabled:n,disabledReason:S,prompt:l,files:c,attachments:d,syncSourceUuids:m,conversation:p,currentCompassTask:k,onSend:()=>f(),onStop:()=>x()})]})};var e4=n(35354),e8=n(75502);let e9=()=>{let{onDrop:e}=(0,C.r)();return(0,o.jsx)(e4.rE,{onDrop:e,children:(0,o.jsx)(te,{})})},te=()=>{let{dragState:e}=(0,e4.EO)(),t=e===e4.h7.DRAGGING_ON_TARGET;return e===e4.h7.DRAGGING_OFF_TARGET||e===e4.h7.DRAGGING_ON_TARGET?(0,o.jsx)("div",{className:"absolute top-0 border border-dashed rounded-2xl min-h-4 h-full w-full border-accent-secondary-100 bg-bg-000 overflow-hidden z-10",children:(0,o.jsx)("div",{className:(0,f.Z)("flex items-center justify-center h-full w-full transition-colors",t?"bg-accent-secondary-900":"bg-accent-secondary-900/50"),children:(0,o.jsxs)("p",{className:"text-accent-secondary-100 flex flex-row items-center gap-2.5",children:[(0,o.jsx)(e8.E,{size:20,className:"opacity-50"}),(0,o.jsx)(I.Z,{defaultMessage:"Drop files here to add to chat",id:"IYBR/J+nuA"})]})})}):null};var tt=n(40051),tn=n(5984),ta=n(52939),ts=n(30976),tl=n.n(ts),ti=n(34236),tr=n(38622);function to(e){var t,n;let{isOpen:a,onClose:s,client:l,prompt:i}=e,r=(0,g.Z)(),d=(0,h.useCallback)(()=>{m({}),s()},[s]),c=(0,tr.Vr)(d),[u,m]=(0,h.useState)({}),f=null==i?void 0:null===(t=i.arguments)||void 0===t?void 0:t.some(e=>e.required&&!u[e.name]);return i&&l?(0,o.jsxs)(ta.u_,{title:r.formatMessage({defaultMessage:"Enter prompt inputs",id:"zDs90mJ5UJ"}),subtitle:(0,o.jsxs)("div",{className:"flex flex-col gap-1 mt-1",children:[i.name,(0,o.jsx)(ti.D,{text:i.description})]}),isOpen:a,onClose:d,modalSize:"lg",children:[(0,o.jsx)("div",{className:"flex flex-col gap-4 max-h-[500px] mb-4 overflow-y-auto",children:null===(n=i.arguments)||void 0===n?void 0:n.map(e=>(0,o.jsx)("div",{className:"flex flex-col gap-1",children:(0,o.jsx)(tn.oi,{required:e.required,label:"".concat(tl()(e.name.toLowerCase())).concat(e.required?"*":""),placeholder:e.description,value:u[e.name]||"",onValueChange:t=>m(n=>({...n,[e.name]:null!=t?t:""})),onBlur:()=>{m(t=>{var n;return{...t,[e.name]:(null!==(n=t[e.name])&&void 0!==n?n:"").trim()}})},error:e.required&&""===u[e.name]},e.name)},e.name))}),(0,o.jsxs)(ta.dm,{children:[(0,o.jsx)(X.z,{disabled:f,onClick:()=>void c(l,i,u),children:(0,o.jsx)(I.Z,{defaultMessage:"Add prompt",id:"8UhdEv01LN"})}),(0,o.jsx)(X.z,{variant:"secondary",onClick:d,children:(0,o.jsx)(I.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]}):null}var td=n(80151),tc=n(95899),tu=n(92676),tm=n(19132),tf=n(6688),tx=n(63731);let tp=e=>{let{moveAttachments:t=!1,handleProjectCreated:n,isOpen:a,handleClose:s,syncSources:l=[],attachments:i=[],setSyncSourceUuids:r,setAttachments:d}=e,[c,u]=(0,h.useState)(null),{addError:m}=(0,E.e)(),f=(0,tf.G)();return th({project:c,syncSources:l,attachments:i,setSyncSourceUuids:r,setAttachments:d}),(0,o.jsxs)(ta.u_,{isOpen:a,onClose:s,modalSize:"xl",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start",children:[(0,o.jsx)("h1",{className:"font-copernicus text-text-200 mb-4 text-2xl font-medium tracking-tight",children:t?(0,o.jsx)(I.Z,{defaultMessage:"Create a project with attachments",id:"wSxz4Q9mjA"}):(0,o.jsx)(I.Z,{defaultMessage:"Create a project",id:"HR5A+UPiIu"})}),(0,o.jsx)(X.z,{onClick:s,size:"icon",variant:"ghost",children:(0,o.jsx)(td.X,{size:16})})]}),a&&(0,o.jsx)(tx.hK,{syncSources:t?l:void 0,onProjectCreated:e=>{t&&u(e),n(e)},onError:m,onCancel:s,strings:f})]})},th=e=>{let{project:t,syncSources:n,attachments:a,setSyncSourceUuids:s,setAttachments:l}=e,i=(0,h.useRef)(!1),{addSuccess:r}=(0,E.e)(),o=(0,g.Z)(),{mutate:d}=(0,tc.u3)(null==t?void 0:t.uuid),{mutate:c}=(0,tu.gr)(null==t?void 0:t.uuid),u=(0,h.useCallback)(()=>{t&&(a.length||n.length&&t.is_private)&&(a.forEach(e=>{let{file_name:t,extracted_content:n}=e;d({file_name:t,content:n})}),t.is_private&&(n.forEach(e=>{let t=(0,tm.hJ)(e);t&&c(t)}),s([])),l([]),r(o.formatMessage({defaultMessage:"Attachments successfully added to {projectName}",id:"xw8MJ6Kd/h"},{projectName:t.name||"your project"})))},[t,r,a,d,l,c,s,n,o]);(0,h.useEffect)(()=>{t&&!i.current&&(i.current=!0,u())},[t,u])};var tg=n(3053),tv=n(42147),ty=n(47666),tj=n(80022),tb=n(42814),tw=n(5161),tM=n(73107),tk=n(42755),tC=n(34505),tN=n(32598),t_=n(30729),tS=n(64070),tE=n(30947);let tZ=()=>{let{addError:e}=(0,E.e)();return{handleRateLimitError:(t,n)=>{t instanceof tE.Hx&&429===t.statusCode?e("You’ve reached the limit for Claude messages at this time. Please wait before trying again."):e(n)}}},tI=(0,tS.default)(()=>n.e(8446).then(n.bind(n,38446)).then(e=>({default:e.WritingAnimation})),{loadableGenerated:{webpack:()=>[38446]},ssr:!1}),tA={default:{type:"spring",stiffness:650,damping:60},opacity:{type:"tween",ease:"easeOut",duration:.35}},tT=(0,h.forwardRef)((e,t)=>{let{setScreen:n,onStyleChange:a,animateBoolRef:s}=e,l=(0,g.Z)(),i=(0,tg.z$)(),[r,d]=(0,h.useState)(!1),[c,u]=(0,h.useState)(""),{handleRateLimitError:m}=tZ(),{mutateAsync:f}=(0,tb.GB)(),v=(0,h.useRef)(null),y=(0,h.useRef)(null);(0,h.useEffect)(()=>{r&&setTimeout(()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.focus()},50)},[r]);let[j,b]=(0,h.useState)(!1),[w,M]=(0,h.useState)(!1),k=(0,h.useRef)(null),C=(0,h.useRef)(null),N=4e3,{handleFileUpload:_,handleTextUpload:S}=function(e){let[t,n]=(0,h.useState)(!1),{activeOrganization:a}=(0,L.t)(),{addError:s}=(0,E.e)(),l=(0,O.OJ)();return{handleFileUpload:async i=>{if(t||!a)return;if(n(!0),!(0,tw.dF)(i))try{let t=await (0,tw.CL)(i);await e(t),n(!1);return}catch(e){}let r=new FormData;r.append("file",i);try{let t=await l("/api/organizations/".concat(a.uuid,"/convert_document"),{method:"POST",body:r});if(!t.ok)throw Error("Document conversion failed");let n=await t.json();if(!(null==n?void 0:n.extracted_content))throw Error("Document conversion failed: No extracted content");await e(n.extracted_content)}catch(e){s(e instanceof Error?e.message:"Error uploading file")}finally{n(!1)}},handleTextUpload:async s=>{!t&&a&&0!==s.trim().length&&(n(!0),await e(s),n(!1))},isUploading:t}}(async e=>{try{let t=await f({content_example:e});k.current=t}catch(e){m(e,l.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"})),b(!1)}}),Z=()=>{k.current?a(k.current,!0):(N=1e3,C.current=setTimeout(Z,N))},A=async()=>{D(),await S(c)},T=async e=>{let t=Array.from(e.dataTransfer.files);t&&(M(!0),setTimeout(D,20),await _(t[0]))},z=async e=>{let t=e.target.files;t&&(D(),await _(Array.from(t)[0])),e.target.value=""},D=()=>{b(!0),C.current=setTimeout(Z,N)};return(0,o.jsx)(p.E.div,{ref:t,className:"w-full h-full grid place-items-center",exit:{opacity:0,scale:.8},transition:s.current?tA:{duration:0},children:(0,o.jsxs)(x.M,{mode:"popLayout",children:[j&&(0,o.jsx)(p.E.div,{className:"w-full h-full grid place-items-center",initial:{opacity:0},animate:{opacity:1},transition:tA,children:(0,o.jsx)(tD,{})},"CreateStyleAnalyzingContentScreen"),!j&&(0,o.jsxs)(p.E.div,{className:"w-full h-full pt-1 flex flex-col sm:grid sm:grid-cols-2 sm:gap-4",children:[(0,o.jsxs)(p.E.div,{exit:{opacity:0,y:40,transition:tA},className:"sm:h-full text-center flex flex-col gap-2 items-center justify-center px-2 pt-8 pb-8 sm:pt-14 sm:pb-20",children:[(0,o.jsx)("div",{className:"relative pb-2 w-full flex items-center justify-center",children:(0,o.jsx)(tI,{})}),(0,o.jsx)("p",{className:"text-text-300 font-tiempos sm:text-lg",children:(0,o.jsx)(I.Z,{defaultMessage:"Share a writing example or describe your style and Claude will make a custom writing style tailored just for you.",id:"2qm6Zfzfx3"})})]},"CreatStyleStartScreenExplainer"),(0,o.jsx)(p.E.div,{className:"h-full flex-1",exit:{opacity:0,x:0,scale:.8,transition:{basicTransition:tA}},children:r?(0,o.jsxs)("div",{className:"h-full flex flex-col gap-2 p-2 rounded-xl border-0.5 border-border-300",children:[(0,o.jsx)("textarea",{ref:y,className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:l.formatMessage({defaultMessage:"Paste at least a few paragraphs of example writing, including from multiple various sources if you’d like, for Claude to analyze and the match style of...",id:"mC+9IzmmMY"}),value:c,onChange:e=>u(e.target.value),required:!0}),(0,o.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,o.jsx)(X.z,{variant:"secondary",onClick:()=>d(!1),children:(0,o.jsx)(I.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,o.jsx)(X.z,{onClick:A,children:(0,o.jsx)(I.Z,{defaultMessage:"Create style",id:"OC52fhpn7g"})})]})]}):(0,o.jsxs)(e4.rE,{className:"w-full h-full text-center border-dashed border border-border-300 bg-bg-000 rounded-xl relative grid place-items-center",onDrop:T,children:[(0,o.jsx)(tz,{showDropCover:w},"DropZoneOverlay"),(0,o.jsx)("input",{ref:v,type:"file",className:"hidden",accept:(0,tw.tB)({imagesEnabled:!1}).join(","),onChange:z,multiple:!0}),(0,o.jsxs)("div",{children:[(0,o.jsxs)(J.Lt,{trigger:(0,o.jsx)(X.z,{variant:"flat",className:"mt-2 font-medium !text-accent-secondary-100 bg-accent-secondary-900 hover:!bg-accent-secondary-100/15 gap-2",prepend:(0,o.jsx)(tM.$,{weight:"bold"}),children:(0,o.jsx)(I.Z,{defaultMessage:"Add writing example",id:"EhXT0lXWRc"})}),children:[(0,o.jsx)(J.hP,{children:(0,o.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>{v.current&&v.current.click()},children:[(0,o.jsx)(tk.p,{size:16}),(0,o.jsx)(I.Z,{defaultMessage:"Upload from device",id:"vMaZk5Jcnv"})]})}),(0,o.jsx)(J.hP,{onClick:()=>d(!0),children:(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(tC.P,{size:16}),(0,o.jsx)(I.Z,{defaultMessage:"Paste text content",id:"nVQ9XcjUIh"})]})})]}),(0,o.jsxs)("div",{className:"text-xs text-text-400 mt-3 flex flex-col gap-1 max-sm:pb-8",children:[(0,o.jsx)("p",{children:window.innerWidth<=640?(0,o.jsx)(I.Z,{defaultMessage:"Select or paste existing doc, post, message, etc.",id:"7oFd31Vmu3"}):(0,o.jsx)(I.Z,{defaultMessage:"Select, drop, or paste existing doc, post, message, etc.",id:"ugXnNZ7Ix/"})}),(0,o.jsx)("p",{children:(0,o.jsx)(I.Z,{defaultMessage:"Content is not stored after matching style.",id:"bLEGIyr72h"})})]})]}),(0,o.jsx)("div",{className:"absolute w-full bottom-6",children:(0,o.jsx)(X.z,{variant:"underline",size:"inline",className:"text-sm gap-1.5",prepend:(0,o.jsx)(tN.x,{}),onClick:()=>{i.track({event_key:"styles.custom.describe_clicked"}),n(tv.b.CREATE_MANUALLY)},children:(0,o.jsx)(I.Z,{defaultMessage:"Describe style instead",id:"p6hP+KeXkD"})})})]})},"CreatStyleStartScreenDropZone")]},"CreatStyleStartScreen")]})})});tT.displayName="CreateStyle";let tz=e=>{let{showDropCover:t}=e,{dragState:n}=(0,e4.EO)(),a=n===e4.h7.DRAGGING_OFF_TARGET||n===e4.h7.DRAGGING_ON_TARGET||t;return(0,o.jsx)(x.M,{children:a&&(0,o.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:(0,f.Z)("absolute -inset-px z-10 flex flex-col justify-center rounded-xl border border-dashed transition-colors",n===e4.h7.DRAGGING_ON_TARGET||t?"bg-accent-secondary-900 border-accent-secondary-200 text-accent-secondary-000":"bg-bg-100 border-border-200 text-text-300"),children:(0,o.jsxs)("div",{className:"py-1.5 text-center",children:[(0,o.jsx)("div",{className:"relative inline-block opacity-60",children:(0,o.jsx)(t_.y,{size:36,weight:"thin"})}),(0,o.jsx)("div",{className:"font-tiempos pt-2 pb-4 italic tracking-tight",children:(0,o.jsx)(I.Z,{defaultMessage:"Drop example writing here to match the style",id:"VcDT1Dt8dq"})})]})},"drop-zone-overlay")})},tD=()=>(0,o.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,o.jsx)(tI,{animate:!0}),(0,o.jsx)(p.E.div,{className:"font-tiempos italic text-lg",initial:{opacity:0,y:-15},animate:{opacity:1,y:0},transition:{opacity:{delay:.2,ease:"easeOut",duraation:.6},y:{delay:.2,type:"spring",stiffness:230,damping:20}},children:(0,o.jsx)(I.Z,{defaultMessage:"Analyzing your writing...",id:"AnDnGKCn6M"})})]});var tR=n(30028),tO=n(17764),tL=n(99851),tF=n(24038);let tP={objective:{label:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tR.V,{})," ",(0,o.jsx)(I.Z,{defaultMessage:"Define style objective",id:"gJB/90MGQ7"})]}),description:"Describe the main purpose and goal of this writing style — whether to teach, analyze, persuade, inspire, etc.",placeholder:"Try something like:\nI want to teach complex topics step-by-step, with a focus on building understanding.",promptPrepend:"I’d like the writing to serve this purpose:"},audience:{label:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tF.E,{})," ",(0,o.jsx)(I.Z,{defaultMessage:"Tailor to an audience",id:"TYdBxyl/f3"})]}),description:"Describe details of the target audience you’d like Claude to write for including relevant information, needs, or preferences.",placeholder:"Try something like:\nWrite for marketing professionals. They’re tech-savvy and appreciate a dash of humor with their data.",promptPrepend:"I’d like to tailor this style to a specific audience:"},voicetone:{label:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tO.i,{})," ",(0,o.jsx)(I.Z,{defaultMessage:"Use specific voice & tone",id:"1Vo908p7lJ"})]}),description:"Think about characteristics like formality, emotion, personality, and how you want the written responses to feel.",placeholder:"Try something like:\nWrite in a warm, approachable tone with light professional humor - like a friendly mentor.",promptPrepend:"I’d like to write in this voice and tone:"},general:{label:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tN.x,{})," ",(0,o.jsx)(I.Z,{defaultMessage:"Describe generally",id:"f3JnPS+B3+"})]}),description:"Describe in detail how you would like Claude to write. Be as specific as you can.",placeholder:"Try something like:\nWrite like an excited scientist explaining fascinating discoveries - technical but energetic.",promptPrepend:"I’d like to write like this:"},custom:{label:(0,o.jsx)(I.Z,{defaultMessage:"Use custom instructions (advanced)",id:"hSfu0Sz47T"}),description:"Write exact custom instructions for this style instead of generating a style prompt automatically. Claude will ignore instructions that don’t follow our guidelines.",placeholder:"Write style custom instructions here...",promptPrepend:""}},tG=(0,h.forwardRef)((e,t)=>{let{setScreen:n,onStyleChange:a}=e,s=(0,g.Z)(),l=(0,tg.z$)(),[i,r]=(0,h.useState)(!1),[d,c]=(0,h.useState)(""),[u,m]=(0,h.useState)(Object.keys(tP)[0]),{handleRateLimitError:v}=tZ(),{mutateAsync:y}=(0,tb.GB)(),j=(0,h.useRef)(null);(0,h.useEffect)(()=>{setTimeout(()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.focus()},50)},[u]);let b=d.replace(/\s/g,"").length>24,w=async()=>{if(!i&&b){r(!0);try{let e="custom"===u?{prompt:d}:{input_text:tP[u].promptPrepend+"\n"+d},t=await y(e);a(t,!1)}catch(e){v(e,s.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"}))}finally{r(!1)}}},M=e=>{l.track({event_key:"styles.custom.describe_selected",key:e}),m(e)};return(0,o.jsxs)(p.E.div,{ref:t,className:"w-full h-full flex flex-col sm:grid sm:grid-cols-2 gap-4 pt-3",children:[(0,o.jsxs)("div",{className:"flex flex-col sm:h-full sm:pr-3",children:[(0,o.jsxs)("div",{className:"flex-1 text-text-300",children:[(0,o.jsx)("p",{className:"mb-1 sm:mb-2 text-sm font-medium",children:(0,o.jsx)(I.Z,{defaultMessage:"Generate style from a starting point:",id:"cz09/5alWg"})}),(0,o.jsx)("ul",{className:"hidden sm:flex flex-col gap-1.5",children:Object.keys(tP).map(e=>(0,o.jsx)("li",{children:(0,o.jsxs)("button",{className:(0,f.Z)("flex gap-1.5 items-center font-styrene h-11 rounded-lg border border-border-400 hover:border-border-300 px-3 w-full text-left transition active:scale-[1.015] hover:bg-bg-200",u===e&&"!bg-accent-secondary-900 text-accent-secondary-000 !border-accent-secondary-100/80","custom"===e&&"mt-2 text-sm"),onClick:()=>M(e),children:[(0,o.jsx)("div",{className:"w-4 h-4 rounded-full bg-bg-100 grid place-items-center border border-border-300 mr-1",children:u===e&&(0,o.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-accent-secondary-100"})}),tP[e].label]})},e))}),(0,o.jsx)("div",{className:"sm:hidden",children:(0,o.jsx)(J.Lt,{trigger:(0,o.jsx)(X.z,{variant:"ghost",append:(0,o.jsx)(ea.p,{}),className:"w-full !border !border-border-300",children:(0,o.jsx)("div",{className:"flex-1 text-left flex items-center gap-1",children:tP[u].label})}),children:Object.keys(tP).map(e=>(0,o.jsx)(J.hP,{onSelect:()=>M(e),children:(0,o.jsx)("div",{className:"flex items-center gap-1",children:tP[e].label})},e))})})]}),(0,o.jsx)("div",{className:"mb-4 max-sm:hidden",children:(0,o.jsx)(X.z,{variant:"underline",size:"inline",className:"text-sm gap-1",onClick:()=>n(tv.b.CREATE),prepend:(0,o.jsx)(tL.D,{}),children:(0,o.jsx)(I.Z,{defaultMessage:"Never mind, I’ll add an example",id:"PpPoeCEz4X"})})})]}),(0,o.jsxs)("form",{className:"flex flex-col h-full rounded-xl border-0.5 border-border-300 bg-bg-200 px-3 py-2 gap-2",onSubmit:e=>{e.preventDefault(),w()},children:[(0,o.jsx)("p",{className:"pt-0 p-1 text-text-300 font-tiempos max-sm:text-sm",children:tP[u].description}),(0,o.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,o.jsx)("textarea",{ref:j,className:" min-h-0 w-full h-full bg-bg-000 border border-border-200 p-3 leading-snug rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:tP[u].placeholder,value:d,required:!0,onChange:e=>c(e.target.value)}),(0,o.jsx)(x.M,{children:d.length>0&&!b&&(0,o.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:.1},className:"absolute bottom-1 right-1 left-1 py-2 px-2 rounded-md text-sm bg-accent-secondary-900 text-text-200 text-center",children:(0,o.jsx)(I.Z,{defaultMessage:"Be as descriptive as possible to help Claude generate the best possible style for you",id:"3ObAHHjHgF"})})})]}),(0,o.jsx)($.u,{tooltipContent:b?"":s.formatMessage({defaultMessage:"More description needed in order to generate style",id:"vX4dBOsKs3"}),side:"bottom",className:"text-center",children:(0,o.jsx)("div",{className:"flex items-center w-full justify-center pb-1",children:(0,o.jsx)(X.z,{className:"w-full",type:"submit",loading:i,disabled:!b,children:"custom"===u?(0,o.jsx)(I.Z,{defaultMessage:"Create style",id:"OC52fhpn7g"}):(0,o.jsx)(I.Z,{defaultMessage:"Generate style",id:"tILvvoBa87"})})})})]})]})});tG.displayName="CreateStyleManually";var tU=n(2210),tH=n(72538),tB=n(49167),tK=n(42253),tV=n(7778),tY=n(87896),tq=n(34141),tW=n(26608),tQ=n(52681),tX=n(38459),tJ=n(64243),t$=n(18013);function t0(){let[e,t]=(0,t$.R)("userHiddenStyles",[]),n=(0,h.useCallback)(e=>{let n=(0,tJ.X)(e);t(e=>[...e,n])},[t]),a=(0,h.useCallback)(()=>{t([])},[t]),s=(0,h.useCallback)(t=>t.filter(t=>{let n=(0,tJ.X)(t);return!e.includes(n)}),[e]);return{hiddenPresetStyles:e,setHiddenPresetStyles:t,addHiddenPresetStyle:n,resetHiddenPresetStyles:a,filterHiddenStyles:s}}(s=i||(i={})).VIEW="view",s.EDIT="edit",s.EDIT_MANUALLY="edit_manually";let t1=K.z.array(K.z.object({key:K.z.string(),name:K.z.string(),nameKey:K.z.string().optional(),text:K.z.string(),textKey:K.z.string().optional()})),t2=[],t5=()=>(0,u.Zr)("claude_style_previews","previewExamples",t2,t1),t3=e=>{let{isSaveButton:t,children:n}=e;return(0,o.jsx)("div",{className:(0,f.Z)("flex gap-1.5",t?"sm:absolute sm:top-5 sm:right-16 max-sm:mt-3 max-sm:-mb-2":"absolute top-5 right-16"),children:n})},t7=(0,h.forwardRef)((e,t)=>{let{animateBoolRef:n,style:a,setCurrentStyle:s,returnToListScreen:l,setChatStyle:i,setIsEditing:r,setIsEditingName:d}=e,c=(0,g.Z)(),u=(0,tJ.X)(a),m="default"===a.type,[f,x]=(0,h.useState)("view"),{mutateAsync:v}=(0,tb.fq)(u,m),{handleRateLimitError:y}=tZ(),j=async e=>{let{prompt:t,editInput:n}=e;try{let e=await v({prompt:t,edit_instructions:n});e&&s(e)}catch(e){throw y(e,c.formatMessage({defaultMessage:"Failed to edit style. Please try again.",id:"1WkY08RVLW"})),Error}},b=e=>{r("edit"===e||"edit_manually"===e),x(e)};return(0,o.jsxs)(p.E.div,{className:"flex-1 min-h-0 grid sm:grid-cols-2 gap-3 pt-3",ref:t,children:["view"===f&&(0,o.jsxs)(t3,{children:[(0,o.jsx)(X.z,{variant:"secondary",className:"text-sm max-sm:hidden",onClick:()=>i(a),children:(0,o.jsx)(I.Z,{defaultMessage:"Use style",id:"f7VY0ldE+0"})}),(0,o.jsx)(ne,{style:a,returnToListScreen:l,onRename:()=>d(!0),setStateToManualEdit:()=>b("edit_manually")})]}),(0,o.jsxs)(p.E.div,{className:"min-h-0",initial:!!n.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.1},opacity:{duration:.3,delay:.1}},children:["view"===f&&(0,o.jsx)(t8,{style:a,onClick:()=>b("edit")}),"edit"===f&&(0,o.jsx)(t6,{style:a,updateStyle:j,onClose:()=>b("view")}),"edit_manually"===f&&(0,o.jsx)(t4,{style:a,updateStyle:j,onClose:()=>b("view")})]}),(0,o.jsx)(t9,{style:a,animateBoolRef:n})]})});t7.displayName="EditStyle";let t6=e=>{let{style:t,updateStyle:n,onClose:a}=e,s=(0,g.Z)(),l=(0,h.useRef)(t.prompt),i=(0,h.useRef)(null),[r,d]=(0,h.useState)(!1),[c,u]=(0,h.useState)(!1),[m,v]=(0,h.useState)([]),[y,j]=(0,h.useState)(""),b=async e=>{if(e.preventDefault(),r||c)return!1;await w(y)},w=async e=>{j(""),d(!0),v([...m,e]);try{await n({editInput:e})}catch(e){j(y),v(e=>e.slice(0,-1))}d(!1)},M=async()=>{m.length&&(u(!0),await n({prompt:l.current}),u(!1)),a()},k=(0,h.useMemo)(()=>{if(!t.attributes)return[];let e=Math.floor(Math.random()*t.attributes.length),n=e+1<t.attributes.length?e+1:e-1;return[s.formatMessage({defaultMessage:"A bit more {attribute}",id:"au1WTQvqDg"},{attribute:t.attributes[e].name.toLowerCase()}),s.formatMessage({defaultMessage:"Much less {attribute}",id:"dIbq/Ow8Zn"},{attribute:t.attributes[n].name.toLowerCase()})]},[t.attributes,s]);return(0,h.useEffect)(()=>{if(m.length>0){var e;null===(e=i.current)||void 0===e||e.scrollTo({top:i.current.scrollHeight,behavior:"smooth"})}},[m,t.summary]),(0,o.jsxs)("div",{className:"h-full flex flex-col",children:[(0,o.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col gap-2 p-2.5 rounded-xl border border-accent-secondary-100/50 bg-bg-100 ",children:[(0,o.jsxs)("div",{className:(0,f.Z)("border-0.5 rounded-lg p-3 pt-2.5 mb-2 relative transition bg-gradient-to-b",r?"border-border-300 from-accent-secondary-900/50 to-accent-secondary-900/10":"border-accent-secondary-100/50 from-accent-secondary-900/75 to-accent-secondary-900/25"),children:[(0,o.jsx)("div",{className:(0,f.Z)("font-tiempos font-normal text-pretty leading-snug tracking-tight text-text-200 transition",r?"opacity-0 scale-[0.975]":"delay-150 duration-150 ease-out"),children:t.summary}),(0,o.jsx)(x.M,{children:r&&(0,o.jsx)(p.E.div,{className:"absolute inset-0 grid place-items-center",initial:{scale:.75,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.75,opacity:0},children:(0,o.jsx)(tH.p,{state:"thinking"})})})]}),(0,o.jsx)("ul",{ref:i,className:"flex-1 min-h-0 overflow-y-auto flex flex-col gap-2",children:m.map(e=>(0,o.jsx)("li",{children:(0,o.jsx)("div",{className:"inline-block py-2 px-3 rounded-lg bg-bg-300 text-sm",children:e})},e))}),m.length>0?(0,o.jsx)("div",{className:"text-sm text-center text-text-500",children:(0,o.jsx)(I.Z,{defaultMessage:"Ask for more edits, save, or discard changes",id:"zOxoAYYCog"})}):(0,o.jsxs)("div",{className:"mb-2",children:[(0,o.jsx)("div",{className:"text-sm text-text-500 mb-2",children:(0,o.jsx)(I.Z,{defaultMessage:"Describe how you’d like to edit the style, like:",id:"PRDvfjUkNA"})}),(0,o.jsx)("ul",{className:"flex flex-col gap-2",children:k.map((e,t)=>(0,o.jsx)("li",{children:(0,o.jsx)("button",{onClick:t=>{t.preventDefault(),w(e)},className:"text-sm font-medium h-8 px-3 rounded-full border-0.5 border-border-200 text-text-200 bg-gradient-to-b hover:text-text-000 hover:from-bg-400/0 hover:to-bg-400/50 hover:border-border-100 active:scale-x-[0.985] active:scale-y-[0.995] transition",children:e})},t))})]}),(0,o.jsx)("form",{className:"mb-1.5 mx-0.5",onSubmit:e=>b(e),children:(0,o.jsx)(tn.oi,{autoFocus:!0,className:"w-full",name:"inputText",placeholder:s.formatMessage({defaultMessage:"Ask Claude to edit the style...",id:"5D1Fao75P8"}),size:"lg",value:y,onChange:e=>j(e.target.value),append:(0,o.jsx)(x.M,{children:y.length>0&&(0,o.jsx)(p.E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.85,opacity:0,transition:{ease:"easeIn",duration:.1}},children:(0,o.jsx)(X.z,{type:"submit",size:"icon_sm",variant:"flat",disabled:r||c,children:(0,o.jsx)(tK.a,{})})})})})})]}),(0,o.jsxs)(t3,{isSaveButton:!0,children:[(0,o.jsx)(X.z,{onClick:a,disabled:r||c||y.length>0||0===m.length,children:(0,o.jsx)(I.Z,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,o.jsx)(X.z,{onClick:M,disabled:r,loading:c,variant:"secondary",children:m.length>0?(0,o.jsx)(I.Z,{defaultMessage:"Discard",id:"nmpevlUATU"}):(0,o.jsx)(I.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},t4=e=>{let{style:t,updateStyle:n,onClose:a}=e,[s,l]=(0,h.useState)(!1),[i,r]=(0,h.useState)(t.prompt),d=(0,g.Z)(),c=async e=>{e.preventDefault(),l(!0),await n({prompt:i}),l(!1),a()};return(0,o.jsxs)("form",{className:"flex flex-col gap-2 h-full min-h-0 p-3 pt-2 rounded-xl border-0.5 border-border-200",onSubmit:e=>c(e),children:[(0,o.jsx)("div",{className:"text-center text-sm text-text-200 font-medium",children:(0,o.jsx)(I.Z,{defaultMessage:"Edit style instructions manually",id:"+qSf1b/LLJ"})}),(0,o.jsx)("textarea",{className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:d.formatMessage({defaultMessage:"Describe your style instructions",id:"nk7EX3l+b4"}),value:i,disabled:s,onChange:e=>r(e.target.value),autoFocus:!0}),(0,o.jsxs)(t3,{isSaveButton:!0,children:[(0,o.jsx)(X.z,{type:"submit",loading:s,children:(0,o.jsx)(I.Z,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,o.jsx)(X.z,{onClick:()=>{r(t.prompt),a()},disabled:s,variant:"secondary",children:(0,o.jsx)(I.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},t8=e=>{let{style:t,onClick:n}=e,a="default"===t.type;return(0,o.jsxs)("div",{className:(0,f.Z)("flex flex-col items-center h-full px-6 gap-4 rounded-lg sm:rounded-xl max-sm:mx-1.5",!a&&"bg-gradient-to-b from-accent-secondary-900/75 to-accent-secondary-900/25 border border-accent-secondary-100/50",a&&"bg-bg-300 border border-border-300"),children:[(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)("div",{className:(0,f.Z)("w-fit px-4 py-2 pb-2.5 gap-2.5 rounded-b-lg font-medium text-xs tracking-tight",a?"bg-bg-400 text-text-300":"bg-accent-secondary-200/10 text-accent-secondary-100"),children:a?(0,o.jsx)(I.Z,{defaultMessage:"Preset style",id:"qwpRSZtBAV"}):(0,o.jsx)(I.Z,{defaultMessage:"Your custom style",id:"o/vLK7B7mw"})})}),(0,o.jsxs)("div",{className:"flex flex-col items-center gap-1.5 pb-4",children:[!a&&(0,o.jsx)($.u,{className:"text-center",tooltipContent:(0,o.jsx)(I.Z,{defaultMessage:"Full style instructions are generated and include more than shown in summary. You can edit instructions manually from the options menu",id:"R5PMcY1ELo"}),children:(0,o.jsxs)("div",{className:"flex items-center gap-1 cursor-help opacity-50 hover:opacity-60",children:[(0,o.jsx)("span",{className:"text-sm font-medium",children:(0,o.jsx)(I.Z,{defaultMessage:"Style summary",id:"hVmQ4DO8io"})}),(0,o.jsx)(eH.k,{size:12,className:"translate-y-px",weight:"bold"})]})}),(0,o.jsx)("div",{"data-testid":"style-summary",className:"font-tiempos text-xl font-normal text-pretty leading-snug tracking-tight text-center flex-1 flex items-center",children:"default"===t.type&&t.summaryKey?(0,o.jsx)(c.d7,{id:t.summaryKey}):t.summary})]}),(0,o.jsx)("div",{className:"flex-1 flex items-center text-sm",children:a?(0,o.jsx)(I.Z,{defaultMessage:"Preset styles are not editable",id:"qjKy0s/reb"}):(0,o.jsx)(X.z,{variant:"outline",onClick:n,className:"!border-accent-secondary-200 !text-accent-secondary-000 hover:!bg-accent-secondary-100/10",prepend:(0,o.jsx)(tQ.A,{weight:"bold"}),children:(0,o.jsx)(I.Z,{defaultMessage:"Edit with Claude",id:"wdKoWlVN+G"})})})]})},t9=e=>{let{style:t,animateBoolRef:n}=e,a=(0,g.Z)(),[s,l]=(0,h.useState)(""),[i,r]=(0,h.useState)(),d=(0,h.useRef)(t.prompt),m=(0,h.useRef)(i),v=t5(),{handleRateLimitError:y}=tZ(),{isPending:j,mutateAsync:b}=(0,tb.HK)(),w=(0,h.useCallback)(async()=>{if(i)try{let e=await b({style_prompt:t.prompt,example_key:i.key,example_text:i.textKey?(0,c.Gc)({id:i.textKey,intl:a}):i.text});l(e)}catch(e){y(e,a.formatMessage({defaultMessage:"Failed to preview style. Please try again.",id:"B2A4x/wbTg"}))}},[y,b,i,t.prompt,a]);(0,h.useEffect)(()=>{var e;(d.current!==t.prompt||(null===(e=m.current)||void 0===e?void 0:e.key)!==(null==i?void 0:i.key))&&(d.current=t.prompt,m.current=i,w())},[w,i,t.prompt]);let{value:M}=(0,u.FL)("use_in_house_latex_transformer");return(0,o.jsx)(p.E.div,{className:(0,f.Z)("max-sm:hidden flex flex-col gap-2 h-full min-h-0 p-2 rounded-xl border-0.5 border-border-300 transition-colors",i?"bg-bg-000/70":"bg-bg-000/20"),initial:!!n.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.2},opacity:{duration:.3,delay:.2}},children:i?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center text-sm px-2 font-medium text-text-200",children:[(0,o.jsx)(I.Z,{defaultMessage:"Previewing with",id:"tNFdPqESDT"}),(0,o.jsx)(J.Lt,{align:"center",trigger:(0,o.jsx)(X.z,{variant:"ghost",size:"unset",className:"!px-1 !py-0.5 gap-0.5 !text-accent-secondary-100 hover:!bg-accent-secondary-900",append:(0,o.jsx)(tX.p,{className:"translate-y-px"}),children:i?i.nameKey?(0,o.jsx)(c.d7,{id:i.nameKey}):i.name:(0,o.jsx)(I.Z,{defaultMessage:"Example",id:"xrCRnH/mKK"})}),children:v.map(e=>(0,o.jsx)(J.hP,{disabled:j,onClick:()=>r(e),children:e.nameKey?(0,o.jsx)(c.d7,{id:e.nameKey}):e.name},e.key))})]}),(0,o.jsxs)(tB.$,{className:"p-2 pt-0 min-h-0 overflow-y-scroll",children:[(0,o.jsx)("div",{className:"bg-bg-300 -mx-0.5 mb-2 py-1.5 px-2 text-sm rounded-lg text-pretty",children:i.textKey?(0,o.jsx)(c.d7,{id:i.textKey}):i.text}),(0,o.jsx)(x.M,{children:j?(0,o.jsx)("div",{className:"pt-2",children:(0,o.jsx)(tH.p,{state:"writing"})}):(0,o.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeIn",duration:.25},children:(0,o.jsx)(tU.ux,{className:"font-tiempos flex-1 flex flex-col gap-2",text:s,useInHouseLatexPlugin:M})})})]})]}):(0,o.jsx)("div",{className:"flex-1 grid place-items-center text-center",children:(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)("div",{className:"text-sm text-text-500 font-medium mb-4",children:(0,o.jsx)(I.Z,{defaultMessage:"Preview with an example...",id:"YdUmd5z6YL"})}),(0,o.jsx)("div",{className:"flex flex-wrap justify-center gap-2 w-full",children:v.map(e=>(0,o.jsx)("button",{onClick:()=>r(e),className:"\n                    rounded-full\n                    border-0.5\n                    border-border-300\n                    text-sm\n                    text-text-400\n                    font-medium\n                    h-8\n                    px-3\n                    flex\n                    items-center\n                    bg-gradient-to-b\n                    from-always-black/0\n                    to-always-black/5\n                    hover:bg-accent-secondary-900\n                    hover:text-accent-secondary-000\n                    hover:border-accent-secondary-100/50\n                    transition-colors",children:e.nameKey?(0,o.jsx)(c.d7,{id:e.nameKey}):e.name},e.key))})]})})})},ne=e=>{let{style:t,returnToListScreen:n,onRename:a,setStateToManualEdit:s}=e,l=(0,tJ.X)(t),i="default"===t.type,{isPending:r,mutateAsync:d}=(0,tb.KM)(l),{addHiddenPresetStyle:c}=t0(),{clearStoredStyle:u,storedStyle:m}=(0,tt.O)(),{addError:f}=(0,E.e)(),x=(0,g.Z)(),p=async()=>{if(i)c(t),setTimeout(()=>{n()},500);else try{await d(),m&&"uuid"in m&&m.uuid===t.uuid&&u(),n()}catch(e){f(x.formatMessage({defaultMessage:"Failed to delete style. Please try again.",id:"4eIHICfKCI"}))}};return(0,o.jsxs)(J.Lt,{align:"end",unstyledTrigger:!0,trigger:(0,o.jsxs)(X.z,{variant:"ghost",className:"max-sm:min-w-8 max-sm:px-2 sm:pl-3 sm:pr-2",children:[(0,o.jsxs)("span",{className:"hidden sm:flex items-center gap-1",children:[(0,o.jsx)(I.Z,{defaultMessage:"Options",id:"NDV5MqT9ww"}),"\xa0",(0,o.jsx)(tX.p,{})]}),(0,o.jsx)("span",{className:"sm:hidden",children:(0,o.jsx)(tV.F,{weight:"bold",size:20})})]}),children:[!i&&(0,o.jsx)(J.hP,{disabled:r,onClick:()=>{a()},children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(tY.z,{className:"mr-2"}),(0,o.jsx)(I.Z,{defaultMessage:"Rename style",id:"sEO8vFphTF"})]})}),"Concise"===l?(0,o.jsx)(J.AZ,{className:"text-sm",children:(0,o.jsx)(I.Z,{defaultMessage:"Concise style can’t be hidden",id:"zTztS+Om9I"})}):(0,o.jsx)(J.hP,{className:"pr-0 !text-danger-000",disabled:r,onClick:p,children:i?(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(tq.M,{}),(0,o.jsx)(I.Z,{defaultMessage:"Hide preset style",id:"z44N28JZYv"})]}):(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(tW.r,{}),(0,o.jsx)(I.Z,{defaultMessage:"Delete style",id:"fAqSoPl78t"})]})}),!i&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(J.u2,{}),(0,o.jsx)(J.hP,{onClick:s,children:(0,o.jsx)(I.Z,{defaultMessage:"Edit style manually",id:"H+z4uo2Wfn"})})]})]})},nt=e=>{let{size:t=16,className:n}=e;return(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",width:t,height:t,viewBox:"0 0 16 16",className:n,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M8.5 4.5c-3 2-4.5 4-5.5 8L2.5 15l1-1.5"}),(0,o.jsx)("path",{d:"M3 4.5c-.5 1.3-.1 5 .4 6.5 0 0 1.9-2 4.1-3 1.8-.8 3.8-.6 4.5-2 .6-1.2-.2-1.7-1.5-1 1.2-.7 4-2 3-3.5-1-1.4-3.5-.1-4.5.8C9 1.9 9 .9 8 1c-1 .1-2 1.5-2.3 2.8 0 0 0-.7-.7-.8-.7-.1-1.6.5-2 1.5Z"}),(0,o.jsx)("path",{d:"M10.5 11v4m-2-2h4"})]})};var nn=n(32411),na=n(92655),ns=n(13344),nl=n(16804);let ni=(0,h.forwardRef)((e,t)=>{let{setScreen:n,styles:a,onStyleChange:s}=e,{hiddenPresetStyles:l,resetHiddenPresetStyles:i}=t0(),{sortStyles:r,setOrder:d}=function(){let[e,t]=(0,t$.R)("userStylesOrder",[]);return{sortStyles:(0,h.useCallback)(t=>[...t].sort((t,n)=>{let a=(0,tJ.X)(t),s=(0,tJ.X)(n);if("Default"===a)return -1;if("Default"===s)return 1;let l=e.indexOf(a),i=e.indexOf(s);return -1===l&&-1===i?0:-1===l?1:-1===i?-1:l-i}),[e]),stylesOrder:e,setOrder:(0,h.useCallback)(e=>{t(e.map(e=>(0,tJ.X)(e)))},[t])}}(),[c,u]=(0,h.useState)([]),m=(0,h.useCallback)(e=>{let t=[...l,"Default"];return r(e.filter(e=>!t.includes((0,tJ.X)(e))))},[l,r]);(0,h.useEffect)(()=>{u(m(a))},[a,m]);let f=(0,h.useCallback)(e=>{Array.isArray(e)&&(u(e),d(e))},[d]),x=(0,h.useMemo)(()=>a.some(e=>"custom"===e.type),[a]);return(0,o.jsxs)(p.E.div,{exit:{opacity:0,transition:{duration:0}},ref:t,className:"flex-1 min-h-0 flex flex-col -mx-3",children:[(0,o.jsxs)("div",{className:"flex-1 min-h-0",children:[(0,o.jsx)(ns.t.Group,{as:"ul",axis:"y",values:c,onReorder:f,layoutScroll:!0,className:"pl-3 pr-3 pb-2 overflow-y-auto max-h-full [mask-image:linear-gradient(to_top,hsl(var(--always-black)/0%)_0%,_hsl(var(--always-black)/100%)_3%)]",children:c.map(e=>(0,o.jsx)(nr,{style:e,onClick:()=>s(e,!1)},(0,tJ.X)(e)))}),!x&&(0,o.jsxs)(p.E.div,{initial:{opacity:0,scale:.985},animate:{opacity:1,scale:1,transition:{delay:.3,ease:"easeOut",duration:.3}},exit:{opacity:0},className:"flex bg-gradient-to-b from-accent-pro-900/20 to-accent-pro-900/50 py-3 pl-3.5 pr-5 mx-3 rounded-lg border-0.5 border-border-300 text-text-300 text-sm",children:[(0,o.jsx)("div",{className:"font-copernicus font-medium mr-4 text-accent-pro-000 mt-px whitespace-nowrap",children:(0,o.jsx)(I.Z,{defaultMessage:"Tip",id:"4j1TGZubAJ"})}),(0,o.jsx)("p",{children:(0,o.jsx)(I.Z,{defaultMessage:"Choose from preset styles or create your own custom style to tailor elements of Claude’s written responses such as tone, voice, vocabulary, detail level, and more. <link>Learn about styles</link>",id:"pwT6iI4QV7",values:{link:e=>(0,o.jsx)("a",{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",className:"underline hover:text-text-000",target:"_blank",children:e})}})})]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center mt-4 mx-3",children:[(0,o.jsx)(X.z,{onClick:()=>n(tv.b.CREATE),prepend:(0,o.jsx)(nt,{}),children:(0,o.jsx)(I.Z,{defaultMessage:"Create custom style",id:"9y/YEanHck"})}),l.length>0&&(0,o.jsx)(X.z,{variant:"underline",onClick:i,children:(0,o.jsx)(I.Z,{defaultMessage:"Reset preset styles",id:"EITqrHaUNi"})})]})]})});ni.displayName="ListStyles";let nr=e=>{let{style:t,onClick:n}=e,a="default"===t.type,s=(0,nl.o)(),[l,i]=(0,h.useState)(!1);return(0,o.jsxs)(ns.t.Item,{value:t,dragListener:!1,dragControls:s,dragTransition:{bounceStiffness:500,bounceDamping:40},onDragStart:()=>i(!0),onDragEnd:()=>i(!1),className:"relative my-2 min-w-0",children:[(0,o.jsxs)("button",{className:(0,f.Z)("\n          flex\n          items-center\n          w-full\n          h-11\n          py-4\n          pl-1\n          pr-3\n          min-w-0\n          rounded-lg\n          transition\n          border-0.5\n          border-border-300\n          bg-bg-100\n          bg-gradient-to-b\n          from-bg-300/0\n          to-bg-300/50\n          select-none\n          relative\n        ",l?"scale-y-[1.015] scale-x-[1.0025] shadow-md":"group hover:enabled:from-accent-secondary-200/0 hover:enabled:to-accent-secondary-200/10 hover:enabled:border-accent-secondary-200/50"),onClick:n,children:[(0,o.jsx)("div",{className:"flex min-w-0 items-center flex-1 pl-7 truncate",children:"default"===t.type&&t.nameKey?(0,o.jsx)(c.d7,{id:t.nameKey}):t.name}),a&&(0,o.jsx)("div",{className:"mr-0.5 rounded-full px-2 py-0.5 bg-text-300/5 text-text-400 font-medium text-[0.625rem]",children:(0,o.jsx)(I.Z,{defaultMessage:"Preset",id:"EucS2pAMVS"})}),(0,o.jsx)("div",{className:"text-accent-secondary-200 opacity-0 scale-50 transition group-hover:scale-100 group-hover:opacity-100",children:a?(0,o.jsx)(nn.o,{}):(0,o.jsx)(tY.z,{})})]}),(0,o.jsx)("div",{onPointerDown:e=>s.start(e),onClick:e=>e.stopPropagation(),className:"w-7 h-7 absolute left-1 top-1/2 -translate-y-1/2 grid place-items-center cursor-move text-text-500 hover:text-accent-secondary-000",children:(0,o.jsx)(na.f,{size:16,weight:"bold"})})]})},no=e=>{let{openWithScreen:t,onClose:n,styles:a,setChatStyle:s}=e,l=(0,g.Z)(),i=!!t,r=(0,tg.z$)(),[d,u]=(0,h.useState)(t||tv.b.LIST),[m,f]=(0,h.useState)(),[p,v]=(0,h.useState)(!1),[y,j]=(0,h.useState)(!1),b=(0,h.useRef)(!1);(0,h.useEffect)(()=>{t&&u(t)},[t]);let w=()=>{b.current=!1,u(tv.b.LIST),v(!1),j(!1)},M=()=>{(!p||window.confirm(l.formatMessage({defaultMessage:"Are you sure? Closing while editing may not synchronize changes.",id:"0XdWZrmwXu"})))&&(r.track({event_key:"styles.modal",open:!1}),w(),n())},k=(e,t)=>{b.current=t,f(e),u(tv.b.EDIT),v(!1),j(!1)};return(0,o.jsx)(ta.u_,{modalSize:"xl",title:(e=>{switch(e){case tv.b.CREATE:return(0,o.jsx)("div",{className:"font-copernicus font-normal",children:(0,o.jsx)(I.Z,{defaultMessage:"Create a style",id:"/pKvFi9Ak4"})});case tv.b.CREATE_MANUALLY:return(0,o.jsx)("div",{className:"font-copernicus font-normal",children:(0,o.jsx)(I.Z,{defaultMessage:"Describe your style",id:"Ntblq5cSRe"})});case tv.b.LIST:return(0,o.jsx)("div",{className:"font-copernicus font-normal",children:(0,o.jsx)(I.Z,{defaultMessage:"Customize your styles",id:"dn3MiW/vUH"})});case tv.b.EDIT:return(0,o.jsx)("div",{className:"w-10/12 sm:w-5/12 md:w-7/12",children:y?(0,o.jsx)(nd,{style:m,onClose:e=>{e&&f(e),j(!1)}}):(0,o.jsx)("button",{title:m.name,className:"w-full font-copernicus font-normal text-left truncate cursor-text h-9 pr-4 leading-none translate-y-px text-text-200 hover:text-text-000",onClick:()=>!p&&j(!0),children:p?(0,o.jsx)(I.Z,{defaultMessage:"Edit {name}",id:"s3IOQQ+nJU",values:{name:m.name}}):"default"===m.type&&m.nameKey?(0,o.jsx)(c.d7,{id:m.nameKey}):m.name})})}})(d),icon:(e=>{switch(e){case tv.b.CREATE:case tv.b.EDIT:return(0,o.jsx)(X.z,{variant:"ghost",size:"icon_sm",disabled:p,onClick:()=>w(),children:(0,o.jsx)(ty.X,{})});case tv.b.CREATE_MANUALLY:return(0,o.jsx)(X.z,{variant:"ghost",size:"icon_sm",onClick:()=>u(tv.b.CREATE),children:(0,o.jsx)(ty.X,{})});case tv.b.LIST:return null}})(d),isOpen:i,onClose:M,className:"h-[35rem] !bg-gradient-to-b from-bg-100 to-bg-200 !pt-5 !pb-7",prependBeforeCloseButton:(0,o.jsx)(o.Fragment,{children:d===tv.b.LIST&&(0,o.jsx)($.u,{tooltipContent:l.formatMessage({defaultMessage:"Learn more about styles ↗",id:"nuhnis5YtY"}),children:(0,o.jsx)("div",{className:"mr-1",children:(0,o.jsx)(X.z,{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",variant:"ghost",className:"text-text-300",size:"icon",target:"_blank",children:(0,o.jsx)(tj.H,{size:18})})})})}),hasCloseButton:!0,children:(0,o.jsxs)(x.M,{mode:"popLayout",children:[d===tv.b.CREATE&&(0,o.jsx)(tT,{onStyleChange:k,setScreen:u,animateBoolRef:b},"CreateStyleScreen"),d===tv.b.CREATE_MANUALLY&&(0,o.jsx)(tG,{onStyleChange:k,setScreen:u},"CreateStyleManuallyScreen"),d===tv.b.LIST&&(0,o.jsx)(ni,{setScreen:u,styles:a,onStyleChange:k},"ListStylesScreen"),d===tv.b.EDIT&&m&&(0,o.jsx)(t7,{animateBoolRef:b,style:m,returnToListScreen:w,setIsEditingName:j,setCurrentStyle:f,setIsEditing:v,setChatStyle:e=>{s(e),M()}},"EditStyleScreen")]})})},nd=e=>{let{style:t,onClose:n}=e,a=(0,tJ.X)(t),s="default"===t.type,l=(0,g.Z)(),[i,r]=(0,h.useState)("default"===t.type&&t.nameKey?(0,c.Gc)({id:t.nameKey,intl:l}):t.name),{isPending:d,mutateAsync:u}=(0,tb.fq)(a,s),m=async()=>{n(await u({name:i}))};return(0,o.jsx)("form",{className:"w-full",onSubmit:async e=>{e.preventDefault(),await m()},children:(0,o.jsx)(tn.oi,{autoFocus:!0,className:"w-full text-base font-styrene font-normal",value:i,maxLength:64,onChange:e=>r(e.target.value),error:0===i.length,append:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(X.z,{variant:"ghost",type:"button",size:"unset",className:"w-7 h-7 rounded-md mr-1",onClick:()=>n(),disabled:d,children:(0,o.jsx)(td.X,{})}),(0,o.jsx)(X.z,{variant:"flat",size:"unset",className:"w-7 h-7 rounded-md",type:"submit",loading:d,children:(0,o.jsx)(en.J,{weight:"bold"})})]})})})};var nc=n(31275),nu=n(14593);let nm=()=>{let{projectUuid:e,setProjectUuid:t,setSyncSourceUuids:n,setIsUploadingGithubSync:a,syncSourceUuids:s,attachments:l,setAttachments:i}=(0,C.r)(),{styleModalOpenWithScreen:r,setStyleModalOpenWithScreen:d,createProjectModalIsOpen:c,setCreateProjectModalIsOpen:u,githubModalIsOpen:m,setGithubModalIsOpen:f,gmailAuthModalIsOpen:x,setGmailAuthModalIsOpen:p,createPromptArgumentModalIsOpen:g,setCreatePromptArgumentModalIsOpen:y}=(0,ek.jT)(),{personalizedStyleOptions:j}=(0,tt.O)(),b=(0,eC.jQ)(),w=(0,h.useCallback)(e=>{n(t=>[...t,e.uuid]),a(!1)},[n,a]),M=(0,v.aP)(s),k=(0,O.F9)(M);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(no,{openWithScreen:r,onClose:()=>d(null),styles:j,setChatStyle:e=>b(e.key)}),(0,o.jsx)(nu.m,{isOpen:!!x,onClose:()=>p(!1),callerIdentifier:"inputMenu"}),(0,o.jsx)(tp,{moveAttachments:!!(null==c?void 0:c.moveAttachments),isOpen:!!(null==c?void 0:c.isOpen),handleClose:()=>u(null),handleProjectCreated:e=>{t(e.uuid),u(null)},syncSources:k,attachments:l,setSyncSourceUuids:n,setAttachments:i}),(0,o.jsx)(nc.U,{location:"chat",projectUuid:e,isOpen:m,onClose:()=>f(!1),onCreated:w,setIsUploadingGithubSync:a}),g&&(0,o.jsx)(to,{isOpen:g.isOpen,onClose:()=>y(null),client:g.client,prompt:g.prompt})]})};function nf(){let e=(0,r._)(["\n  flex\n  flex-col\n  bg-bg-000\n  border-0.5\n  border-border-300\n  mx-2\n  md:mx-0\n  items-stretch\n  transition-all\n  duration-200\n  relative\n  shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%)]\n  focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%)]\n  hover:border-border-200\n  focus-within:border-border-200\n  cursor-text\n  z-10\n  rounded-2xl\n"]);return nf=function(){return e},e}function nx(){let e=(0,r._)(["\n  bg-bg-100 \n  w-full \n  h-2\n"]);return nx=function(){return e},e}function np(){let e=(0,r._)(["\n  flex \n  w-full \n  min-w-0 \n  flex-col\n"]);return np=function(){return e},e}let nh=(0,h.forwardRef)((e,t)=>{var n,a,s,l;let{disabled:i,placement:r,placeholder:d,onSubmit:b}=e,w=(0,g.Z)(),{prompt:M,tipTapEditorState:Z,projectUuid:A,setPrompt:z,setTipTapEditorState:P,setAttachments:H,setFiles:B,attachments:K,files:V,syncSourceUuids:Y,isUploadingDriveSync:q,isUploadingGithubSync:W,sendMessage:Q,conversation:X,isChatSyncing:J,isProjectSyncing:$,setSyncSourceUuids:ee,isSending:et,focusInput:en,isFocused:ea,setIsFocused:es,promptInputRef:el,willRedirectOnSubmit:ei,hasBlockingWarning:er,isUploadingFile:eo,setIsUploadingFile:ed,validateMaxUploadLimit:ec,onPasteFiles:eu,uploadInputProps:em,hasAttachments:ef,isNewConversation:ex,isImprovingPrompt:ep}=(0,C.r)();(0,h.useImperativeHandle)(t,()=>({setContent:(e,t,n)=>{z(e,{forceUpdateTiptap:!0}),H("function"==typeof t?t(K):t),B("function"==typeof n?n(V):n)},sendMessage:Q,setAttachments:e=>{H("function"==typeof e?e(K):e)},getAttachments:()=>K})),G();let{fetchInputAutocompletion:eh}=(0,y.Vl)(null==X?void 0:X.id),eg=function(e,t,n,a,s,l){let i=function(e,t,n,a){let{addError:s}=(0,E.e)(),l=(0,h.useCallback)(e=>{n(!1),e&&s(e)},[s,n]),{activeOrganization:i}=(0,L.t)(),r=null==i?void 0:i.uuid,d=(0,O.OJ)(),c=(0,h.useCallback)(async e=>{let t;if(!r)return l((0,o.jsx)(I.Z,{defaultMessage:"Invalid login",id:"m0+xd2UWTk"}));new URL("/api/organizations/".concat(r,"/fetch_url"),window.location.origin).searchParams.set("url",e);try{t=await d("/api/organizations/".concat(r,"/fetch_url?url=").concat(encodeURIComponent(e)))}catch(e){return(0,F.Tb)(e),l((0,o.jsx)(I.Z,{defaultMessage:"One or more fetches have failed. Try again.",id:"anYsv8zeLR"}))}if(429===t.status)return l("Too many fetch attempts. Please wait and try again later.");if(!t.ok)return"fetch_unsupported_filetype"===(await t.json()).error.code?l():l((0,o.jsx)(I.Z,{defaultMessage:"Fetching failed for one of the URLs. Please try again.",id:"Evnb9+Woth"}));let n=await t.json();return n&&0!==Object.keys(n).length&&n.extracted_content?n:l((0,o.jsx)(I.Z,{defaultMessage:"Text extraction failed for one of the URLs.",id:"Pl7Qm8W+aN"}))},[d,r,l]),{value:m}=(0,u.FL)("hatch_use_web_fetcher");return(0,h.useCallback)(async s=>{if(!m)return;let l=[],i=(0,R.Yl)(s);if(0!==i.length&&a({numNewPotentialAttachments:i.length})){for(let t=0;t<i.length;t++){let a=i[t];if(e.some(e=>a.endsWith(e.file_name)))continue;n(!0);let s=await c(a);if(!s)return;l.push(s)}l.forEach(e=>(0,S.Ch)(e)),l.length>0&&t(e=>[...e,...l]),n(!1)}},[m,a,c,n,t,e])}(e,t,n,a),[r,d]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{let e=e=>{"Shift"===e.key&&d(!0)},t=e=>{"Shift"===e.key&&d(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),(0,h.useCallback)(e=>{var n,o,d;let c=null===(o=e.clipboardData)||void 0===o?void 0:null===(n=o.files)||void 0===n?void 0:n.length,u=null===(d=e.clipboardData)||void 0===d?void 0:d.getData("text/plain"),m=null==u?void 0:u.length;if(m&&!c){let e=(0,T.g)(u);e&&l(e)}if(c&&!m){a({newUploads:Array.from(e.clipboardData.files)})&&s(e.clipboardData.files),e.preventDefault();return}if(a({numNewPotentialAttachments:1,showError:!1})){if(i(u).catch(console.error),!m||u.length<4e3||r)return;e.preventDefault(),t(e=>{let t="paste.txt",n=1;for(;e.some(e=>e.file_name===t);)n+=1,t="paste-".concat(n,".txt");return[...e,{file_name:t,file_size:u.length,file_type:"txt",extracted_content:u}]})}},[a,t,i,s,l,r])}(K,H,ed,ec,eu,D()),ev=null!==(n=null==X?void 0:X.projectKnowledgebaseTokens)&&void 0!==n?n:0,[ey]=(0,U.X)({projectUuid:A,conversationUUID:null!==(a=null==X?void 0:X.id)&&void 0!==a?a:null,conversationTokensSoFar:null!==(s=null==X?void 0:X.tokensSoFar)&&void 0!==s?s:0,conversationFiles:null!==(l=null==X?void 0:X.files)&&void 0!==l?l:[],projectKnowledgebaseTokens:ev,input:M,attachments:K,syncSourceUuids:Y}),ej=(0,_.j)(A),{value:eb}=(0,u.FL)("test_gated_strings"),ew=(0,m.s)(),eM=i||0===M.length&&0===K.length&&0===V.length&&0===Y.length||eo||q||W||J||$||er||"will-exceed"===ey||ej||(null==X?void 0:X.isSampling)===!0,eC=(0,h.useCallback)(async()=>{!eM&&(await Q(),b&&b())},[eM,b,Q]),eN=(0,h.useCallback)(()=>{es(!0)},[es]),e_=(0,h.useCallback)(()=>{es(!1)},[es]),eS=(0,h.useCallback)(e=>{let t=e.target;"BUTTON"===t.tagName||t.closest("button")||t.closest("[role]")||t.closest("a")||t.closest("input")||t.closest("select")||t.closest("textarea")||en()},[en]),eE=(0,h.useRef)(null),eZ=(0,v.aP)(Y).map((e,t)=>{let{data:n}=e;return{syncSource:n,uuid:Y[t]}}),eI=(0,o.jsx)(x.M,{initial:!1,children:ef&&(0,o.jsx)(p.E.div,{className:"overflow-hidden rounded-b-2xl",initial:{height:0},animate:{height:"auto"},exit:{height:0},children:(0,o.jsx)(k,{isUploadingFile:eo,isUploadingSync:q||W,attachments:K,files:V,syncSourceResults:eZ,onRemoveAttachment:e=>{H(t=>t.filter((t,n)=>n!==e))},onRemoveFile:e=>{B(t=>t.filter((t,n)=>n!==e))},onRemoveSyncSource:e=>{ee(t=>t.filter(t=>t!==e))}})},"attachments")});return ew?(0,o.jsxs)(ek.vl,{placement:r,children:[(0,o.jsxs)(ny,{onPasteCapture:e=>{ea&&eg(e)},children:[(0,o.jsx)("input",{ref:eE,id:"chat-input-file-upload-".concat(r),"data-testid":"file-upload","aria-hidden":"true",tabIndex:-1,className:"absolute -z-10 h-0 w-0 overflow-hidden opacity-0 select-none",...em}),(0,o.jsx)("div",{className:"px-3 md:px-2",children:(0,o.jsx)(j.n,{placement:"bottom"})}),(0,o.jsxs)(ng,{onClick:eS,className:(0,f.Z)(ei&&et&&"animated-loading-background",ep?"transition-all duration-500 ring-1 ring-border-300/50 dark:ring-border-300/50":""),children:[(0,o.jsxs)("div",{className:"flex flex-col gap-3.5 m-3.5",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(N.E,{ref:el,prompt:M,setPrompt:z,tipTapEditorState:Z,setTipTapEditorState:P,onSubmit:eC,onFocus:eN,onBlur:e_,placement:r,placeholder:null!=d?d:ex?eb?(0,c.lF)({id:"spread_attempt_mind",intl:w}):w.formatMessage({defaultMessage:"How can I help you today?",id:"XLcM6WHfQR"}):eb?(0,c.lF)({id:"window_edge_kiwi",intl:w}):w.formatMessage({defaultMessage:"Reply to Claude...",id:"kSt28+RchS"}),fetchInputAutocompletion:eh}),ep&&M&&(0,o.jsx)(x.M,{children:(0,o.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 pointer-events-none overflow-hidden rounded",children:(0,o.jsx)(p.E.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-always-white/20 dark:via-always-white/10 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:1.5,ease:"easeInOut",repeat:1/0}})})})]}),(0,o.jsx)(e6,{placement:r,isDisabled:eM})]}),(0,o.jsx)(e9,{}),eI]}),"bottom"===r&&(0,o.jsx)(nv,{})]}),(0,o.jsx)(nm,{})]}):(0,o.jsxs)(ny,{children:[(0,o.jsx)(ng,{className:"bottom"===r?"h-[99px]":"h-[123px]"}),"bottom"===r&&(0,o.jsx)(nv,{})]})});nh.displayName="ChatInput";let ng=d.q.div(nf()),nv=d.q.div(nx()),ny=d.q.fieldset(np())},92935:function(e,t,n){n.d(t,{vl:function(){return X},Ln:function(){return Q},jT:function(){return J},Aj:function(){return $}});var a=n(27573),s=n(35919),l=n.n(s),i=n(7653),r=n(47216),o=n(53392),d=n(59821),c=n(32006),u=n(36667),m=n(1133),f=n(10228),x=n(98649),p=n(88755),h=n(43311),g=n(76203),v=n(40950),y=n(32559),j=n(2949),b=n(89111),w=n(51375),M=n(95586),k=n(22639),C=n(38622),N=n(64690),_=n(11776);let S=e=>{let{placement:t,actions:n,inputMenuIsOpen:s}=e,l=(0,v.Z)(),i=E({actions:n}),r=A({actions:n}),o=I({actions:n,inputMenuIsOpen:s}),d=Z({actions:n,inputMenuIsOpen:s}),c=T({actions:n});return[{key:x.Mm.UPLOAD,type:"button",icon:(0,a.jsx)(u.Pg,{size:16}),label:l.formatMessage({defaultMessage:"Upload a file",id:"Zc9xq9TzDD"}),onClick:()=>(0,_.CG)(t)},...i?[i]:[],...r?[r]:[],...o?[o]:[],...c,...d?[{key:"divider1",type:"divider",label:""},d]:[]]},E=e=>{let{actions:t}=e,n=(0,v.Z)();return(0,p.Q)()||(0,m.r3)()?null:{key:x.Mm.ADD_SCREENSHOT,type:"button",icon:(0,a.jsx)(u.V1,{size:16}),label:n.formatMessage({defaultMessage:"Take a screenshot",id:"aTaOpCB71M"}),onClick:t.onAddScreenshot}},Z=e=>{let{inputMenuIsOpen:t,actions:n}=e,s=(0,v.Z)(),l=(0,N.nF)(),{projectUuid:i,isProjectLocked:r}=(0,k.r)(),o=(0,M.U)(),{data:d}=(0,y.O3)({enabled:t&&o,limit:8}),{data:c}=(0,y.Yc)(i),m=(null==d?void 0:d.slice(0,8).map(e=>({key:e.uuid,type:"option",label:e.name,onClick:()=>n.onSelectProject(e.uuid),icon:(0,a.jsx)(u.pj,{size:16}),isChecked:e.uuid===i})))||[];if(r||!o)return null;let f=s.formatMessage({defaultMessage:"Use a project",id:"H/dsl+Px2v"});return{key:x.Mm.PROJECTS,type:"optionGroup",icon:(0,a.jsx)(u.pj,{size:16}),label:f,secondaryText:null==c?void 0:c.name,children:[...l?[]:[{type:"back",key:"projects-back",label:f}],...m,{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,a.jsx)(u.v3,{size:16}),label:s.formatMessage({defaultMessage:"Start a new project",id:"0y7bg6nA29"}),onClick:()=>n.onCreateProject(!1),nonSearchable:!0}],indicatorActive:!!c}},I=e=>{let{actions:t,inputMenuIsOpen:n}=e,s=(0,v.Z)(),l=(0,N.nF)(),i=(0,j.Aj)(),{isDriveAuthenticated:r,initDriveAuth:o}=(0,j.nC)(),{recentDriveDocs:d,isLoading:u}=(0,j.td)(n);if(!i)return null;let m=s.formatMessage({defaultMessage:"Add from {drive}",id:"hwJ50OkM/9"},{drive:"Google Drive"}),p={key:x.Mm.DRIVE,icon:(0,a.jsx)(c.j0,{type:f.Fg.GDRIVE,size:16}),label:m};if(!r)return{...p,type:"button",isExternal:!0,secondaryText:s.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:o};let h=u?[{key:"drive-loading",type:"button",label:s.formatMessage({defaultMessage:"{drive} documents loading...",id:"PjuSZ/7RIb"},{drive:"Drive"}),isDisabled:!0}]:d.length?d.slice(0,8).map(e=>{var n;return{key:e.uri,type:"button",label:null!==(n=e.title)&&void 0!==n?n:"Untitled",icon:(0,a.jsx)(c.j0,{type:f.Fg.GDRIVE,variant:c.cT.DOCS,size:16}),onClick:()=>{t.createDriveSyncSource(e.uri)}}}):[{key:"empty",type:"button",label:s.formatMessage({defaultMessage:"No recent {drive} documents",id:"XepM9W1Mo/"},{drive:"Drive"}),isDisabled:!0}];return{...p,type:"buttonGroup",children:[...l?[]:[{type:"back",key:"drive-back",label:m}],...h]}},A=e=>{let{actions:t}=e,n=(0,v.Z)();return(0,b.H7)()?{key:x.Mm.GITHUB,type:"button",icon:(0,a.jsx)(c.j0,{type:f.Fg.GITHUB,size:16}),label:n.formatMessage({defaultMessage:"Add from {github}",id:"h3J3E4bRfj"},{github:"GitHub"}),onClick:t.openGithubModal}:null},T=e=>{let{actions:t}=e,n=(0,v.Z)(),{servers:s}=(0,w.cH)(),l=(0,C.ff)(),i=(0,C.Vr)();return s.filter(e=>e.client&&(e.prompts.length>0||e.resources.length>0)).map(e=>{let s=e.prompts.map(n=>({key:"prompt-".concat(e.name,"-").concat(n.name),type:"button",icon:(0,a.jsx)(h.N,{size:16}),label:n.name,onClick:()=>{var a;return(null===(a=n.arguments)||void 0===a?void 0:a.length)?t.onEnterPromptArguments(e.client,n):void i(e.client,n,{})}})),r=e.resources.map(t=>({key:"resource-".concat(e.name,"-").concat(t.uri),type:"button",icon:(0,a.jsx)(g.$,{size:16}),label:t.name,onClick:()=>void l(e.client,t)}));return{key:"mcp-server-".concat(e.name),type:"buttonGroup",label:n.formatMessage({defaultMessage:"Add from {server}",id:"qEj6u51OfR"},{server:e.name}),icon:(0,a.jsx)(d.s,{url:e.url,fallbackSvg:(0,a.jsx)(o._,{letter:e.name,size:16}),size:16}),children:[...s,...r]}})};var z=n(81695),D=n(81342);let R=e=>{let{currentItems:t,inputMenuIsOpen:n,setInputMenuIsOpen:a,inputMenuSearchQuery:s,setInputMenuSearchQuery:l,path:r,handleUpdatePath:o,highlightedItemKey:d,setHighlightedItemKey:c}=e,u=(0,z.useRouter)(),m=(0,i.useCallback)(e=>{if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type)a(!0),o(e.key,!0);else if("button"===e.type||"switch"===e.type||"toggle"===e.type||"option"===e.type){var t;null===(t=e.onClick)||void 0===t||t.call(e)}},[a,o]),f=(0,i.useCallback)(e=>{r&&(null==e||e.preventDefault(),o(null),c(r),(0,D.q)())},[r,c,o]),x=(0,i.useCallback)(e=>{let n;let a=t.filter(e=>!["subheader","divider"].includes(e.type)&&!e.isDisabled&&!e.menuItemHidden),s=a.findIndex(e=>{let{key:t}=e;return t===d});n="ArrowUp"===e?s>0?s-1:a.length-1:s<a.length-1?s+1:0,c(a[n].key)},[t,d,c]),p=(0,i.useCallback)(e=>{var t,s,i;if(!n){m(e);return}if(!e.isDisabled){if("pro"===e.tag){u.push("/upgrade/pro");return}if(l(""),"back"===e.type){f();return}if("button"===e.type){null===(t=e.onClick)||void 0===t||t.call(e),e.skipCloseOnClick||a(!1);return}if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type){o(e.key),c(null),(0,D.q)();return}"option"!==e.type||(null===(s=e.onClick)||void 0===s||s.call(e),e.skipCloseOnClick||a(!1,{withDelay:!0})),("toggleAll"===e.type||"toggle"===e.type||"switch"===e.type)&&(null===(i=e.onClick)||void 0===i||i.call(e),(0,D.q)())}},[f,m,o,n,l,u,a,c]),h=(0,i.useCallback)((e,n)=>{if(!d)return;let a=t.find(e=>{let{key:t}=e;return t===d});a&&("Enter"===e||["optionGroup","toggleGroup","buttonGroup"].includes(a.type))&&(n.preventDefault(),p(a))},[d,t,p]);return(0,i.useEffect)(()=>{if(!n)return;let e=e=>{"Tab"===e.key?e.preventDefault():"Escape"===e.key?(e.preventDefault(),a(!1)):"ArrowUp"===e.key||"ArrowDown"===e.key?(e.preventDefault(),x(e.key)):"ArrowRight"===e.key||"Enter"===e.key?h(e.key,e):"ArrowLeft"!==e.key||s||f(e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,a,s,x,h,f]),{handleClickItem:p,handleBack:f}};var O=n(67578),L=n(86973),F=n(29860),P=n.n(F);let G={includeScore:!0,isCaseSensitive:!1,ignoreLocation:!0,threshold:.4},U=e=>{let{actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:s,pathItems:l,path:r,menuType:o}=e,d=(0,v.Z)(),c=(0,i.useRef)(n),{handleSearchDrive:u,searchedDriveItems:m}=K({path:r,actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:s,menuType:o}),{handleSearchProjects:f,searchedProjectItems:x}=B({path:r,actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:s,menuType:o,pathItems:l}),{handleFilterMenuItems:p,filteredMenuItems:h}=H({path:r,inputMenuSearchQuery:n,pathItems:l}),g=(0,i.useCallback)(()=>{p(),f(),u()},[p,f,u]),y=(0,i.useMemo)(()=>P()(()=>{g()},100),[g]);return((0,i.useEffect)(()=>{if(n&&s&&n!==c.current)return c.current=n,y(),()=>{y.cancel()}},[s,n,y]),h.length||x.length||m.length)?[h,x,m].reduce((e,t,n)=>[...e,...e.length&&t.length?[{key:"divider".concat(n+1),type:"divider",label:""}]:[],...t],[]):[{key:"loading",type:"button",label:d.formatMessage({defaultMessage:"No results found",id:"hX5PAbCTOR"}),icon:(0,a.jsx)(O.Y,{size:16}),onClick:()=>void 0,isDisabled:!0}]},H=e=>{let{path:t,inputMenuSearchQuery:n,pathItems:a}=e,s=a.filter(e=>{let{menuItemHidden:t}=e;return!t}),[l,r]=(0,i.useState)([]);return"projects"!==t&&"drive"!==t?{handleFilterMenuItems:()=>{let e=n.toLowerCase();if(!e)return s;let t=[];for(let e of s)t.push(e),!e.isDisabled&&"projects"!==e.key&&"drive"!==e.key&&"children"in e&&e.children&&t.push(...e.children);r(t.filter(t=>!t.nonSearchable&&"toggleAll"!==t.type&&"back"!==t.type&&"divider"!==t.type&&"string"==typeof t.label&&t.label.toLowerCase().includes(e)).slice(0,7))},filteredMenuItems:l}:{handleFilterMenuItems:()=>[],filteredMenuItems:[]}},B=e=>{let{path:t,actions:n,inputMenuSearchQuery:s,inputMenuIsOpen:l,menuType:r,pathItems:o}=e,d="projects",c=(0,M.U)(),m=o.map(e=>{let{key:t}=e;return t}).indexOf("projects")>-1||"projects"===t,f=!!(s&&m&&(t===d||!t)&&l&&c&&"plus"===r),[x,p]=(0,i.useState)([]),{data:h}=(0,y.O3)({enabled:f,limit:y.YJ}),g=(0,i.useMemo)(()=>new L.Z(h||[],{...G,keys:["name","description"]}),[h]);return f?{handleSearchProjects:()=>{let e=s.toLowerCase();if(!e||!h)return[];p(g.search(e,{limit:t===d?10:5}).map(e=>({type:"button",key:e.item.uuid,label:e.item.name,icon:(0,a.jsx)(u.pj,{size:16}),onClick:()=>n.onSelectProject(e.item.uuid)})))},searchedProjectItems:x}:{handleSearchProjects:()=>[],searchedProjectItems:[]}},K=e=>{let{path:t,actions:n,inputMenuSearchQuery:s,inputMenuIsOpen:l,menuType:r}=e,o="drive",d=(t===o||!t)&&l&&"plus"===r,u=(0,j.Aj)(),[m,x]=(0,i.useState)([]),{recentDriveDocs:p}=(0,j.td)(d),h=(0,i.useMemo)(()=>new L.Z(p,{...G,keys:["title"]}),[p]);return u&&d?{handleSearchDrive:()=>{let e=s.toLowerCase();if(!e||!p)return[];x(h.search(e,{limit:t===o?10:5}).map(e=>({key:e.item.uri,type:"button",label:e.item.title||"",icon:(0,a.jsx)(c.j0,{type:f.Fg.GDRIVE,variant:c.cT.DOCS,size:16}),onClick:()=>{n.createDriveSyncSource(e.item.uri)}})))},searchedDriveItems:m}:{handleSearchDrive:()=>[],searchedDriveItems:[]}},V={path:null,inputMenuSearchQuery:"",setInputMenuSearchQuery:l(),inputMenuIsOpen:!1,setInputMenuIsOpen:l(),menuView:{rootItems:[],currentItems:[]},handleClickItem:l(),handleBack:l(),highlightedItemKey:null,setHighlightedItemKey:l(),animationDirection:"none"},Y={...V,styleModalOpenWithScreen:null,setStyleModalOpenWithScreen:l(),createProjectModalIsOpen:null,setCreateProjectModalIsOpen:l(),githubModalIsOpen:!1,setGithubModalIsOpen:l(),gmailAuthModalIsOpen:!1,setGmailAuthModalIsOpen:l(),createPromptArgumentModalIsOpen:null,setCreatePromptArgumentModalIsOpen:l()},q=(0,i.createContext)(Y),W=(0,i.createContext)(V),Q=e=>{let{actions:t,rootItems:n,menuType:a,inputMenuIsOpen:s,setInputMenuIsOpen:l}=e,r=(0,i.useRef)(null),[o,d]=(0,i.useState)(null),[c,u]=(0,i.useState)(null),[m,f]=(0,i.useState)(""),x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!s&&e){l(!0);return}if(s&&!e){f("");let e=()=>{var e;p(null,!0),u(null),l(!1),null===(e=document.getElementById("input-".concat(a,"-menu-trigger")))||void 0===e||e.focus()};t.withDelay?setTimeout(e,200):e()}},p=(e,t)=>{t?r.current=e:r.current=o,d(e)},h=(()=>{if(o){let e=n.find(e=>e.key===o);if(e&&"children"in e)return e.children}return n})(),g=U({actions:t,inputMenuSearchQuery:m,inputMenuIsOpen:s,pathItems:h,path:o,menuType:a}),v=m.trim().length?g:h,{handleClickItem:y,handleBack:j}=R({currentItems:v,inputMenuIsOpen:s,setInputMenuIsOpen:x,inputMenuSearchQuery:m,setInputMenuSearchQuery:f,path:o,handleUpdatePath:p,highlightedItemKey:c,setHighlightedItemKey:u}),b=r.current&&!o?"back":!r.current&&o?"forward":"none";return{path:o,inputMenuSearchQuery:m,setInputMenuSearchQuery:f,inputMenuIsOpen:s,setInputMenuIsOpen:x,menuView:{rootItems:n,currentItems:v},handleClickItem:y,handleBack:j,highlightedItemKey:c,setHighlightedItemKey:u,animationDirection:b}};function X(e){let{placement:t,children:n}=e,[s,l]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)(null),[m,f]=(0,i.useState)(!1),[x,p]=(0,i.useState)(!1),[h,g]=(0,i.useState)(null),[v,y]=(0,i.useState)(null),j=(0,_.j$)({setStyleModalOpenWithScreen:g,setCreateProjectModalIsOpen:u,setGithubModalIsOpen:f,setGmailAuthModalIsOpen:p,setCreatePromptArgumentModalIsOpen:y}),b=S({placement:t,actions:j,inputMenuIsOpen:s}),w=Q({actions:j,rootItems:b,menuType:"plus",inputMenuIsOpen:s,setInputMenuIsOpen:l}),M=(0,r.aI)({actions:j}),k=Q({actions:j,rootItems:M,menuType:"tools",inputMenuIsOpen:o,setInputMenuIsOpen:d});return(0,a.jsx)(q.Provider,{value:{...w,styleModalOpenWithScreen:h,setStyleModalOpenWithScreen:g,createProjectModalIsOpen:c,setCreateProjectModalIsOpen:u,githubModalIsOpen:m,setGithubModalIsOpen:f,gmailAuthModalIsOpen:x,setGmailAuthModalIsOpen:p,createPromptArgumentModalIsOpen:v,setCreatePromptArgumentModalIsOpen:y},children:(0,a.jsx)(W.Provider,{value:k,children:n})})}function J(){return(0,i.useContext)(q)}function $(){return(0,i.useContext)(W)}},89803:function(e,t,n){n.d(t,{a:function(){return u}});var a=n(27573),s=n(1133),l=n(98649),i=n(47666),r=n(19186),o=n(10607),d=n(40950),c=n(15900);let u=e=>{let{path:t,inputMenuSearchQuery:n,setInputMenuSearchQuery:u,handleBack:m,className:f}=e,x=(0,d.Z)(),p=(0,s.r3)(),h={[l.Mm.DRIVE]:x.formatMessage({defaultMessage:"Search Google Drive",id:"1bbXc6Z3S1"}),[l.Mm.PROJECTS]:x.formatMessage({defaultMessage:"Search projects",id:"doPT7U8q21"}),[l.Mm.STYLES]:x.formatMessage({defaultMessage:"Search styles",id:"9oQ0JkPwFY"})},g=t&&t in h?h[t]:x.formatMessage({defaultMessage:"Search menu",id:"lL4HM3zEqr"}),v=null===t||!!n.trim().length;return(0,a.jsxs)("div",{className:(0,o.Z)("flex flex-row items-center gap-2.5 px-1.5 w-full rounded-md h-[2rem]",f),children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(r.Y,{size:16,className:(0,o.Z)("text-text-500/50 transition-opacity",v?"opacity-100":"opacity-0")}),(0,a.jsx)("button",{onClick:m,className:(0,o.Z)("transition-opacity text-text-500 hover:text-text-100 absolute left-0 top-0",v?"opacity-0":"opacity-100"),disabled:v,children:(0,a.jsx)(i.X,{size:16})})]}),(0,a.jsx)("input",{autoFocus:!p,id:c.d,className:"block bg-transparent hide-focus-ring leading-6 placeholder:text-text-500/70 text-[15px] text-text-300 w-full",placeholder:g,value:n,onChange:e=>u(e.target.value)})]})}},15900:function(e,t,n){n.d(t,{d:function(){return a}});let a="chat-input-menu-search-input"},81342:function(e,t,n){n.d(t,{q:function(){return l}});var a=n(1133),s=n(15900);let l=()=>{if((0,a.r3)())return;let e=document.getElementById(s.d);e&&e.focus()}},64690:function(e,t,n){n.d(t,{jo:function(){return r},nF:function(){return o}});var a=n(27218),s=n(51375),l=n(46200);let i=()=>{let{servers:e}=(0,s.cH)();return e.length>0},r=()=>{let e=(0,a.rW)(),t=(0,l.uH)(),n=i();return!e&&!t&&!n},o=()=>{let e=(0,a.rW)(),t=i();return e||t}},47216:function(e,t,n){n.d(t,{PQ:function(){return B},aI:function(){return A}});var a=n(27573),s=n(53392),l=n(59821),i=n(71817),r=n(76220),o=n(27218),d=n(32006),c=n(36667),u=n(87033),m=n(10228),f=n(98649),x=n(24167),p=n(20253),h=n(58183),g=n(7653),v=n(40950),y=n(94449),j=n(2949),b=n(69672),w=n(51375),M=n(85465),k=n(19132),C=n(46200),N=n(22639),_=n(40051),S=n(89368),E=n(64690);let Z="inputMenu",I=()=>({isDisabled:!0,tooltip:(0,v.Z)().formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"}),isChecked:!1}),A=e=>{let{actions:t}=e,n=(0,v.Z)(),s=(0,y.ij)(),l=(0,o.ZJ)(),r=(0,o.ue)(),{conversation:d,model:c}=(0,N.r)(),u=(0,i.wN)((null==d?void 0:d.id)||null),m=null!=c?c:u,f=T({actions:t,currentModel:m}),p=H(),h=L({actions:t}),g=F({actions:t}),j=P({currentModel:m}),b=G();if((0,E.jo)())return h;let w=[...g?[g]:[],...j?[j]:[],...b?[b]:[]];f.length&&(w=w.concat([...w.length?[{key:"divider1",type:"divider",label:""}]:[],...f]));let M=s&&(l||r);return(p.length||M)&&(w=w.concat([...w.length?[{key:"divider2",type:"divider",label:""}]:[],...p,...M?[{key:"addIntegrations",type:"button",icon:(0,a.jsx)(x.O,{size:16}),label:n.formatMessage({defaultMessage:"Add integrations",id:"LPGTTQJqQF"}),isExternal:!0,onClick:()=>{window.location.href="/settings/integrations"}}]:[]])),w},T=e=>{let{actions:t,currentModel:n}=e,a=z({currentModel:n}),s=D({currentModel:n}),l=O({actions:t,currentModel:n}),i=R({currentModel:n});return[...a?[a]:[],...s?[s]:[],...l?[l]:[],...i?[i]:[]]},z=e=>{let{currentModel:t}=e,n=(0,v.Z)(),{conversation:s}=(0,N.r)(),l=(0,C.j9)(t),i=(0,C.uH)(),r=(0,C.FD)(),o=(0,C.qS)(s),{toggleConversationSetting:d}=(0,M.M0)(),u=I(),m=K("web_search");if(!i)return null;let f=o&&l;return{key:"webSearch",type:"switch",label:n.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,a.jsx)(c.TH,{size:16}),isChecked:f,onClick:()=>d("enabled_web_search",!f),tag:m,...r?l?null:u:{isDisabled:!0,tooltip:n.formatMessage({defaultMessage:"This feature has been disabled by your administrator.",id:"Jpvq2WYysx"})}}},D=e=>{let{currentModel:t}=e,n=(0,v.Z)(),{conversation:s}=(0,N.r)(),{toggleConversationSetting:l}=(0,M.M0)(),i=(0,j.ez)(),o=(0,r.E6)()(t,"gsuite_tools"),c=(0,j.EU)(s),{isDriveAuthenticated:u,initDriveAuth:m}=(0,j.nC)({callerIdentifier:Z,handleAuthSuccess:()=>{l("enabled_bananagrams",!0)}}),f=I(),x=K("drive_search");if(!i)return null;let p={key:"driveSearch",icon:(0,a.jsx)(d.k6,{size:16}),label:n.formatMessage({defaultMessage:"{drive} search",id:"nUykp097rV"},{drive:"Drive"})};if(!u)return{...p,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:m,...o?null:f};let h=u&&c;return{...p,type:"switch",isChecked:h,onClick:()=>{l("enabled_bananagrams",!h)},tag:x,...o?null:f}},R=e=>{let{currentModel:t}=e,n=(0,v.Z)(),{conversation:s}=(0,N.r)(),{toggleConversationSetting:l}=(0,M.M0)(),i=(0,k.te)(m.Fg.GCAL),o=(0,r.E6)()(t,"gsuite_tools"),c=(0,k.j5)(m.Fg.GCAL,s),{isAuthenticated:u,startAuth:f}=(0,k.QD)(m.Fg.GCAL,{callerIdentifier:Z,handleAuthSuccess:()=>{l("enabled_foccacia",!0)}}),x=I(),p=K("calendar_search");if(!i)return null;let h={key:"gcal",label:n.formatMessage({defaultMessage:"Calendar search",id:"b7aUhdL5nd"}),icon:(0,a.jsx)(d.tB,{size:16})};if(!u)return{...h,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:f,...o?null:x};let g=u&&c;return{...h,type:"switch",isChecked:g,onClick:()=>{l("enabled_foccacia",!g)},tag:p,...o?null:x}},O=e=>{let{actions:t,currentModel:n}=e,s=(0,v.Z)(),{conversation:l}=(0,N.r)(),{toggleConversationSetting:i}=(0,M.M0)(),o=(0,k.te)(m.Fg.GMAIL),c=(0,r.E6)()(n,"gsuite_tools"),u=(0,k.j5)(m.Fg.GMAIL,l),f=I(),x=K("gmail_search"),{isAuthenticated:p}=(0,k.QD)(m.Fg.GMAIL,{callerIdentifier:Z,handleAuthSuccess:()=>{i("enabled_sourdough",!0)}});if(!o)return null;let h={key:"gmail",label:s.formatMessage({defaultMessage:"Gmail search",id:"v0qteoUCm+"}),icon:(0,a.jsx)(d.W9,{size:16})};if(!p)return{...h,type:"button",isExternal:!0,secondaryText:s.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:()=>{t.openGmailAuthModal()},...c?null:f};let g=p&&u;return{...h,type:"switch",isChecked:g,onClick:()=>{i("enabled_sourdough",!g)},tag:x,...c?null:f}},L=e=>{let{actions:t}=e,n=(0,v.Z)(),{personalizedStyle:s}=(0,N.r)(),{personalizedStyleOptions:l}=(0,_.O)();return[...l.map(e=>{let n=(null==s?void 0:s.key)===e.key;return{key:e.key,type:"option",label:e.name,icon:(0,a.jsx)(c.z0,{size:16}),onClick:()=>{n?t.onStyleChange("Default"):t.onStyleChange(e.key)},isChecked:n}}),{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,a.jsx)(c.v3,{size:16}),label:n.formatMessage({defaultMessage:"Create & edit styles",id:"cY+Fgc8HvE"}),onClick:t.openStyleModal,nonSearchable:!0}]},F=e=>{let{actions:t}=e,n=(0,v.Z)(),s=(0,E.nF)(),{personalizedStyle:l}=(0,N.r)(),i=L({actions:t}),r=n.formatMessage({defaultMessage:"Use style",id:"f7VY0ldE+0"});return{key:f.Mm.STYLES,type:"optionGroup",icon:(0,a.jsx)(c.z0,{size:16}),label:r,secondaryText:(null==l?void 0:l.isDefault)?void 0:null==l?void 0:l.name,children:[...s?[]:[{type:"back",key:"styles-back",label:r}],...i],indicatorActive:l&&"Default"!==l.key}},P=e=>{let{currentModel:t}=e,n=(0,v.Z)(),s=(0,M.gE)("paprika_mode"),l=(0,b.F)(),i=(0,b.a)()(t),{toggleConversationSetting:r}=(0,M.M0)(),{value:o}=(0,u.FL)("model_selector_enabled"),d=I();if(!l||!o)return null;let m=n.formatMessage({defaultMessage:"Allow Claude to think out loud for longer for trickier questions and challenges.",id:"bbgQqH7Grg"}),x={key:f.Mm.EXTENDED_THINKING,type:"switch",label:n.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"}),icon:(0,a.jsx)(c.U,{size:16}),isChecked:!!s,indicatorActive:!!s};return i?{...x,onClick:()=>{r("paprika_mode",s?null:"extended")},tooltip:m,tooltipImage:{src:"/images/feature-preview/extended-thinking.png",width:200,height:108}}:{...x,...d}},G=()=>{(0,S.N)(),(0,M.gE)("enabled_saffron");let{toggleConversationSetting:e}=(0,M.M0)();return null},U=e=>{let{showConnectAction:t,mcpToolsSetting:n,toggleMcpToolEnabled:i,remoteOnly:r}=e,o=(0,v.Z)(),{servers:d}=(0,w.cH)(),c=(0,w.si)();return d.filter(e=>(!!e.isConnected||!!e.isAuthless||!!e.isLoading||!!t)&&(!r||"remote"===e.type)).map(e=>{let t={key:e.uuid,label:e.name,icon:(0,a.jsx)(l.s,{url:e.url,fallbackSvg:(0,a.jsx)(s._,{letter:e.name,size:16}),size:16})};if(!e.isConnected&&!e.isAuthless&&!e.isLoading)return{...t,type:"button",isExternal:!0,secondaryText:o.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:()=>c(e)};let r=e.tools.map(t=>{let l=(0,w.q)(e.uuid,t.name),r=!1!==n[l];return{key:l,type:"switch",label:t.name,icon:(0,a.jsx)(s._,{letter:t.name,size:16}),isChecked:r,onClick:()=>{i(l,!r)}}}),d=r.filter(e=>"switch"===e.type&&e.isChecked).length,u=d>0;return r.length>1?r.unshift({key:"select-all",type:"switch",label:u?o.formatMessage({defaultMessage:"Disable all tools",id:"8A9N39nihk"}):o.formatMessage({defaultMessage:"Enable all tools",id:"x4/g36jIjW"}),icon:(0,a.jsx)(s.e,{letter:e.tools[0].name,size:16}),onClick:()=>{i(e.tools.map(t=>(0,w.q)(e.uuid,t.name)),!u)},isChecked:u,skipCloseOnClick:!0,nonSearchable:!0},{key:"divider1",type:"divider",label:""}):0===r.length&&r.push({key:"empty",type:"button",label:o.formatMessage({defaultMessage:"No tools available",id:"+XSkrzcF/0"}),icon:(0,a.jsx)(p.V,{size:16}),onClick:()=>void 0,isDisabled:!0}),{...t,type:"toggleGroup",enabledCount:d,children:r}})},H=()=>{var e;let t=null!==(e=(0,M.gE)("enabled_mcp_tools"))&&void 0!==e?e:{},{toggleMcpToolEnabled:n}=(0,w.$Y)();return U({showConnectAction:!0,mcpToolsSetting:t,toggleMcpToolEnabled:n})},B=()=>{var e;let{servers:t}=(0,w.cH)(),n=(0,g.useMemo)(()=>t.filter(e=>"remote"===e.type),[t]),a=null!==(e=(0,M.gE)("enabled_mcp_tools"))&&void 0!==e?e:{},[s,l]=(0,g.useState)(()=>{let e=new Set(n.map(e=>e.uuid));return Object.fromEntries(Object.entries(a).filter(t=>{let[n]=t,a=n.split(":")[0];return e.has(a)}))});return{menuOptions:U({showConnectAction:!1,mcpToolsSetting:s,toggleMcpToolEnabled:function(e,t){l(n=>({...n,...Array.isArray(e)?Object.fromEntries(e.map(e=>[e,t])):{[e]:t}}))},remoteOnly:!0}),getEnabledRemoteTools:()=>{let e=[];for(let t of n)for(let n of t.tools)!1!==s[(0,w.q)(t.uuid,n.name)]&&e.push({tool_name:n.name,server_uuid:t.uuid});return e}}},K=e=>(0,h.useDynamicConfig)("claude_ai_beta_tools").get("beta_tools",[]).includes(e)?"beta":void 0},11776:function(e,t,n){async function a(e){let t;let n="CaptureController"in window?new CaptureController:null;null==n||n.setFocusBehavior("no-focus-change");try{t=await navigator.mediaDevices.getDisplayMedia({video:!0,controller:n})}catch(e){if(e instanceof DOMException&&"NotAllowedError"===e.name)return null;throw e}let a=document.createElement("video");a.srcObject=t,await new Promise((e,t)=>{a.onloadedmetadata=()=>{a.play().then(e,t)}});let s=document.createElement("canvas");if(e){let t=Math.min(e.width/Math.min(a.videoWidth,e.width),e.height/Math.min(a.videoHeight,e.height));s.width=a.videoWidth*t,s.height=a.videoHeight*t}else s.width=a.videoWidth,s.height=a.videoHeight;let l=s.getContext("2d");if(!l)throw Error("Could not create 2D context");l.drawImage(a,0,0,s.width,s.height);let i=s.toDataURL("image/png");return t.getTracks().forEach(e=>e.stop()),{imageDataUrl:i}}n.d(t,{CG:function(){return j},jQ:function(){return M},bV:function(){return b},j$:function(){return v}});var s=n(3053),l=n(27895),i=n(42147),r=n(10228),o=n(45144),d=n(40950),c=n(66605),u=n(2949),m=n(89111),f=n(22639),x=n(40051),p=n(4746),h=n(64243),g=n(56767);let v=e=>{let{setStyleModalOpenWithScreen:t,setCreateProjectModalIsOpen:n,setGithubModalIsOpen:a,setGmailAuthModalIsOpen:s,setCreatePromptArgumentModalIsOpen:l}=e,r=w(),o=M(),d=b(),{openFeaturePreviewModal:c}=(0,p.h9)(),{checkIsGithubAuthenticated:f,initGithubAuth:x}=(0,m.Yn)(),{initDriveAuth:h}=(0,u.nC)();return{onAddScreenshot:()=>{r()},openGithubModal:()=>{f().then(e=>{if(!e){x();return}a(!0)})},openGmailAuthModal:()=>{s(!0)},initDriveAuth:h,createDriveSyncSource:y(),onStyleChange:e=>{o(e)},openStyleModal:()=>{t(i.b.LIST)},onSelectProject:d,onCreateProject:e=>{n({isOpen:!0,moveAttachments:e})},openFeaturePreviewModal:c,onEnterPromptArguments:(e,t)=>{l({isOpen:!0,client:e,prompt:t})}}},y=()=>{let{addError:e}=(0,l.e)(),{setIsUploadingDriveSync:t,setSyncSourceUuids:n}=(0,f.r)(),{mutate:a}=(0,c.cE)({onMutate:()=>{t(!0)},onSuccess:e=>{t(!1),n(t=>[...t,e.uuid])},onError:n=>{t(!1),e((0,g.A)(n))},meta:{noToast:!0}});return e=>a({sync_source_type:r.Fg.GDRIVE,sync_source_config:{uri:e}})},j=e=>{var t;null===(t=document.getElementById("chat-input-file-upload-".concat(e)))||void 0===t||t.click()},b=()=>{let{projectUuid:e,setProjectUuid:t}=(0,f.r)();return n=>{e===n?t(void 0):t(n)}},w=()=>{let{addError:e}=(0,l.e)(),t=(0,d.Z)(),{handleUpload:n}=(0,f.r)();return async()=>{let s=null;try{s=await a({width:1568,height:1568})}catch(n){(0,o.Tb)(n),e(t.formatMessage({defaultMessage:"Could not capture screen",id:"GT8HkzCHoM"}))}if(!s)return;let l=new File([await fetch(s.imageDataUrl).then(e=>e.blob())],"screenshot.png",{type:"image/png"});await n([l])}},M=()=>{let{setPersonalizedStyle:e}=(0,f.r)(),t=(0,s.z$)(),{personalizedStyleOptions:n,setStoredStyle:a}=(0,x.O)();return s=>{let l=n.find(e=>e.key===s);if(!l)return;e(l);let i=(0,h.X)(l);a({styleKey:i,timestamp:new Date}),t.track({event_key:"styles.selected",style_key:i})}}},58417:function(e,t,n){n.d(t,{n:function(){return eR},c:function(){return eD}});var a=n(27573),s=n(76220),l=n(6766),i=n(27218),r=n(6385),o=n(53949),d=n(87033),c=n(10228),u=n(88755),m=n(97695),f=n(7653),x=n(45790),p=n(8905),h=n(92676),g=n(2949),v=n(19132),y=n(61377),j=n(23098),b=n(47082),w=n(10607),M=n(8927),k=n(68425);function C(e){let{warning:t,placement:n,theme:s}=e;return(0,a.jsx)(M.M,{children:t&&(0,a.jsx)(k.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:(0,a.jsx)("div",{className:(0,w.Z)("border-0.5 relative z-[5] px-3.5","bottom"===n?"-mb-1 rounded-t-xl border-b-0 pb-2.5 pt-2":"-mb-1 -mt-1 rounded-b-xl border-t-0 pb-2 pt-2.5",{"bg-danger-900 border-danger-100/20":"danger"===s,"text-text-200 border-accent-pro-100/20 bg-accent-pro-900":"pro"===s,"bg-bg-200 border-border-300":"info"===s}),children:t})})})}var N=n(22639),_=n(70354),S=n(58183),E=n(43290),Z=n(67311),I=n(49185),A=n(27895),T=n(11607),z=n(52939),D=n(29670),R=n(60705),O=n(33209),L=n(2723),F=n(67587),P=n(32151),G=n(5984);function U(e){let{onReady:t,children:n,onSuccess:s}=e,l=(0,P.useStripe)(),r=(0,P.useElements)(),{account:o}=(0,i.t)(),[d,c]=(0,f.useState)(null),[u,m]=(0,f.useState)(!1),[h,g]=(0,f.useState)(!1),{mutateAsync:v}=(0,p.RF)(),y=async()=>{if(!u&&l&&r){m(!0);try{let e=await r.submit();if(e.error){e.error.message&&c(e.error.message);return}let t=await v(),{error:n}=await l.confirmPayment({elements:r,clientSecret:t.clientSecret,redirect:"if_required"});(null==n?void 0:n.message)&&"validation_error"!==n.type&&c(n.message),n||s()}catch(e){c(e.message)}finally{m(!1)}}};return(0,a.jsxs)(G.l0,{onSubmit:()=>{u||y()},children:[(0,a.jsx)(P.PaymentElement,{id:"payment-element",options:{readOnly:u,layout:"tabs",terms:{card:"never"},defaultValues:{billingDetails:{email:null==o?void 0:o.email_address,name:null==o?void 0:o.full_name}}},onReady:()=>{g(!0),t&&t()}}),d&&(0,a.jsx)("div",{className:"text-danger-000 mt-4",id:"payment-message",children:d}),(0,a.jsxs)("div",{className:"mt-5 flex flex-row flex-wrap items-center justify-end gap-3",children:[n,(0,a.jsx)(_.z,{type:"submit",loading:u,variant:"flat",className:"bg-accent-pro-100 hover:bg-accent-pro-200 w-full py-6",disabled:!h,children:(0,a.jsx)(x.Z,{defaultMessage:"Confirm payment",id:"Dja1nAdMHW"})})]}),(0,a.jsx)("div",{className:"mt-3 text-text-500 text-sm text-center",children:(0,a.jsx)(x.Z,{defaultMessage:"By providing your payment information, you allow Anthropic to charge your card in the amount above. Purchase non-refundable.",id:"0L0VGgMTRs"})})]})}function H(e){let{amount:t,currency:n,children:s,className:l,onSuccess:i}=e,o=(0,O.x2)(),[d,c]=(0,f.useState)(!0),{theme:u,mode:m}=(0,F.F)(),x=(0,R.f)().get(r.cn.COLOR_MODE),p={fontSizeBase:"16px",colorBackground:(0,L.J)(u,m,x,"bg-000"),colorText:(0,L.J)(u,m,x,"text-100")},h={mode:"payment",amount:t,currency:null==n?void 0:n.toLowerCase(),payment_method_types:["card","link"],loader:"never",appearance:{theme:"stripe",variables:p}};return(0,a.jsxs)("div",{className:(0,w.Z)("relative",l),children:[(0,a.jsx)("div",{className:(0,w.Z)("w-full pt-1 transition-opacity duration-1000",{"opacity-0":d}),children:(0,a.jsx)(P.Elements,{options:h,stripe:o,children:(0,a.jsx)(U,{onReady:()=>c(!1),onSuccess:i,children:s})})}),d&&(0,a.jsx)(B,{})]})}let B=()=>(0,a.jsx)("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:(0,a.jsx)(T.Loading,{})});function K(e){var t,n;let s,{isOpen:l,onClose:r,conversationUUID:o}=e,d=(0,A.e)(),{activeOrganization:c}=(0,i.t)(),u=(0,I.n)(),m=(0,f.useCallback)(()=>{d.addSuccess((0,a.jsx)(x.Z,{defaultMessage:"Message limits reset. Let’s chat!",id:"LGCoQdVha4"})),(null==c?void 0:c.uuid)&&o&&u({type:"within_limit"},c.uuid,o),r()},[null==c?void 0:c.uuid,o,r,d,u]),{data:h,isLoading:g}=(0,p.w3)();return h&&(s=(0,D.xG)(h.price+(null!==(t=h.taxAmount)&&void 0!==t?t:0),h.currency,{preferWholeNumber:!0})),(0,a.jsx)(z.u_,{isOpen:l,onClose:r,title:(0,a.jsx)("div",{className:"text-text-200 font-copernicus text-xl font-medium tracking-tight mt-2",children:(0,a.jsx)(x.Z,{defaultMessage:"Reset usage limits",id:"YKpO8tTise"})}),hasCloseButton:!0,modalSize:"lg",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex p-3 justify-center items-center gap-10 self-stretch rounded-xl border border-accent-pro-100 bg-accent-pro-900 mt-6",children:[(0,a.jsx)("div",{className:"flex flex-col px-5 gap-2",children:g||!h?(0,a.jsx)(T.Loading,{size:"sm"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-text-100 text-3xl/6 font-medium tracking-tighter",children:s}),null===h.taxAmount&&(0,a.jsx)("p",{className:"text-text-500 text-sm/3 tracking-tight text-nowrap",children:(0,a.jsx)(x.Z,{defaultMessage:"+ tax",id:"H/9uGFjKzR"})})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("p",{className:"text-text-200 text-sm tracking-tight",children:(0,a.jsx)(x.Z,{defaultMessage:"Immediately get access to Claude instead of waiting for usage limits to reset.",id:"6Gj58FRZ27"})}),(0,a.jsx)("p",{className:"text-text-200 text-sm tracking-tight",children:(0,a.jsx)(x.Z,{defaultMessage:"This is a one-time payment.",id:"lVfQHZlUq0"})})]})]}),(0,a.jsx)(H,{amount:h?h.price+(null!==(n=h.taxAmount)&&void 0!==n?n:0):500,currency:(null==h?void 0:h.currency)||"USD",onSuccess:m})]})})}function V(e){let{messageLimit:t,placement:n,defaultWarning:s,defaultTheme:l}=e,i=(0,S.useExperiment)("rate_limit_resets").get("allow_rate_limit_resets",!1);return i&&("exceeded_limit"===t.type||"approaching_limit"===t.type&&0===t.remaining)?(0,a.jsx)(C,{theme:"pro",placement:n,warning:(0,a.jsx)(q,{messageLimit:t})}):i&&"approaching_limit"===t.type?(0,a.jsx)(C,{theme:"info",placement:n,warning:(0,a.jsx)(Y,{messageLimit:t})}):(0,a.jsx)(C,{theme:l,warning:s,placement:n})}let Y=e=>{let{messageLimit:t}=e,[n,s]=(0,f.useState)(!1);return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,a.jsx)("div",{className:"flex flex-row items-center gap-2 md:w-full",children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"text-sm",children:1===t.remaining?(0,a.jsx)(x.Z,{id:"RoowG4DICE",defaultMessage:"You have 1 message left before hitting usage limits"}):(0,a.jsx)(x.Z,{id:"4rS9S85sm+",defaultMessage:"You have {numMessagesRemaining} messages left before hitting usage limits",values:{numMessagesRemaining:t.remaining}})})})}),(0,a.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:(0,a.jsx)(_.z,{variant:"unstyled",className:(0,w.Z)("@lg:w-fit w-full shrink-0","text-sm font-medium","text-accent-pro-000","hover:text-accent-pro-000 hover:bg-bg-500/40"),onClick:()=>{s(!0)},children:(0,a.jsx)(x.Z,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"})})})]}),(0,a.jsx)(K,{isOpen:n,onClose:()=>s(!1),conversationUUID:t.conversationUUID})]})},q=e=>{let{messageLimit:t}=e,n=E.ou.fromSeconds(t.resetsAt),[s,l]=(0,f.useState)(!1);return(0,a.jsxs)(Z.P,{minimalUi:!0,actionButton:(0,a.jsxs)(_.z,{variant:"unstyled",size:"sm",className:(0,w.Z)("@lg:w-fit w-full shrink-0","bg-accent-pro-100 text-oncolor-100 font-medium font-styrene transition-colors hover:bg-accent-pro-200"),onClick:()=>{l(!0)},children:[(0,a.jsx)(x.Z,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"}),(0,a.jsx)("span",{className:"inline-block text-[0.65rem] bg-bg-000/20 ml-2 px-1.5 py-0.5 rounded",children:(0,a.jsx)(x.Z,{id:"vroSRZd5vI",defaultMessage:"BETA"})})]}),children:[(0,a.jsx)(x.Z,{id:"74NSYSM2xX",defaultMessage:"You can reset usage limits now or wait until {time}.",values:{time:(0,a.jsx)("span",{className:"inline-block",children:n.toLocaleString(E.ou.TIME_SIMPLE)})}}),(0,a.jsx)(K,{isOpen:s,onClose:()=>l(!1),conversationUUID:t.conversationUUID})]})};var W=n(71912),Q=n(90377),X=n(88146),J=n(40950);function $(){let e=(0,i.cs)(),t=(0,J.Z)();return(0,a.jsx)(Z.P,{actionButton:null,title:t.formatMessage({defaultMessage:"Team plan canceled",id:"KuqVOfg9/0"}),children:e?(0,a.jsx)(x.Z,{defaultMessage:"You can no longer chat with Claude. To restore full access, <link>renew your subscription</link>.",id:"L2pC0kiNNO",values:{link:e=>(0,a.jsx)(X.default,{className:"whitespace-nowrap font-medium underline",href:"/settings/billing",children:e})}}):(0,a.jsx)(x.Z,{defaultMessage:"You can no longer chat with Claude.",id:"hxcpUUnV0b"})})}var ee=n(82056);let et=()=>{let e=(0,ee.F)({allowSelfUpgrade:!1});return(0,a.jsx)(Z.P,{actionButton:e,children:(0,a.jsx)(x.Z,{defaultMessage:"Due to capacity constraints, chatting with Claude is currently not available. Please try again shortly.",id:"kfyWX0MxKQ"})})};var en=n(85465),ea=n(48894);let es=e=>{let{className:t,...n}=e;return(0,a.jsx)("a",{className:(0,w.Z)("text-text-100 font-medium hover:underline",t),...n})},el=e=>{var t;let n,{inaccessibleSyncSources:s}=e,{chatResourceState:l}=(0,b.Y)(),i=(0,en.lP)(),{isDrawerExpanded:r,setIsDrawerExpanded:o}=(0,ea.b)(),d=s.every(e=>e.status.state===c.co.UNAUTHENTICATED)&&1===new Set(s.map(e=>e.type)).size,u=null===(t=s[0])||void 0===t?void 0:t.type,m=(0,a.jsx)("button",{onClick:()=>{o(!0)},children:(0,a.jsx)(es,{children:(0,a.jsx)(x.Z,{defaultMessage:"Show {count, plural, one {# Item} other {# Items}}",id:"1HlfJxfH7H",values:{count:s.length}})})});return d&&null!==u?n=(0,a.jsx)("button",{onClick:()=>i(u),children:(0,a.jsx)(es,{children:(0,a.jsx)(x.Z,{defaultMessage:"Reconnect with {sourceName}",id:"dUareRZF9G",values:{sourceName:c.hP[u]}})})}):l.conversationUUID&&!r&&(n=m),(0,a.jsx)(Q.A,{children:(0,a.jsx)(x.Z,{defaultMessage:"Some of your content could not be loaded. {actionButton}",id:"Ibsz06ys2B",values:{actionButton:n}})})};var ei=n(41270);let er=ei.z.array(ei.z.object({text:ei.z.string(),href:ei.z.string().optional(),button:ei.z.boolean().optional()})).nullable();function eo(e){let{messageComponents:t}=e;return(0,a.jsx)(Q.A,{children:(0,a.jsx)(ed,{messageComponents:t})})}function ed(e){let{messageComponents:t}=e;return(0,a.jsx)("div",{children:t.map((e,t)=>e.button?(0,a.jsx)(_.z,{href:e.href,target:"_blank",children:e.text},t):e.href?(0,a.jsx)(X.default,{href:e.href,className:"underline",target:"_blank",children:e.text},t):(0,a.jsx)("span",{children:e.text},t))})}var ec=n(7418),eu=n(28803);function em(e){let t=(0,eu.$H)("push"),n=()=>{t()},s=e=>(0,a.jsx)("a",{onClick:n,className:"underline cursor-pointer",children:e});return(0,a.jsx)(Z.P,{actionButton:null,children:(0,a.jsx)("div",{className:"text-text-200 flex w-full items-center justify-between",children:(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)("span",{children:"refusal"===e.stopReason?(0,a.jsx)(x.Z,{defaultMessage:"Claude is unable to respond to this request, which appears to violate our <policyLink>Usage Policy</policyLink>. Please <newChat>start a new chat</newChat>.",id:"JQtAKVGSTL",values:{policyLink:e=>(0,a.jsx)("a",{href:"https://www.anthropic.com/legal/aup",target:"_blank",className:"underline cursor-pointer",children:e}),newChat:s}}):(0,a.jsx)(x.Z,{defaultMessage:"Claude is unable to respond to this request. Please <newChat>start a new chat</newChat>.",id:"VZKromeiwV",values:{newChat:s}})})})})})}var ef=n(5161),ex=n(3053),ep=n(95899),eh=n(4746);function eg(e){let{isOpen:t,setIsOpen:n,files:s,isNewConversation:l}=e,i=(0,J.Z)();return(0,a.jsxs)(z.u_,{isOpen:t,hasCloseButton:!0,title:i.formatMessage({defaultMessage:"Analysis tool required",id:"jvGhSl5Gpz"}),onClose:()=>n(!1),children:[(0,a.jsxs)("div",{className:"my-4 text-pretty flex flex-col gap-2",children:[(0,a.jsx)("div",{children:(0,a.jsx)(x.Z,{defaultMessage:"Claude requires the analysis tool to be enabled to analyze the following files:",id:"DWgtKtw1y9"})}),(0,a.jsx)("ul",{className:"list-disc pl-4",children:s.map(e=>(0,a.jsx)("li",{children:e.file_name},e.file_uuid))}),(0,a.jsx)("div",{children:l?i.formatMessage({defaultMessage:"If you start this conversation without turning on the analysis tool, these files will not be available to Claude.",id:"0r1iTiKoSi"}):i.formatMessage({defaultMessage:"Please enable the analysis tool and then start a new chat in this project to analyze these files.",id:"YLHCS8L8fc"})})]}),(0,a.jsx)(z.dm,{layout:"right",children:(0,a.jsx)(z.mH,{type:"button",size:"lg",onClick:()=>n(!1),children:(0,a.jsx)(x.Z,{defaultMessage:"OK",id:"kAEQyVFWDv"})})})]})}function ev(e){let{files:t,isNewConversation:n}=e,{track:s}=(0,ex.z$)(),{openFeaturePreviewModal:l}=(0,eh.h9)(),[i,r]=(0,f.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eg,{isOpen:i,setIsOpen:r,isNewConversation:n,files:t}),(0,a.jsx)(Q.A,{children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)(x.Z,{defaultMessage:"Claude cannot access some of the <a>files attached</a> to this conversation",id:"dlrqZaDnOO",values:{a:e=>(0,a.jsx)("a",{className:"underline",href:"#",onClick:()=>r(!0),children:e})}})}),(0,a.jsx)("div",{children:(0,a.jsx)("a",{className:"text-accent-secondary-000 font-medium",href:"#",onClick:()=>{s({event_key:"claudeai.settings.preview_feature.opened",source:"ooc_files_warning"}),l()},children:(0,a.jsx)(x.Z,{defaultMessage:"Enable analysis tool",id:"UDUWEABw3p"})})})]})})]})}var ey=n(2210),ej=n(71817),eb=n(18013),ew=n(80151),eM=n(48912);let ek=ei.z.object({id:ei.z.string(),bodyMd:ei.z.string(),isDismissable:ei.z.boolean(),proUpsell:ei.z.boolean(),alertForModels:ei.z.array(ei.z.string())}).nullable(),eC=e=>{let t=(0,d.Zr)("claude_ai_system_alerts","alert",null,ek),[n,s]=(0,eb.R)("".concat(e,":").concat(null==t?void 0:t.id,":hideAlertOnConversation"),!1),l=null==t?void 0:t.alertForModels,i=(0,ej.wN)(e);return e&&(!l||l.includes(i))&&t&&!n?{systemAlertFromConfig:{alert:t,component:(0,a.jsx)(eN,{alert:t,setHideAlert:s})}}:{}},eN=e=>{let{alert:t,setHideAlert:n}=e,s=(0,i.w7)(),l=(0,ee.F)();return(0,a.jsxs)(Q.A,{children:[(0,a.jsx)(ey.J$,{children:(0,a.jsx)(eM.U,{children:t.bodyMd})}),s&&t.proUpsell&&l,t.isDismissable&&(0,a.jsx)(_.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:()=>n(!0),children:(0,a.jsx)(ew.X,{size:12})})]})},e_=e=>{let{className:t,...n}=e;return(0,a.jsx)("button",{className:"text-text-100 text-sm font-medium hover:underline text-nowrap",...n})};var eS=n(35548);let eE=e=>{let t=(0,eS.ZW)(e.projectKnowledgebaseTokens,e.maxConversationTokens),n=(0,eu.$H)("push");return(0,a.jsx)(Z.P,{actionButton:(0,a.jsx)(e_,{onClick:()=>n({projectUuid:e.projectUuid}),children:(0,a.jsx)(x.Z,{defaultMessage:"Start a new conversation",id:"Lc72GmPP25"})}),children:t?(0,a.jsx)(x.Z,{defaultMessage:"This conversation has reached its <link>maximum length</link>. You may want to remove some files from your project’s knowledge base.",id:"8KrIIDzvA1",values:{link:e=>(0,a.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:r.jC,children:e})}}):(0,a.jsx)(x.Z,{defaultMessage:"This conversation has reached its <link>maximum length</link>.",id:"h7H72fz8l5",values:{link:e=>(0,a.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:r.jC,children:e})}})})},eZ=()=>(0,a.jsx)(Q.A,{children:(0,a.jsx)(x.Z,{defaultMessage:"Long prompts or documents may take multiple minutes to respond",id:"bw4uiEG/kB"})});var eI=n(89313);let eA=e=>{let t;let n=(0,eu.$H)("push"),{tokenTotals:s,numAttachments:l,projectKnowledgebaseTokens:i}=e,{msgTokens:o,totalTokens:d,maxConversationTokens:c}=s,u=null!=i?i:0,m=(0,eS.ZW)(u,c),f=d/c-1;return t=l&&m?(0,a.jsx)(x.Z,{defaultMessage:"Try replacing the attached {numAttachments, plural, one {file} other {files}} with smaller excerpts or removing files from your project’s knowledge base.",id:"LZJa/izuge",values:{numAttachments:l}}):l?(0,a.jsx)(x.Z,{defaultMessage:"Try replacing the attached {numAttachments, plural, one {file} other {files}} with smaller excerpts.",id:"doIlMUx6Hu",values:{numAttachments:l}}):m?(0,a.jsx)(x.Z,{defaultMessage:"Try removing files from your project’s knowledge base.",id:"rTmS1cuCeD"}):(0,a.jsx)(x.Z,{defaultMessage:"Try shortening your message.",id:"vd0y42PhHK"}),(0,a.jsx)(Q.A,{children:(0,a.jsxs)("span",{children:[(0,a.jsx)(x.Z,{defaultMessage:"Conversation is {percentage}% over the <link>length limit</link>.",id:"IGar1JqHAm",values:{percentage:Math.ceil(100*f),link:e=>(0,a.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:r.jC,children:e})}}),"\xa0",t,"\xa0",o+u<c&&(0,a.jsx)("a",{className:"underline",href:"#",onClick:()=>n({projectUuid:e.projectUuid}),children:(0,a.jsx)(x.Z,{defaultMessage:"Start a new conversation?",id:"8ha4a4N9Uq"})})]})})};var eT=n(68571);let ez=e=>{let{switchModel:t,copyText:n,modelName:s}=e;return(0,a.jsx)(Q.A,{children:(0,a.jsxs)("div",{className:"text-text-200 flex w-full items-center flex-wrap justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-1",children:n}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{className:"text-text-100 text-sm font-medium hover:underline text-nowrap",onClick:t,children:(0,a.jsx)(x.Z,{defaultMessage:"Switch to {modelName}",values:{modelName:s},id:"1APwtKAkCy"})}),"\xa0"]})]})})},eD=()=>{let e=(0,v.j5)(c.Fg.GMAIL),t=(0,v.j5)(c.Fg.GCAL),n=(0,g.EU)();return!(0,u.Q)()&&(e||t||n)},eR=e=>{var t,n,u,g,v,w,M,k,_,S,E,Z,I,A,T,z,D,R,O,L,F,P,G,U;let{placement:H}=e,{prompt:B,isPromptUnsafe:K,model:Y,setModel:q,attachments:X,conversation:J,projectUuid:ee,syncSourceUuids:en,files:ea}=(0,N.r)(),es=(0,j.nR)(ee),ei=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,eu.cE)(t||""),a=null==n?void 0:null===(e=n.chat_messages)||void 0===e?void 0:e.at(-1);return a&&"assistant"===a.sender&&("prompt_injection_risk"===a.stop_reason||"refusal"===a.stop_reason)?a.stop_reason:null}(null==J?void 0:J.id),ed=ei?(0,a.jsx)(em,{stopReason:ei}):null,[ex,eh]=(0,eI.X)({projectUuid:ee,conversationUUID:null!==(n=null==J?void 0:J.id)&&void 0!==n?n:null,conversationTokensSoFar:null!==(u=null==J?void 0:J.tokensSoFar)&&void 0!==u?u:0,conversationFiles:(null!==(g=null==J?void 0:J.files)&&void 0!==g?g:[]).concat(ea),projectKnowledgebaseTokens:null!==(v=null==J?void 0:J.projectKnowledgebaseTokens)&&void 0!==v?v:es,input:B,attachments:X,syncSourceUuids:en,chatInputModel:Y}),{exceededMessageLimitWarning:eg,approachingMessageLimitWarning:ey,messageLimit:ej}=(0,ec.k)(null!==(w=null==J?void 0:J.id)&&void 0!==w?w:null),eb="exceeded"===ex?(0,a.jsx)(eE,{projectKnowledgebaseTokens:null!==(M=null==J?void 0:J.projectKnowledgebaseTokens)&&void 0!==M?M:0,maxConversationTokens:eh.maxConversationTokens,projectUuid:ee}):null,{isRavenCanceled:ew}=(0,p.pV)(),eM=ew?(0,a.jsx)($,{}):void 0,ek=(0,i.uh)()?(0,a.jsx)(et,{}):void 0,eN=(()=>{let{chatResourceState:e}=(0,b.Y)();return[...e.syncSources||[],...(0,h.yg)(ee).data||[]].filter(e=>{var t;return c.qC.includes(null==e?void 0:null===(t=e.status)||void 0===t?void 0:t.state)})})(),e_=eN.length?(0,a.jsx)(el,{inaccessibleSyncSources:eN}):void 0,{maxKbTokens:eS,modelWithLargestContext:eR}=(0,j.mo)(),{setStickyModelPreference:eO}=(0,l.M)(),eL=!(!eR||(null==Y?void 0:Y.toLowerCase())===eR.toLowerCase())&&("exceeded"===ex||"will-exceed"===ex)&&eh.totalTokens<eS,{allModelOptions:eF}=(0,s.uL)(),eP=null===(t=eF.find(e=>e.model===eR))||void 0===t?void 0:t.name,eG=(0,f.useCallback)(()=>{eR&&(q(eR),eO(eR))},[q,eO,eR]),eU=eP&&eL?(0,a.jsx)(ez,{switchModel:eG,modelName:eP,copyText:(0,a.jsx)("span",{children:(0,a.jsx)(x.Z,{defaultMessage:"Your message is over the <link>length limit</link>",id:"sFF+OamRk1",values:{link:e=>(0,a.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:r.jC,children:e})}})})}):void 0,eH="will-exceed"===ex?(0,a.jsx)(eA,{tokenTotals:eh,numAttachments:X.length,projectKnowledgebaseTokens:null==J?void 0:J.projectKnowledgebaseTokens,projectUuid:ee}):null,eB=eh.msgTokens<1e5?null:(0,a.jsx)(eZ,{}),eK=(0,y.F4)(),eV=(0,i.Cf)(),eY=eK&&!eV?(0,a.jsx)(Q.A,{children:(0,a.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,a.jsx)(m.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,a.jsx)("span",{children:(0,a.jsx)(x.Z,{defaultMessage:"Less accurate Google Drive search results while Claude catalogs your Drive files",id:"ljvRWwDUyf"})})]})}):void 0,eq=(0,W.j)(ee)?(0,a.jsx)(Q.A,{children:(0,a.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,a.jsx)(m.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,a.jsx)("span",{children:(0,a.jsx)(x.Z,{defaultMessage:"Project knowledge exceeds maximum. Remove files to continue.",id:"IqUMWBoy4d"})})]})}):void 0,{systemAlertFromConfig:eW}=eC(null!==(k=null==J?void 0:J.id)&&void 0!==k?k:null),eQ=eW?eW.component:null,eX=function(e,t,n){let{data:s=[]}=(0,ep.pK)(n),l=(0,ef.eh)(),i=[...e,...t?t.files:[],...s].filter(e=>e.file_kind===o.Y.Blob);return!l&&i.length?(0,a.jsx)(ev,{files:i,isNewConversation:!t}):null}(ea,J,ee),eJ=function(){let e=(0,d.Zr)("claudeai_warning_message","components",null,er);return e?(0,a.jsx)(eo,{messageComponents:e}):null}(),e$=eD(),e0=(0,d.FL)("claudeai_unsafe_prompt_inline"),e1=K()&&e$&&e0?(0,a.jsx)(Q.A,{children:(0,a.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,a.jsx)(m.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,a.jsx)("span",{children:(0,a.jsx)(x.Z,{defaultMessage:"Use caution before running this prompt. Malicious conversation content could trick Claude into attempting harmful actions or sharing your data.",id:"bWRp6wwzXA"})})]})}):null,e2=X.some(e=>e.origin===o.i.URLParameter)?(0,a.jsx)(Q.A,{children:(0,a.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,a.jsx)(m.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,a.jsx)("span",{children:(0,a.jsx)(x.Z,{defaultMessage:"Artifacts are user-generated and may contain unverified or potentially unsafe content.",id:"/0GesG9R4n"})})]})}):null,e5=null!==(S=null!==(_=null!=ed?ed:e1)&&void 0!==_?_:e2)&&void 0!==S?S:null,e3=null!=eq?eq:null,e7=null!==(U=null!==(G=null!==(P=null!==(F=null!==(L=null!==(O=null!==(R=null!==(D=null!==(z=null!==(T=null!==(A=null!==(I=null!==(Z=null!==(E=null!=e5?e5:e3)&&void 0!==E?E:eg)&&void 0!==Z?Z:eU)&&void 0!==I?I:eb)&&void 0!==A?A:eM)&&void 0!==T?T:ek)&&void 0!==z?z:e_)&&void 0!==D?D:eH)&&void 0!==R?R:eX)&&void 0!==O?O:eB)&&void 0!==L?L:eQ)&&void 0!==F?F:eY)&&void 0!==P?P:eJ)&&void 0!==G?G:ey)&&void 0!==U?U:null,e6=eW&&eW.alert.proUpsell,e4=!!(eg||eX||eY||ey),e8=e6?"pro":e4?"info":"danger",e9=(0,i.ZJ)(),te=(0,i.ue)();return!e3&&ej&&(e9||te)&&(ey||eg)&&!eT.env.NEXT_PUBLIC_DISABLE_PAYMENTS?(0,a.jsx)(V,{messageLimit:ej,defaultWarning:e7,defaultTheme:e8,placement:H}):(0,a.jsx)(C,{warning:e7,placement:H,theme:e8})}},52165:function(e,t,n){n.d(t,{u:function(){return o}});var a=n(27573),s=n(11579),l=n(32737),i=n(87033),r=n(22235);let o=e=>{let{model:t,hasMultiModalContent:n,hideModelNameLogo:o}=e,{value:d}=(0,i.FL)("claude_ai_redacted_model_name_reveal"),c=t.name.replace("Claude",""),u=(0,r.g)(c,t.model,n),m=!d&&c.startsWith("\uD83E\uDD2B")?(0,a.jsx)(l.u,{tooltipContent:u,children:(0,a.jsx)("span",{children:"\uD83E\uDD2B"})}):u;return(0,a.jsxs)("div",{className:"font-tiempos inline-flex gap-[3px] text-[14px] h-[14px] leading-none items-baseline",children:[!o&&(0,a.jsx)(s.l,{className:"claude-logo-model-selector block translate-y-[0.5px]",height:11.5}),(0,a.jsx)("div",{className:"flex items-center gap-[4px]",children:(0,a.jsx)("div",{className:"whitespace-nowrap tracking-tight select-none",children:m})})]})}},90377:function(e,t,n){n.d(t,{A:function(){return l}});var a=n(41596);function s(){let e=(0,a._)(["\n  font-normal\n  text-[0.65rem]\n  sm:text-xs\n  w-full\n  flex\n  gap-1.5\n  items-center\n  justify-between\n"]);return s=function(){return e},e}let l=n(9788).q.div(s())},67311:function(e,t,n){n.d(t,{P:function(){return o}});var a=n(27573),s=n(30070),l=n(10607),i=n(7653),r=n(22639);let o=e=>{let{children:t,actionButton:n,title:o,minimalUi:d}=e,{hasBlockingWarning:c,setHasBlockingWarning:u}=(0,r.r)();return(0,i.useEffect)(()=>(u(!0),()=>{u(!1)}),[c,u]),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,a.jsxs)("div",{className:(0,l.Z)("flex flex-row items-center gap-2 md:w-full",d?null:"text-danger-000"),children:[d?null:(0,a.jsx)(s.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,a.jsxs)("div",{children:[o&&(0,a.jsx)("div",{className:"text-sm font-medium",children:o}),(0,a.jsx)("div",{className:"text-sm",children:t})]})]}),!!n&&(0,a.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:n})]})})}},82056:function(e,t,n){n.d(t,{F:function(){return o}});var a=n(27573),s=n(8571),l=n(27218),i=n(70354);n(7653);var r=n(45790);function o(){let{allowSelfUpgrade:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(function(e){let t=(0,l.w7)(),n=(0,l.z6)(),a=(0,l.D)(),i=(0,l.H1)();return(0,s.Zx)()?(i||t)&&e?n||a||i?!t&&a?"subscribe-max":!t&&i?"subscribe-max-20x":"subscribe":"subscribe-pro-only":"none":"contact-sales"}(e)){case"contact-sales":return(0,a.jsx)(d,{});case"subscribe":return(0,a.jsx)(c,{});case"subscribe-pro-only":return(0,a.jsx)(u,{});case"subscribe-max":return(0,a.jsx)(m,{});case"subscribe-max-20x":return(0,a.jsx)(f,{});case"none":return null}}function d(){let{websiteBaseUrl:e}=(0,s.mX)();return(0,a.jsx)(i.z,{href:"".concat(e,"/contact-sales"),children:(0,a.jsx)(r.Z,{defaultMessage:"Contact us to upgrade",id:"VifKcG4Va9"})})}function c(){return(0,a.jsx)(i.z,{href:"/upgrade?hide_free=true",children:(0,a.jsx)(r.Z,{defaultMessage:"Upgrade plan",id:"c5+JRMBv/Y"})})}function u(){return(0,a.jsx)(i.z,{href:"/upgrade/pro",children:(0,a.jsx)(r.Z,{defaultMessage:"Upgrade plan",id:"c5+JRMBv/Y"})})}function m(){return(0,a.jsx)(i.z,{href:"/upgrade?hide_pro=true",children:(0,a.jsx)(r.Z,{defaultMessage:"Subscribe to Max",id:"8ACH3Vf732"})})}function f(){return(0,a.jsx)(i.z,{href:"/upgrade",children:(0,a.jsx)(r.Z,{defaultMessage:"Increase usage",id:"Lc0QnIgRuR"})})}},7418:function(e,t,n){n.d(t,{j:function(){return w},k:function(){return v}});var a=n(27573),s=n(71817),l=n(49185),i=n(27218),r=n(48410),o=n(70354),d=n(6385),c=n(87033),u=n(80151),m=n(43290),f=n(7653),x=n(45790),p=n(90377),h=n(67311),g=n(82056);let v=e=>{let{messageLimit:t}=(0,i.t)(),{isTierSelectorEnabled:n}=(0,r.i)(),[l,o]=(0,f.useState)(!0),d=(null==t?void 0:t.type)==="within_limit",c=(0,s.wN)(e),u=d?null:null==t?void 0:t.conversationUUID,m=(0,s.wN)(null!=u?u:null);return(null==t?void 0:t.type)!=="within_limit"&&(null==t?void 0:t.perModelLimit)&&c!==m?{}:(null==t?void 0:t.type)==="exceeded_limit"||(null==t?void 0:t.type)==="approaching_limit"&&0===t.remaining?{messageLimit:t,exceededMessageLimitWarning:(0,a.jsx)(y,{messageLimit:t,showTierSelector:n})}:(null==t?void 0:t.type)==="approaching_limit"?{messageLimit:t,approachingMessageLimitWarning:l?(0,a.jsx)(j,{messageLimit:t,onDismiss:()=>o(!1)}):void 0}:{}};function y(e){let{messageLimit:t,showTierSelector:n=!1}=e,s=(0,i.Cf)(),l=(0,i.ZJ)(),r=(0,i.ue)(),o=(0,i.H1)(),c=(0,g.F)(),u=m.ou.fromSeconds(t.resetsAt);return(0,a.jsxs)(h.P,{actionButton:c,minimalUi:!0,children:[n?(0,a.jsx)(x.Z,{defaultMessage:"Usage limit reached — your limit will reset at {time}. As an internal user, you can change your tier in the user menu to test different rate limits.",id:"Um8zFcRLL/",values:{time:(0,a.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.ou.TIME_SIMPLE)})}}):r&&o?(0,a.jsx)(x.Z,{defaultMessage:"Increase usage for uninterrupted work or continue at {time}.",id:"5QbZN4LMkt",values:{time:(0,a.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.ou.TIME_SIMPLE)})}}):l||s||r?(0,a.jsx)(x.Z,{defaultMessage:"Usage limit reached — your limit will reset at {time}.",id:"bXAswF0AK8",values:{time:(0,a.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.ou.TIME_SIMPLE)})}}):(0,a.jsx)(x.Z,{defaultMessage:"You are out of free <link>messages</link> until {time}",id:"PKaisys/Ji",values:{time:(0,a.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.ou.TIME_SIMPLE)}),link:e=>(0,a.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:d.pz,children:e})}}),(0,a.jsx)(b,{messageLimit:t})]})}let j=e=>{let{messageLimit:t,onDismiss:n}=e,s=(0,g.F)(),l=m.ou.fromSeconds(t.resetsAt);return(0,a.jsxs)(p.A,{children:[(0,a.jsx)("span",{className:"font-medium",children:(0,a.jsx)(x.Z,{defaultMessage:"You’re almost out of usage - your limits will reset at {time}",id:"jKI2rDp1ds",values:{time:(0,a.jsx)("span",{className:"inline-block",children:l.toLocaleString(m.ou.TIME_SIMPLE)})}})}),(0,a.jsxs)("span",{children:[s,(0,a.jsx)(o.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded !bg-transparent",size:"unset",variant:"ghost",onClick:n,children:(0,a.jsx)(u.X,{size:12})})]})]})},b=e=>{let{messageLimit:t}=e,{mutate:n}=(0,l.I)(t.conversationUUID),{value:s}=(0,c.FL)("can_reset_rate_limits");return s?(0,a.jsx)(o.z,{className:"ml-2",variant:"secondary",size:"sm",onClick:()=>n(),children:(0,a.jsx)(x.Z,{defaultMessage:"Reset limits",id:"0Lg76lu7jn"})}):null},w=e=>{var t;let{messageLimit:n,activeOrganization:a}=(0,i.t)(),r=(0,l.n)(),o=(0,s.wN)(e),d=(null==n?void 0:n.type)!=="within_limit"&&null!==(t=null==n?void 0:n.conversationUUID)&&void 0!==t?t:null,c=(0,s.wN)(d);(0,f.useEffect)(()=>{(null==a?void 0:a.uuid)&&n&&"within_limit"!==n.type&&c!==o&&r({type:"within_limit"},a.uuid,e)},[e,c,a,n,o,r])}},89313:function(e,t,n){n.d(t,{X:function(){return o}});var a=n(53949),s=n(66605),l=n(23098),i=n(18409),r=n(35548);let o=e=>{let{projectUuid:t,conversationUUID:n,conversationTokensSoFar:o,conversationFiles:d,projectKnowledgebaseTokens:c,input:u,attachments:m,syncSourceUuids:f,chatInputModel:x}=e,p=(0,l.PE)(t);c=c&&!p?c:0;let h=d.filter(e=>e.file_kind===a.Y.Image),g=o+(0,r.hn)(h)+d.filter(e=>e.file_kind===a.Y.SanitizedDocument).reduce((e,t)=>e+(0,r.ZJ)(t),0)+c,v=(0,r.y1)(u,h,m),y=g+v+(0,s.fg)(f),j=(0,i.e)(n,x),b=null;return g>j?b="exceeded":y>j&&(b="will-exceed"),[b,{conversationTokens:g,msgTokens:v,totalTokens:y,maxConversationTokens:j}]}},71912:function(e,t,n){n.d(t,{j:function(){return s}});var a=n(23098);let s=e=>{let t=(0,a.nR)(e),{maxKbTokens:n}=(0,a.mo)();return void 0!==t&&t>n}},22235:function(e,t,n){n.d(t,{g:function(){return o}});var a=n(27573),s=n(32737),l=n(87033),i=n(30070),r=n(45790);function o(e,t,n){let{value:o}=(0,l.FL)("claude_ai_cinnamon"),{value:d}=(0,l.FL)("claude_ai_chili");return o&&d&&void 0!==n&&"claude-3-5-haiku-20241022"===t&&n?(0,a.jsxs)(a.Fragment,{children:[e.replace("3.5 Haiku","3 Haiku"),(0,a.jsx)(s.u,{tooltipContent:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(r.Z,{defaultMessage:"Claude 3.5 Haiku does not support images",id:"VkrkeY0z6g"})}),children:(0,a.jsx)(i.v,{className:"inline-block ml-1 translate-y-[-1px]"})})]}):e}},48894:function(e,t,n){n.d(t,{d:function(){return c},b:function(){return d}});var a=n(27573),s=n(18013),l=n(81695),i=n(7653),r=n(20355);let o=(0,i.createContext)({isDrawerExpanded:!1,setIsDrawerExpanded:()=>void 0});function d(){return(0,i.useContext)(o)}function c(e){let{children:t,conversationUUID:n}=e,d=function(e){let t=!!(0,l.useSearchParams)().get("controls")&&!(window.matchMedia&&window.matchMedia("(max-width: 767px)").matches),[n]=(0,s.R)("".concat(e,":chatControlsSidebarIsOpen"),t);return n}(n),{isExpanded:c,setIsExpanded:u}=(0,r.S)(),[m,f]=(0,i.useState)(d),x=(0,i.useRef)({reopenMain:!1}),p=(0,i.useCallback)(e=>{e&&(c&&(x.current.reopenMain=!0),u(!1)),!e&&x.current.reopenMain&&(x.current.reopenMain=!1,u(!0)),f(e)},[c,u,f]);return(0,a.jsx)(o.Provider,{value:{isDrawerExpanded:m,setIsDrawerExpanded:p},children:t})}},89368:function(e,t,n){n.d(t,{N:function(){return s}});var a=n(87033);let s=()=>{let{value:e}=(0,a.FL)("claudeai_saffron_ui");return e}},4746:function(e,t,n){n.d(t,{FeaturePreview:function(){return A},b5:function(){return Z},h9:function(){return I}});var a=n(27573),s=n(19170),l=n(18916),i=n(3053),r=n(27218),o=n(27895),d=n(9677),c=n(69321),u=n(7276),m=n(52939),f=n(22523),x=n(32737),p=n(87033),h=n(10607),g=n(35919),v=n.n(g),y=n(50294),j=n(7653),b=n(45790),w=n(40950),M=n(41270),k=n(95586),C=n(64014);let N=M.z.object({title:M.z.string(),description:M.z.string(),shortDescription:M.z.string().optional(),titleKey:M.z.string().optional(),descriptionKey:M.z.string().optional(),shortDescriptionKey:M.z.string().optional()}),_=M.z.object({preview_feature_uses_artifacts:N.optional(),preview_feature_uses_latex:N.optional(),preview_feature_uses_citations:N.optional(),preview_feature_uses_harmony:N.optional(),enabled_artifacts_attachments:N.optional(),enabled_turmeric:N.optional(),enabled_gdrive:N.optional(),enabled_bananagrams:N.optional(),enabled_web_search:N.optional(),enabled_sourdough:N.optional(),enabled_foccacia:N.optional(),enabled_monkeys_in_a_barrel:N.optional()}),S={},E=(0,j.createContext)({openFeaturePreviewModal:v()}),Z=e=>{let{children:t}=e,[n,s]=(0,j.useState)(!1);return(0,a.jsxs)(E.Provider,{value:{openFeaturePreviewModal:()=>s(!0)},children:[t,(0,a.jsx)(m.u_,{modalSize:"xl",isOpen:n,onClose:()=>s(!1),hasCloseButton:!0,title:(0,a.jsx)(b.Z,{defaultMessage:"Feature preview",id:"3H/t1552xG"}),children:(0,a.jsx)(A,{})})]})},I=()=>(0,j.useContext)(E);function A(e){let{includeTitle:t}=e,n=function(){let{value:e}=(0,p.FL)("latex_ga"),t=(0,p.Zr)("fp_menu","features",S,_),n=(0,C.i)(),a=(0,k.U)(),{value:s,source:i}=(0,l.h)({}),{preview_feature_uses_artifacts:r,enabled_artifacts_attachments:o,preview_feature_uses_harmony:d,preview_feature_uses_latex:c,...u}=t,m={...u};return!n&&r&&(m.preview_feature_uses_artifacts=r),s&&"experiment"===i&&r||(m.enabled_artifacts_attachments=o),a&&d&&(m.preview_feature_uses_harmony=d),!e&&c&&(m.preview_feature_uses_latex=c),m}();if(!(Object.keys(n).length>0))return;let s=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{id:"feature-preview",className:"text-text-400 text-sm pt-4 pb-8",children:(0,a.jsx)(b.Z,{defaultMessage:"Preview and provide feedback on upcoming enhancements to our platform. Please note: experimental features might influence Claude’s behavior and some interactions may differ from the standard experience.",id:"TJ0Nj7aQ5C"})}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:Object.entries(n).map((e,t)=>{let[n,s]=e;return(0,a.jsxs)(a.Fragment,{children:[t>0&&(0,a.jsx)("div",{className:"border-t border-border-300"}),(0,a.jsx)(T,{label:n,...s},n)]})})})]});return t?(0,a.jsxs)(f.QQ,{children:[(0,a.jsx)(u.NZ,{children:(0,a.jsx)(b.Z,{defaultMessage:"Feature preview",id:"3H/t1552xG"})}),s]}):s}function T(e){var t;let{label:n,...l}=e,u=(0,w.Z)(),{track:m}=(0,i.z$)(),{addSuccess:f}=(0,o.e)(),{account:p}=(0,r.t)(),{mutate:g}=(0,s.Ck)(),{checked:v,disabled:b,tooltipContent:M}=z(n),k=(0,j.useCallback)(()=>{p&&(m({event_key:"claudeai.settings.preview_feature.toggled",account_uuid:p.uuid,feature_id:n,action:!0===v?"disable":"enable"}),f(u.formatMessage({defaultMessage:"{title} {action}",id:"XuGv50sPs9"},{title:l.title,action:v?"disabled":"enabled"})),g({...p.settings,[n]:!v}))},[p,m,n,v,f,u,l.title,g]);return(0,a.jsxs)("div",{className:"flex flex-row w-full gap-4 items-center",children:[(0,a.jsx)(y.default,{src:"/images/feature-preview/square/".concat(null!==(t=D[n])&&void 0!==t?t:"generic",".png"),style:{objectFit:"cover",width:62,height:62},className:"rounded-lg border border-border-300",width:248,height:248,alt:u.formatMessage({defaultMessage:"Preview image of feature",id:"6VliGZPeZA"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 flex-grow",children:[(0,a.jsx)("h3",{className:"text-text-100 text-md",children:l.titleKey?(0,a.jsx)(c.d7,{id:l.titleKey}):l.title}),(0,a.jsx)("p",{className:"text-text-100 text-sm",children:l.descriptionKey?(0,a.jsx)(c.d7,{id:l.descriptionKey}):l.description})]}),(0,a.jsx)(x.u,{tooltipContent:M?(0,a.jsx)("div",{className:"text-center",children:M}):null,children:(0,a.jsx)("label",{className:(0,h.Z)(!b&&"cursor-pointer"),children:(0,a.jsx)(d.Z,{disabled:b,checked:!!v,onChange:k},n)})})]})}let z=e=>{var t,n,a;let{account:s}=(0,r.t)(),{value:i}=(0,p.FL)("force_harmony"),{value:o,source:d}=(0,l.h)(null!==(n=null==s?void 0:s.settings)&&void 0!==n?n:{}),c=null!==(a=null==s?void 0:null===(t=s.settings)||void 0===t?void 0:t[e])&&void 0!==a&&a,u="preview_feature_uses_harmony"===e&&i;switch(e){case"preview_feature_uses_harmony":return{checked:i||c,disabled:u,tooltipContent:null};case"enabled_artifacts_attachments":return{checked:"flag"===d&&!!o||c,disabled:u,tooltipContent:null};default:return{checked:c,disabled:u,tooltipContent:null}}},D={preview_feature_uses_artifacts:"artifacts",preview_feature_uses_latex:"latex",preview_feature_uses_citations:"generic",preview_feature_uses_harmony:"harmony",enabled_artifacts_attachments:"analyse",enabled_turmeric:"harmony",enabled_gdrive:"google-drive",enabled_web_search:"web-search",enabled_bananagrams:"bananagrams",enabled_foccacia:"foccacia",enabled_sourdough:"sourdough"}},1399:function(e,t,n){n.d(t,{NuxProvider:function(){return i},s:function(){return l}});var a=n(27573),s=n(7653);let l=(0,s.createContext)(null);function i(e){let{children:t}=e,[n,i]=(0,s.useState)({items:{},currentlyShowing:null}),o=(0,s.useCallback)((e,t)=>{i(n=>{if(n.items[e])return n;let a={...n.items,[e]:t};return{items:a,currentlyShowing:r(a,!0)}})},[]),d=(0,s.useCallback)(e=>{i(t=>{let{[e]:n,...a}=t.items;return{items:a,currentlyShowing:t.currentlyShowing===e?r(a):t.currentlyShowing}})},[]),c={items:n.items,currentlyShowing:n.currentlyShowing,registerNux:o,unregisterNux:d};return(0,a.jsx)(l.Provider,{value:c,children:t})}let r=(e,t)=>{let n=Object.entries(e).sort((e,t)=>{let n=e[1].priority||0,a=t[1].priority||0;return n!==a?a-n:new Date(t[1].dateAdded).getTime()-new Date(e[1].dateAdded).getTime()});if(t){var a,s;return null!==(s=null===(a=n[0])||void 0===a?void 0:a[0])&&void 0!==s?s:null}for(let[e,t]of n)if(t.showAfterOthersDismiss)return e;return null}},63731:function(e,t,n){n.d(t,{Y7:function(){return v},hK:function(){return j},qg:function(){return y}});var a=n(27573),s=n(27218),l=n(5984),i=n(70354),r=n(10228),o=n(7533),d=n(72243),c=n(10607),u=n(7653),m=n(45790),f=n(40950),x=n(59016),p=n(32559),h=n(57393),g=n(53545);let v=(0,a.jsx)(m.Z,{defaultMessage:"Everyone in your organization can view and use this project",id:"o6dyBu92Ad"}),y=(0,a.jsx)(m.Z,{defaultMessage:"Only invited members can view and use this project",id:"r65HKpZU8I"});function j(e){var t,n,j,b,w,M;let{syncSources:k=[],onProjectCreated:C,onError:N,onCancel:_,strings:S}=e,E=(0,f.Z)(),Z=(0,s.Cf)(),I=(0,g.DU)(),{customInstructions:A,type:T,subtype:z}=null!=I?I:{},[D,R]=(0,u.useState)({name:"",description:null!==(t=S.createProjectDescriptionDefault)&&void 0!==t?t:"",type:T,subtype:z,is_private:!0}),[O,L]=(0,u.useState)({}),[F,P]=(0,u.useState)(!1),G=k.length>0,U=k.some(e=>e.type===r.Fg.GITHUB),H=k.some(e=>e.type===r.Fg.GDRIVE),B=U&&H?(0,a.jsx)(m.Z,{defaultMessage:"Github and GDrive attachments can only be added to private projects",id:"rqNebqAfPF"}):U?(0,a.jsx)(m.Z,{defaultMessage:"Github attachments can only be added to private projects",id:"eyujXWQfg4"}):H?(0,a.jsx)(m.Z,{defaultMessage:"GDrive attachments can only be added to private projects",id:"DMBgAV43lL"}):(0,a.jsx)(m.Z,{defaultMessage:"Some of these attachments can only be added to private projects",id:"2ssKO1VReL"}),{mutateAsync:K}=(0,p.Qs)(),{activeOrganization:V}=(0,s.t)(),{data:Y}=(0,p.Kn)(),{data:q,isLoading:W}=(0,p.VR)(),{data:Q}=(0,x.KJ)(),X=Q&&!G,J=e=>t=>{R(n=>({...n,[e]:t.target.value})),L(t=>({...t,[e]:null}))},$=e=>{R(t=>({...t,is_private:e.target.checked&&"private"===e.target.value}))},ee=()=>{let e={};return""===D.name.trim()&&(e.name=E.formatMessage({defaultMessage:"Project name is required",id:"n5cqkMmIMW"})),L(e),0===Object.keys(e).length},et=async e=>{if(e.preventDefault(),!F&&ee()){P(!0);try{let e={...D};A&&(e.prompt_template=A.replaceAll("{{PROJECT_NAME}}",D.name));let t=await K(e);C(t)}catch(e){N(e)}finally{P(!1)}}};return(0,a.jsxs)("form",{className:"grid grid-cols-1 gap-4",onSubmit:e=>et(e),children:[!W&&0===q&&!I&&(0,a.jsxs)("div",{className:"bg-bg-300 border-border-400/10 text-text-300 flex w-full flex-col items-start justify-start gap-2 rounded-xl border px-5 pb-5 pt-4 text-sm",children:[(0,a.jsx)("div",{className:"flex items-center gap-1 font-medium",children:(0,a.jsx)(m.Z,{defaultMessage:"How to use projects",id:"moKJkVk/qB"})}),Z?(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{children:(0,a.jsx)(m.Z,{defaultMessage:"Use Projects with your team to do things like:",id:"fcUpqajVgl"})}),(0,a.jsxs)("ul",{className:"list-disc pl-4",children:[(0,a.jsx)("li",{children:(0,a.jsx)(m.Z,{defaultMessage:"Query and analyze information about customers, sales calls, and project plans",id:"1YyB53/KOc"})}),(0,a.jsx)("li",{children:(0,a.jsx)(m.Z,{defaultMessage:"Upload files from your codebase to understand, improve, and contribute",id:"HXj87AQH0P"})}),(0,a.jsx)("li",{children:(0,a.jsx)(m.Z,{defaultMessage:"Generate analysis and reports from one consistent set of materials",id:"3XvEQYrcUv"})}),(0,a.jsx)("li",{children:(0,a.jsx)(m.Z,{defaultMessage:"Create content informed by company policies and documentation",id:"HrODk029zr"})})]}),(0,a.jsx)("p",{children:(0,a.jsx)(m.Z,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("p",{children:(0,a.jsx)(m.Z,{defaultMessage:"Projects help organize your work and leverage knowledge across multiple conversations. Upload docs, code, and files to create themed collections that Claude can reference again and again.",id:"7HFalNigyO"})}),(0,a.jsx)("p",{children:(0,a.jsx)(m.Z,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}),Y&&(0,a.jsx)("div",{children:(0,a.jsx)(m.Z,{defaultMessage:"Curious to learn more? <link>Try an example project</link>",id:"+AcqvUzRry",values:{link:e=>(0,a.jsx)(i.z,{variant:"underline",size:"unset",href:"/project/".concat(Y),children:e})}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.oi,{autoFocus:!0,name:"name",className:"w-full",label:null!==(n=S.createProjectNameLabel)&&void 0!==n?n:E.formatMessage({defaultMessage:"What are you working on?",id:"R2IogQsIBI"}),placeholder:null!==(j=S.createProjectNamePlaceholder)&&void 0!==j?j:E.formatMessage({defaultMessage:"Name your project",id:"BtIbm/e/WX"}),size:"lg",onChange:J("name"),error:!!O.name,"data-1p-ignore":!0}),O.name&&(0,a.jsx)("div",{className:"text-danger-000 mt-1 text-right text-xs font-medium",children:O.name})]}),!I&&(0,a.jsx)("div",{children:(0,a.jsx)(l.Kx,{name:"description",className:"w-full",label:null!==(b=S.createProjectDescriptionLabel)&&void 0!==b?b:E.formatMessage({defaultMessage:"What are you trying to achieve?",id:"RPsTh+NBxY"}),placeholder:null!==(w=S.createProjectDescriptionPlaceholder)&&void 0!==w?w:E.formatMessage({defaultMessage:"Describe your project, goals, subject, etc...",id:"WStTnUWlP8"}),minRows:3,onChange:J("description"),error:O.description})}),Z?(0,a.jsxs)("fieldset",{children:[(0,a.jsx)("div",{className:"mb-2 text-sm font-medium",children:(0,a.jsx)(m.Z,{defaultMessage:"Visibility",id:"JAkIqbzRj5"})}),(0,a.jsxs)("label",{className:(0,c.Z)("mb-2 flex w-full gap-2",!X&&"opacity-40"),children:[(0,a.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"open",checked:!D.is_private,onChange:$,disabled:!X}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)(o.$,{size:16,className:"-mt-1 mr-1 inline-block"}),null!==(M=null==V?void 0:V.name)&&void 0!==M?M:(0,a.jsx)(m.Z,{defaultMessage:"Organization",id:"K56Dims7Up"})]}),(0,a.jsx)("div",{className:"text-text-300 text-xs",children:Q?G?B:v:(0,a.jsx)(m.Z,{defaultMessage:"Public projects are disabled by your organization",id:"c2HBgZtgDR"})})]})]}),(0,a.jsxs)("label",{className:"flex w-full gap-2",children:[(0,a.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"private",checked:D.is_private,onChange:$}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)(d.$,{size:16,className:"-mt-1 mr-1 inline-block"}),(0,a.jsx)(m.Z,{defaultMessage:"Private",id:"viXE3205/2"})]}),(0,a.jsx)("div",{className:"text-text-300 text-xs",children:y})]})]})]}):null,(0,a.jsx)("div",{className:"mt-2 flex justify-end",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.z,{onClick:_,href:_?void 0:"/projects",variant:"secondary",disabled:F,children:(0,a.jsx)(m.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,a.jsx)(h.e,{children:(0,a.jsx)(i.z,{type:"submit",loading:F,children:(0,a.jsx)(m.Z,{defaultMessage:"Create project",id:"VUN1K7kSzC"})})})]})})]})}},20355:function(e,t,n){n.d(t,{A:function(){return m},S:function(){return u}});var a=n(27573),s=n(44512),l=n(1133),i=n(6385),r=n(33974),o=n(44053),d=n(7653);let c=(0,d.createContext)({isExpanded:!1,setIsExpanded:()=>void 0,closeSidebarOnMobile:()=>void 0,isMobile:!1});function u(){return(0,d.useContext)(c)}function m(e){let{children:t}=e,[n,u]=(0,s.n)(i.cn.SIDEBAR_PINNED,!1),[m,f]=(0,s.n)(i.cn.SIDEBAR_VISIBLE_ON_LOAD,!1),{width:x}=(0,r.n)(),p=0===x?!m:x<1024,[h,g]=d.useState(m&&n);(0,o.s)("keydown",e=>{var t;let n=(0,l.V5)()?e.metaKey:e.ctrlKey;(null===(t=e.key)||void 0===t?void 0:t.toLowerCase())==="."&&n&&(e.preventDefault(),g(e=>!e))});let v=(0,d.useMemo)(()=>({isExpanded:h,setIsExpanded:e=>{g(e),p||u(e)},closeSidebarOnMobile:()=>{p&&h&&g(!1)},isMobile:p}),[h,g,p,u]);return(0,d.useEffect)(()=>{p?(f(!1),g(!1)):(f(!0),g(n))},[p,f,g,n]),(0,a.jsx)(c.Provider,{value:v,children:t})}},64243:function(e,t,n){n.d(t,{X:function(){return a}});function a(e){return"default"===e.type?e.key:e.uuid}},34236:function(e,t,n){n.d(t,{D:function(){return d}});var a=n(27573),s=n(70354),l=n(56884),i=n(10607),r=n(7653),o=n(45790);function d(e){let{text:t,className:n}=e,[d,c]=(0,r.useState)(!1),u=(0,r.useRef)(null),[m,f]=(0,r.useState)(0);return((0,r.useLayoutEffect)(()=>{var e;f((null===(e=u.current)||void 0===e?void 0:e.getBoundingClientRect().height)||0)},[f]),t)?(0,a.jsxs)("div",{className:(0,i.Z)("overflow-hidden relative transition-[height] duration-150 ease-in-out","text-text-300 text-sm",n),style:{height:d?m+40:m>40?40:"auto"},children:[(0,a.jsx)("div",{ref:u,children:t}),m>=40&&(0,a.jsx)("div",{className:"absolute bottom-0 right-0 bg-bg-200 bottom-0",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute top-0 bottom-0 -left-4 w-6 bg-gradient-to-r from-transparent to-bg-200"}),(0,a.jsx)(s.z,{size:"inline",variant:"ghost",onClick:()=>c(e=>!e),className:"font-medium flex gap-1 items-center",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.U,{size:12,weight:"bold"}),(0,a.jsx)(o.Z,{defaultMessage:"Less",id:"mFYgAXM/x4"})]}):(0,a.jsx)(o.Z,{defaultMessage:"{ellipsis}More",id:"eRW5dl5m34",values:{ellipsis:"..."}})})]})})]}):null}},74750:function(e,t,n){n.d(t,{k:function(){return s}});var a=n(65654);async function s(e,t,n,s){return e?Object.fromEntries((await Promise.all(Object.entries(e).map(async e=>{let[l,i]=e;try{let e=await i.request(t,n,{timeout:5e3,...s});return[l,e]}catch(e){if(e instanceof a.yp&&e.code===a.jK.MethodNotFound)return null;return console.error("Request ".concat(t.method," to ").concat(l," failed: ").concat(e)),null}}))).filter(e=>null!==e)):{}}},38622:function(e,t,n){n.d(t,{Tz:function(){return c},Vr:function(){return m},ff:function(){return u}});var a=n(5161),s=n(3053),l=n(27895),i=n(65654),r=n(7653),o=n(22639),d=n(74750);function c(e){let{track:t}=(0,s.z$)(),[n,a]=(0,r.useState)({}),[l,o]=(0,r.useState)({});return(0,r.useEffect)(()=>{let n=!1;async function s(){if(!e)return;let s=await (0,d.k)(e,{method:"resources/list",params:{}},i.Ol,{timeout:6e5}),l=await (0,d.k)(e,{method:"prompts/list",params:{}},i.ev,{timeout:6e5});if(n)return;let r={},c={};Object.entries(s).forEach(e=>{var n,a,s;let[l,i]=e;t({event_key:"mcp.resources.listed",resource_count_on_server:null!==(a=null===(n=i.resources)||void 0===n?void 0:n.length)&&void 0!==a?a:0}),r[l]=(null!==(s=i.resources)&&void 0!==s?s:[]).sort((e,t)=>e.name.localeCompare(t.name))}),Object.entries(l).forEach(e=>{var n,a,s;let[l,i]=e;t({event_key:"mcp.prompts.listed",prompt_count_on_server:null!==(a=null===(n=i.prompts)||void 0===n?void 0:n.length)&&void 0!==a?a:0}),c[l]=(null!==(s=i.prompts)&&void 0!==s?s:[]).sort((e,t)=>e.name.localeCompare(t.name))}),a(r),o(c)}s();let l=setInterval(()=>void s(),6e5);return()=>{n=!0,clearInterval(l)}},[e,t]),{resources:n,prompts:l}}function u(){let{addError:e}=(0,l.e)(),{track:t}=(0,s.z$)(),{handleUpload:n}=(0,o.r)();return(0,r.useCallback)(async(a,s)=>{try{let e=(await a.request({method:"resources/read",params:{uri:s.uri}},i.vg,{timeout:15e3})).contents.map(e=>{let n;return"text"in e?(n=String(e.text),t({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(n=f(e.blob),t({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([n],s.name,{type:e.mimeType})});e.length>0&&await n(e)}catch(t){e("Error uploading resource: ".concat(t))}},[t,e,n])}function m(e){let{track:t}=(0,s.z$)(),{addError:n}=(0,l.e)(),{handleUpload:d}=(0,o.r)();return(0,r.useCallback)(async(s,l,r)=>{if(s&&l)try{let n=await s.request({method:"prompts/get",params:{name:l.name,arguments:r}},i.Go,{timeout:15e3});t({event_key:"mcp.prompts.used",argument_count:Object.keys(r).length,assistant_messages:n.messages.filter(e=>"assistant"===e.role).length,user_messages:n.messages.filter(e=>"user"===e.role).length,text_messages:n.messages.filter(e=>"text"===e.content.type).length,image_messages:n.messages.filter(e=>"image"===e.content.type).length});let o=(e,t)=>{let n=e=>{let t=a.wI[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},s=e=>"".concat(l.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],s("txt"),{type:"text/plain"});case"image":{let t=n(e.content.mimeType);return new File([f(e.content.data)],s(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var i;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!==(i=t.mimeType)&&void 0!==i?i:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let a=n(t.mimeType);return new File([f(t.blob)],"".concat(t.uri,".").concat(a),{type:t.mimeType})}throw Error("Invalid resource content")}};if(1===n.messages.length)await d([o(n.messages[0],0)]);else if(n.messages.length>1){let e=n.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[o(e,t)]:[]),t=n.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(t.length>0){let n=JSON.stringify(t,null,2);e.push(new File([n],"".concat(l.name,"_messages.json"),{type:"application/json"}))}await d(e)}null==e||e()}catch(e){n("Error getting prompt: ".concat(e))}},[t,n,d,e])}function f(e){let t=window.atob(e),n=new ArrayBuffer(t.length),a=new Uint8Array(n);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);return n}},89799:function(e,t,n){n.d(t,{Q:function(){return o}});var a=n(27573);n(10228);var s=n(7653),l=n(66605),i=n(22639),r=n(56971);function o(e){let{uuid:t,syncSource:n,onRemove:o,isEditable:d}=e,{mutateAsync:c}=(0,l.us)(),u=(0,s.useCallback)(()=>{c(t),null==o||o()},[c,t,o]),{projectUuid:m}=(0,i.r)();return(0,a.jsx)(r.n4,{location:"chat",projectUuid:m,syncSource:n,handleRemove:d?u:void 0,isEditable:d})}},14593:function(e,t,n){n.d(t,{m:function(){return u}});var a=n(27573),s=n(70354),l=n(52939),i=n(10228),r=n(58183);n(7653);var o=n(40950),d=n(45790),c=n(19132);let u=e=>{let{callerIdentifier:t,isOpen:n,onClose:u}=e,m=(0,o.Z)(),f=(0,r.useDynamicConfig)("claudeai_gmail_auth_modal").get("help_center_url","https://support.anthropic.com/en/articles/10168395-setting-up-integrations-on-claude-ai"),{toggleIntegrationEnabled:x}=(0,c.Bl)(),{startAuth:p}=(0,c.QD)(i.Fg.GMAIL,{callerIdentifier:t,handleAuthSuccess:()=>x(i.Fg.GMAIL,!0)});return(0,a.jsx)(l.u_,{modalSize:"xl",isOpen:n,onClose:u,hasCloseButton:!0,title:m.formatMessage({defaultMessage:"Authorize Gmail access",id:"qAaNEGdVAs"}),autoCloseOnFocusOut:!1,children:(0,a.jsxs)("div",{className:"mt-5 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{children:(0,a.jsx)(d.Z,{defaultMessage:"If you authorize Claude to access your Gmail messages, Claude may:",id:"jSILNEnCYt"})}),(0,a.jsx)("ul",{className:"list-disc pl-6",children:(0,a.jsx)("li",{children:(0,a.jsx)(d.Z,{defaultMessage:"Use the data to respond to your prompts, when appropriate (e.g. summarize my inbox)",id:"8TFSr6sl4m"})})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"font-medium",children:(0,a.jsx)(d.Z,{defaultMessage:"You retain control of your Gmail data at all times:",id:"tWXZ+kw0m8"})}),(0,a.jsxs)("ul",{className:"list-disc pl-6",children:[(0,a.jsx)("li",{children:(0,a.jsx)(d.Z,{defaultMessage:"We do not share your Gmail data with anyone",id:"QOdRYS1GQC"})}),(0,a.jsx)("li",{children:(0,a.jsx)(d.Z,{defaultMessage:"You can <link>delete your conversations with Claude</link>, which will also delete any Gmail data Claude used in that conversation",id:"i7OsuHlq9d",values:{link:e=>(0,a.jsx)("a",{href:"https://support.anthropic.com/en/articles/8230524-how-can-i-delete-or-rename-a-conversation",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 underline",children:e})}})})]})]}),(0,a.jsx)("p",{children:(0,a.jsx)(d.Z,{defaultMessage:"More details in our <link>Help Center</link>. If you click continue below, you’ll be redirected to Google to authorize your Gmail integration.",id:"86giQGAK0E",values:{link:e=>(0,a.jsx)("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 underline",children:e})}})}),(0,a.jsxs)("div",{className:"flex justify-end mt-6",children:[(0,a.jsx)(s.z,{variant:"secondary",className:"mr-3",onClick:u,children:(0,a.jsx)(d.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,a.jsx)(s.z,{variant:"primary",onClick:()=>{p(),u()},children:(0,a.jsx)(d.Z,{defaultMessage:"Continue",id:"acrOozm08x"})})]})]})})}},64014:function(e,t,n){n.d(t,{i:function(){return l}});var a=n(87033),s=n(58183);let l=()=>{let e=(0,s.useLayer)("frontend"),{value:t}=(0,a.FL)("artifacts_enabled");return!!t||e.get("artifacts_enabled_by_default",!1)}},16173:function(e,t,n){n.d(t,{g:function(){return s}});var a=n(87033);function s(){let{value:e}=(0,a.FL)("trials_and_tribulations_of_high_school_football");return!1}},16282:function(e,t,n){n.d(t,{Xz:function(){return o},a9:function(){return r},kD:function(){return d},mB:function(){return i}});var a=n(27573),s=n(5161),l=n(69735);let i=e=>{let{file:t,size:n,showWarnings:s,onRemoveFile:i,onClick:r,isEditable:o}=e;return"xxs"===n?(0,a.jsx)(l.yL,{file:t}):(0,a.jsx)(l.mB,{file:t,showWarnings:s,handleRemove:i,handleClick:r,isEditable:o})};function r(e){let t=e.match(/\.[^/.]+$/);return t&&(0,s.tB)({imagesEnabled:!0}).includes(t[0].toLowerCase())?e.replace(/\.[^/.]+$/,""):e}let o=()=>(0,a.jsx)(l.vQ,{title:"Images hidden in shared chats",isError:!0}),d=()=>(0,a.jsx)(l.vQ,{title:"Files hidden in shared chats",isError:!0})},15281:function(e,t,n){n.d(t,{b:function(){return m},w:function(){return f}});var a=n(28803),s=n(3053),l=n(27218),i=n(51432),r=n(77930),o=n(23368),d=n.n(o),c=n(81695),u=n(7653);let m=()=>{let e="new-conversation-params-for-navigation",t=(0,r.useQueryClient)(),n=(0,u.useCallback)(()=>{let t=localStorage.getItem(e);if(!t)return{};try{let e=JSON.parse(t);return d()(e,e=>Date.now()-e.created_at<6e4)}catch(t){localStorage.removeItem(e)}return{}},[]);return{prepareNewConversation:(0,u.useCallback)((a,s)=>{let l={created_at:Date.now(),...s};t.setQueryData([e,a],l);let i=n();i[a]=l;try{localStorage.setItem(e,JSON.stringify(i))}catch(e){}},[t,n]),getCreateParamsForConvo:(0,u.useCallback)(a=>{let s=n(),l=t.getQueryData([e,a])||s[a];t.removeQueries({queryKey:[e,a]});let i=d()(s,(e,t)=>t!==a);return localStorage.setItem(e,JSON.stringify(i)),l},[t,n])}};function f(){var e;let t=(0,s.z$)(),{data:n}=(0,a.m)(),{mutateAsync:r}=(0,a.$Y)(),[o,d]=(0,u.useReducer)(i.H,"",i.H),{prepareNewConversation:f}=m(),{account:x}=(0,l.t)(),p=(0,c.useRouter)();return(0,u.useCallback)(async e=>{var a;let{model:s,project_uuid:l,include_conversation_preferences:i,paprika_mode:c,compass_mode:u,create_mode:m,name:h}=e,g=r({uuid:o,name:null!=h?h:"",model:s,project_uuid:l,include_conversation_preferences:i,paprika_mode:c,compass_mode:u,create_mode:m});if(f(o,e),await g,(null==x?void 0:null===(a=x.settings)||void 0===a?void 0:a.has_finished_claudeai_onboarding)===!1){let e=new URLSearchParams;e.append("returnTo","/chat/".concat(o));let t="/onboarding?".concat(e.toString());p.push(t)}else p.push("/chat/".concat(o));return d(),(null==n?void 0:n.is_first_conversation)&&await t.track({event_key:"chat.conversation.first_conversation_created",surface:"claude.easychat.top"}),{uuid:o}},[r,o,n,t,p,f,null==x?void 0:null===(e=x.settings)||void 0===e?void 0:e.has_finished_claudeai_onboarding])}},33209:function(e,t,n){n.d(t,{MD:function(){return x},S3:function(){return u},x2:function(){return f}});var a=n(13262),s=n(7653),l=n(5362),i=n(8571),r=n(27218),o=n(68571);let d=async e=>{if(o.env.NEXT_PUBLIC_DISABLE_PAYMENTS)return Promise.resolve(null);let{loadStripe:t}=await n.e(3338).then(n.bind(n,93338));return t(e)},c=["ar","bg","cs","da","de","el","en","en-AU","en-CA","en-NZ","en-GB","es","es-ES","es-419","et","fi","fil","fr","fr-CA","fr-FR","he","hu","hr","id","it","it-IT","ja","ko","lt","lv","ms","mt","nb","nl","no","pl","pt","pt-BR","ro","ru","sk","sl","sv","th","tr","vi","zh","zh-HK","zh-TW"],u=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:t}=(0,r.t)(),{data:n,mutate:i,isIdle:o}=(0,l.uC)("/api/stripe/".concat(null==t?void 0:t.uuid,"/intent"),"POST",{enabled:!!(null==t?void 0:t.uuid),retry:2,retryDelay:2e3,mutationKey:[a.CN,null==t?void 0:t.uuid]});return(0,s.useEffect)(()=>{o&&e&&i()},[i,o,e]),n},m=null,f=()=>{let{stripePublishableKey:e}=(0,i.mX)();return m||(m=d(e)),m},x=e=>{if(c.includes(e))return e;let t=e.split("-")[0];return c.includes(t)?t:"en"}},835:function(e,t,n){n.d(t,{q:function(){return i}});var a=n(27573),s=n(50322),l=n(10607);let i=e=>{let{name:t,size:n="md",variant:i="default"}=e,r=null==t?void 0:t.split(" ").map(e=>0===e.length?"":e[0]).join("").substring(0,2).toLocaleUpperCase();return(0,a.jsx)("div",{className:(0,l.W)("flex shrink-0 items-center justify-center rounded-full font-bold select-none",{"h-4 w-4 text-[7px]":"xs"===n,"h-7 w-7 text-[12px]":"sm"===n,"h-8 w-8 text-[14px]":"md"===n,"h-10 w-10 text-lg":"lg"===n,"h-16 w-16 text-2xl":"xl"===n,"bg-text-200 text-bg-100":"default"===i,"bg-accent-pro-100 text-oncolor-100":"pro"===i,"bg-transparent text-text-300":"cardamom"===i}),children:r||(0,a.jsx)(s.n,{weight:(0,l.W)({regular:"xs"===n||"sm"===n,light:"md"===n,thin:"lg"===n||"xl"===n}),size:(0,l.W)({12:"xs"===n||"sm"===n,20:"md"===n,40:"lg"===n||"xl"===n})})})}},69321:function(e,t,n){n.d(t,{ClientIntlProvider:function(){return f},Gc:function(){return h},d7:function(){return p},lF:function(){return g},lb:function(){return x}});var a=n(27573),s=n(66894),l=n(43290),i=n(7653),r=n(22247),o=n(45790),d=n(72358);let c=new Set,u=e=>{if(e.message.includes("MISSING_TRANSLATION")){if(c.has(e.message))return;c.add(e.message)}console.error(e)},m=()=>void 0;function f(e){let{locale:t,messages:n,children:o,hideErrors:d}=e;return(0,i.useEffect)(()=>{l.Zr.defaultLocale=t},[t]),(0,a.jsx)(r.Z,{locale:t,messages:n,onError:d?m:(0,s.Ry)()?u:void 0,fallbackOnEmptyString:!1,children:(0,a.jsx)(a.Fragment,{children:o})})}function x(e){let{id:t}=e;return(0,a.jsx)(o.Z,{id:(0,d.Y_)(t),defaultMessage:" "})}function p(e){let{id:t}=e;return(0,a.jsx)(o.Z,{id:(0,d.g2)(t),defaultMessage:" "})}function h(e){let{id:t,intl:n}=e;return n.formatMessage({id:(0,d.g2)(t),defaultMessage:" "})}function g(e){let{id:t,intl:n}=e;return n.formatMessage({id:(0,d.Y_)(t),defaultMessage:" "})}},7276:function(e,t,n){n.d(t,{GR:function(){return l.QQ},M$:function(){return c},NZ:function(){return u},mH:function(){return d}});var a=n(41596),s=n(9788),l=n(22523);function i(){let e=(0,a._)(["p-4 bg-bg-300 rounded-xl"]);return i=function(){return e},e}function r(){let e=(0,a._)(["basis-0 flex-col gap-1 inline-flex"]);return r=function(){return e},e}function o(){let e=(0,a._)(["items-center gap-2 inline-flex text-text-000 font-styrene font-medium text-lg leading-7"]);return o=function(){return e},e}let d=s.q.div(i()),c=s.q.div(r()),u=s.q.div(o())},11579:function(e,t,n){n.d(t,{l:function(){return s}});var a=n(27573);let s=e=>{let{height:t,className:n}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 139 34",className:n,height:t,fill:"currentColor","aria-label":"Claude",children:(0,a.jsx)("path",{d:"M18.07 30.79c-5.02 0-8.46-2.8-10.08-7.11a19.2 19.2 0 0 1-1.22-7.04C6.77 9.41 10 4.4 17.16 4.4c4.82 0 7.78 2.1 9.48 7.1h2.06l-.28-6.9c-2.88-1.86-6.48-2.81-10.87-2.81-6.16 0-11.41 2.77-14.34 7.74A16.77 16.77 0 0 0 1 18.2c0 5.53 2.6 10.42 7.5 13.15a17.51 17.51 0 0 0 8.74 2.06c4.78 0 8.57-.91 11.93-2.5l.87-7.62h-2.1c-1.26 3.48-2.76 5.57-5.25 6.68-1.22.55-2.76.83-4.62.83Zm21.65-26.4.2-3.39H38.5l-6.33 1.9v1.02l2.8 1.3v23.79c0 1.62-.82 1.98-3 2.25V33h10.75v-1.74c-2.17-.27-3-.63-3-2.25V4.4Zm42.75 29h.83l7.27-1.38v-1.78l-1.03-.07c-1.7-.16-2.13-.52-2.13-1.9V15.58l.2-4.07h-1.15l-6.87.99v1.73l.67.12c1.85.28 2.4.8 2.4 2.1v11.3C80.9 29.13 79.2 30 77.19 30c-2.26 0-3.64-1.15-3.64-3.8V15.58l.2-4.07h-1.19l-6.87.99v1.73l.71.12c1.86.28 2.41.8 2.41 2.1v10.43c0 4.42 2.49 6.52 6.48 6.52 3.04 0 5.53-1.62 7.39-3.88l-.2 3.88Zm-20-14.06c0-5.65-3-7.82-8.4-7.82-4.79 0-8.27 1.97-8.27 5.25 0 1 .36 1.74 1.07 2.25l3.64-.47c-.16-1.1-.24-1.78-.24-2.05 0-1.86.99-2.8 3-2.8 2.97 0 4.47 2.09 4.47 5.44v1.11l-7.51 2.25c-2.49.67-3.91 1.27-4.86 2.65a5 5 0 0 0-.71 2.8c0 3.2 2.21 5.46 5.97 5.46 2.72 0 5.13-1.23 7.23-3.56.75 2.33 1.9 3.56 3.95 3.56 1.66 0 3.16-.68 4.5-1.98l-.4-1.38c-.59.16-1.14.23-1.73.23-1.15 0-1.7-.9-1.7-2.68v-8.26Zm-9.6 10.87c-2.05 0-3.31-1.19-3.31-3.28 0-1.43.67-2.26 2.1-2.73l6.08-1.94v5.85c-1.94 1.46-3.08 2.1-4.86 2.1Zm63.3 1.81v-1.78l-1.02-.07c-1.7-.16-2.14-.52-2.14-1.9V4.4l.2-3.4h-1.42l-6.32 1.9v1.02l2.8 1.3v7.83a8.84 8.84 0 0 0-5.37-1.54c-6.28 0-11.18 4.78-11.18 11.93 0 5.89 3.51 9.96 9.32 9.96 3 0 5.61-1.47 7.23-3.72l-.2 3.72h.83l7.27-1.39Zm-13.15-18.13c3 0 5.25 1.74 5.25 4.94v9a7.2 7.2 0 0 1-5.21 2.1c-4.31 0-6.48-3.4-6.48-7.94 0-5.1 2.48-8.1 6.44-8.1Zm28.52 4.5c-.55-2.64-2.17-4.15-4.42-4.15-3.36 0-5.7 2.53-5.7 6.17 0 5.37 2.85 8.85 7.44 8.85a8.6 8.6 0 0 0 7.38-4.35l1.35.36c-.6 4.66-4.82 8.14-10 8.14-6.08 0-10.27-4.5-10.27-10.9 0-6.45 4.54-11 10.63-11 4.54 0 7.74 2.73 8.77 7.48l-15.84 4.85V21.7l10.66-3.32Z"})})}},22523:function(e,t,n){n.d(t,{Fj:function(){return w},LK:function(){return b},LZ:function(){return g},OT:function(){return j},QE:function(){return y},QQ:function(){return p},X2:function(){return h},pF:function(){return v}});var a=n(41596),s=n(9788);function l(){let e=(0,a._)(["\n  bg-bg-100\n  border-0.5\n  border-border-300\n  rounded-xl\n  p-6\n  md:p-8\n"]);return l=function(){return e},e}function i(){let e=(0,a._)(["\n  flex\n  flex-row\n  gap-8\n  justify-between\n  items-center\n  py-2\n"]);return i=function(){return e},e}function r(){let e=(0,a._)(["\n  flex flex-col\n  border-border-400\n  border-0.5\n"]);return r=function(){return e},e}function o(){let e=(0,a._)(["\n  text-text-100 \n  font-medium\n"]);return o=function(){return e},e}function d(){let e=(0,a._)(["\n  text-text-100 \n  font-medium\n"]);return d=function(){return e},e}function c(){let e=(0,a._)(["\n  text-text-300 \n  text-sm\n"]);return c=function(){return e},e}function u(){let e=(0,a._)(["py-8 px-10 bg-bg-100 border-0.5 border-border-300 rounded-xl"]);return u=function(){return e},e}function m(){let e=(0,a._)(["text-text-100 font-styrene text-lg font-medium tracking-tight"]);return m=function(){return e},e}function f(){let e=(0,a._)(["text-text-200 font-styrene tracking-tight"]);return f=function(){return e},e}function x(){let e=(0,a._)(["text-text-200 font-styrene text-sm tracking-tight"]);return x=function(){return e},e}let p=s.q.section(l()),h=s.q.div(i()),g=s.q.div(r()),v=s.q.p(o());s.q.p(d());let y=s.q.p(c());s.q.section(u());let j=s.q.h3(m()),b=s.q.p(f()),w=s.q.p(x())},2723:function(e,t,n){n.d(t,{J:function(){return s}});var a=n(7653);let s=(e,t,n,s)=>(0,a.useMemo)(()=>{{let e=getComputedStyle(document.body);return"hsl(".concat(e.getPropertyValue("--".concat(s)),")")}},[n,s,t,e])},28386:function(e,t,n){n.d(t,{J:function(){return a}});let a={snappyOut:[.19,1,.22,1],inOutQuart:[.77,0,.175,1],outCirc:[.075,.82,.165,1],inOutBase:[.25,.1,.25,1]}},29670:function(e,t,n){n.d(t,{HY:function(){return i},mz:function(){return s},xG:function(){return a}});let a=function(e,t){let{preferWholeNumber:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=Math.round(e);let a={minimumFractionDigits:2,maximumFractionDigits:2};n&&e/100%1==0&&(a.minimumFractionDigits=0,a.maximumFractionDigits=0);let s=navigator.languages&&navigator.languages.length?navigator.languages:navigator.language?navigator.language:"en-US",l="string"==typeof s?s:s[0];return(["SGD","AUD","NZD"].includes(t)||"USD"===t&&"en-US"!==l)&&(a.currencyDisplay="code"),new Intl.NumberFormat(s||void 0,{style:"currency",currency:t,...a}).format(e/100)};function s(e){let{amount:t,currency:n,preferWholeNumber:s}=e;return a(t,n,{preferWholeNumber:s})}let l={aud:{showIncluded:!0,taxLabel:"GST"},brl:{showIncluded:!1,taxLabel:null},cad:{showIncluded:!1,taxLabel:null},eur:{showIncluded:!1,taxLabel:"VAT"},gbp:{showIncluded:!0,taxLabel:"VAT"},nzd:{showIncluded:!0,taxLabel:"VAT"},sgd:{showIncluded:!0,taxLabel:"GST"},usd:{showIncluded:!1,taxLabel:null}};function i(e){var t;return null!==(t=l[e.toLowerCase()])&&void 0!==t?t:l.usd}},20456:function(e,t,n){var a,s,l,i;n.d(t,{$:function(){return a},s:function(){return s}}),(l=a||(a={})).CLAUDE_CODE="claude_code",l.ORG_ENABLE_INTEGRATIONS="org_enable_integrations",l.MONKEYS_IN_A_BARREL="monkeys_in_a_barrel",l.AZURE_KNIGHT_GALLANT="azure_knight_gallant",l.RESEARCH_AND_MCP="research_and_mcp",(i=s||(s={})).INTERACTED="interacted",i.DISMISSED="dismissed"},42147:function(e,t,n){var a,s;n.d(t,{b:function(){return a}}),(s=a||(a={})).CREATE="create",s.CREATE_MANUALLY="create_manually",s.LIST="list",s.EDIT="edit"},30131:function(e,t,n){n.d(t,{dI:function(){return d},lE:function(){return o}});var a=n(41270),s=n(87033),l=n(98649);let i=[],r=[];function o(){let e=d(),t=(0,s.Zr)("frontend_fallback_paprika_config","modes",r,c);return e.length>0?e:t}function d(){return(0,s.Zr)("paprika_config","modes",i,c)}let c=a.z.array(a.z.object({id:a.z.string(),title:a.z.string(),description:a.z.string(),description_key:a.z.string().optional(),paprika_mode_value:l.Xs.optional()}))}}]);