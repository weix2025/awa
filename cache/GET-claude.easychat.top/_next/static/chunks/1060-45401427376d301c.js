"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1060],{6350:function(e,t,s){s.d(t,{t:function(){return r},y:function(){return o}});var n=s(27573),a=s(7653),l=s(6688);let i=(0,a.createContext)(void 0);function r(e){let{project:t,children:s}=e,a=(0,l.k)(t);return(0,n.jsx)(i.Provider,{value:a,children:s})}function o(){return(0,a.useContext)(i)}},96816:function(e,t,s){s.d(t,{H:function(){return r}});var n=s(27573),a=s(32737),l=s(88146),i=s(45790);function r(e){let{children:t}=e;return(0,n.jsx)(a.u,{tooltipContent:(0,n.jsxs)("div",{className:"max-w-48 p-1",children:[(0,n.jsx)("p",{className:"mb-2 whitespace-break-spaces text-xs tracking-tight",children:(0,n.jsx)(i.Z,{defaultMessage:"This is an example project. Create a new project to work with your own documents.",id:"aod9/juMdU"})}),(0,n.jsx)(l.default,{href:"/projects/create",className:"text-accent-secondary-200 text-xs tracking-tight",children:(0,n.jsx)(i.Z,{defaultMessage:"Create new project",id:"a7FtAnfVfj"})})]}),children:t})}},58865:function(e,t,s){s.d(t,{W:function(){return f}});var n=s(27573),a=s(27895),l=s(5984),i=s(70354),r=s(52939),o=s(87033),d=s(88146),c=s(7653),u=s(40950),x=s(45790),g=s(32559);function f(e){let{isOpen:t,onClose:s,project:f}=e,m=(0,u.Z)(),[h,p]=(0,c.useState)(f.prompt_template),[j,v]=(0,c.useState)(!1),{value:y}=(0,o.FL)("claudeai_custom_styles"),{value:w}=(0,o.FL)("claude_ai_cayenne"),{addError:b}=(0,a.e)(),{mutateAsync:M}=(0,g.dY)(f.uuid),S=async()=>{v(!0);try{await M({prompt_template:h}),s(),v(!1)}catch(e){b(m.formatMessage({defaultMessage:"Error saving instructions, please try again later",id:"WL3FdCcP2y"})),v(!1)}},N=f.prompt_template.length>0&&0===h.length,k=w?(0,n.jsx)(x.Z,{defaultMessage:"This will work alongside <link>user preferences</link> and the selected style in a chat.",values:{link:e=>(0,n.jsx)(d.default,{className:"hover:underline",href:"/settings/profile",children:e})},id:"NlixH3av58"}):(0,n.jsx)(x.Z,{defaultMessage:"This will work alongside the selected style in a chat.",id:"rptxrPz/Y3"});return(0,n.jsxs)(r.u_,{isOpen:t,onClose:s,modalSize:"xl",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("h2",{className:"font-styrene-display text-xl font-medium",children:(0,n.jsx)(x.Z,{defaultMessage:"Set project instructions",id:"+On7CFwfGv"})}),(0,n.jsxs)("p",{className:"text-text-300 text-sm",children:[(0,n.jsx)(x.Z,{defaultMessage:"Provide Claude with relevant instructions and information for chats within {projectName}.",id:"NM6ePuQ0y+",values:{projectName:f.name}}),"\xa0",y&&k]})]}),(0,n.jsx)("div",{className:"mb-6 mt-3",children:(0,n.jsx)(l.Kx,{"data-testid":"custom-instructions-textarea",value:h,onChange:e=>p(e.target.value),placeholder:[m.formatMessage({defaultMessage:"Think step by step and show reasoning for complex problems. Use specific examples.",id:"j554E3Ar1K"}),m.formatMessage({defaultMessage:"Break down large tasks and ask clarifying questions when needed.",id:"H/tJ47E9to"}),m.formatMessage({defaultMessage:"Use Artifacts only for web apps and code demos.",id:"U50hIJOW7M"}),m.formatMessage({defaultMessage:"When giving feedback, explain thought process and highlight issues and opportunities.",id:"f2YGj7vTV3"})],minRows:16,required:!0,customScrollbar:!0,className:"max-h-80"})}),(0,n.jsxs)("div",{className:"mt-2 flex justify-end gap-2",children:[(0,n.jsx)(i.z,{variant:"secondary",onClick:s,children:(0,n.jsx)(x.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,n.jsx)(i.z,{loading:j,disabled:f.prompt_template===h,onClick:()=>{S()},children:N?(0,n.jsx)(x.Z,{defaultMessage:"Clear instructions",id:"aHS9gkqH/s"}):(0,n.jsx)(x.Z,{defaultMessage:"Save instructions",id:"wtm6MF4hNg"})})]})]})}},62576:function(e,t,s){s.d(t,{U:function(){return A}});var n=s(27573),a=s(7653),l=s(69735),i=s(27895),r=s(70354),o=s(10571),d=s(10228),c=s(32411),u=s(8626),x=s(8927),g=s(68425),f=s(45790),m=s(95899),h=s(92676),p=s(53949);let j=e=>{let{doc:t,canEditKnowledgeBase:s,compressButton:i,...r}=e,{mutate:o}=(0,m.ER)(t.project_uuid),d=(0,a.useMemo)(()=>new TextEncoder().encode(t.content).length,[t]),c={created_at:t.created_at,file_name:t.file_name,file_size:d,file_type:"",extracted_content:t.content,origin:p.i.UserUpload};return(0,n.jsx)(l.mB,{...r,file:c,handleRemove:()=>o({docUuid:t.uuid})})},v=e=>{let{file:t,projectUuid:s,canEditKnowledgeBase:a,...i}=e,{mutate:r,isPending:o}=(0,m.h4)(s);return(0,n.jsx)(l.mB,{...i,file:t,handleRemove:()=>{r({file_uuids:[t.file_uuid]})},isLoading:o})};var y=s(6350),w=s(76742),b=s(36041),M=s(32737),S=s(40845),N=s(30070),k=s(40950),C=s(19132),D=s(56971);function P(e){let{projectUuid:t,syncSource:s,isActionsHidden:l,canEditKnowledgeBase:r,...o}=e,{mutateAsync:c}=(0,h.zB)(t),{isUpdating:u,handleUpdate:x,isFailing:g}=function(e){let{projectUuid:t,syncSource:s}=e,[n,l]=(0,a.useState)(!1),{addSuccess:r}=(0,i.e)(),o=(0,k.Z)(),{mutate:d}=(0,h.l2)(t,{onSuccess:()=>{r(o.formatMessage({defaultMessage:"Sync started",id:"yyuAtTi0E+"}))}});(0,a.useEffect)(()=>{l(!1)},[s.status]);let c=(0,C.sf)(s)||n,u=(0,C.xm)(s),x=(0,a.useCallback)(()=>{c||(l(!0),d({sync_source_uuid:s.uuid,sync_source_config:s.config}))},[c,d,s.config,s.uuid]);return{isUpdating:c,isFailing:u,handleUpdate:x}}({projectUuid:t,syncSource:s});return(0,n.jsx)(D.n4,{...o,location:"project",projectUuid:t,syncSource:s,handleRemove:()=>c(s.uuid),actions:s.type===d.Fg.GITHUB?(0,n.jsx)(U,{handleUpdate:x,isFailing:g,isSyncing:u}):void 0,isSyncing:u||g})}function U(e){let{handleUpdate:t,isFailing:s,isSyncing:a}=e,i=(0,k.Z)();return(0,n.jsx)(M.u,{tooltipContent:a?i.formatMessage({defaultMessage:"Syncing...",id:"S92mvo6R0o"}):s?i.formatMessage({defaultMessage:"Sync failed. Click to retry",id:"zOAqlyzs1U"}):i.formatMessage({defaultMessage:"Sync now",id:"SwsYB/OerA"}),children:(0,n.jsx)(l.l1,{className:"!w-[18px] !px-0 shrink-0",onClick:t,children:a?(0,n.jsx)(S.t,{size:12,className:"animate-spin"}):s?(0,n.jsx)(N.v,{size:12}):(0,n.jsx)(S.t,{size:12})})})}s(27218);var _=s(22269);let z="project_syncs",E="project_docs",Z="project_linked_files";function A(e){let{project:t,canEditKnowledgeBase:s=!1,isUploadingDoc:i=!1,isUploadingDriveSync:d=!1,isUploadingOutlineSync:u=!1,isUploadingGithubSync:m=!1,setIsUploadingDoc:h,setIsUploadingDriveSync:p,setIsUploadingOutlineSync:w,setIsUploadingGithubSync:M,maxItems:S,onViewAll:N,isEditable:k}=e,{githubSyncSources:C,driveSyncSources:D,outlineSyncSources:U,projectDocs:A,linkedFiles:R,isFetchingKnowledge:T,knowledgeCount:K}=O({projectUuid:t.uuid,maxItems:S}),{isDeleting:G,selectedItems:V,handleSelect:B,selectAllItems:H,isInSelectionMode:W,toggleSelectMode:Y,handleDeleteSelected:q}=I({githubSyncSources:C,driveSyncSources:D,outlineSyncSources:U,projectDocs:A,linkedFiles:R,projectUuid:t.uuid,isEnabled:s});F({clearUploadingState:()=>null==h?void 0:h(!1),numItems:A.length+R.length}),F({clearUploadingState:()=>null==M?void 0:M(!1),numItems:C.length}),F({clearUploadingState:()=>null==p?void 0:p(!1),numItems:D.length}),F({clearUploadingState:()=>null==w?void 0:w(!1),numItems:U.length});let J=new Set(V.map(e=>{let{uuid:t}=e;return t})),Q=(0,y.y)();if(T)return(0,n.jsx)(o.g,{height:65,className:"opacity-25 rounded-lg mb-3 mt-3"});if(0===K&&!i&&!d&&!u&&!m)return(0,n.jsx)(L,{canEditKnowledgeBase:s,projectStrings:Q});let X=(0,n.jsx)(x.M,{children:W&&(0,n.jsx)(g.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"ml-auto",children:(0,n.jsx)("div",{className:"flex mt-3 gap-2 justify-end",children:(0,n.jsx)(b.J,{isLoading:G,numSelected:V.length,totalNumItems:K,handleSelectAll:H,handleCancel:()=>Y(!1),handleDeleteSelected:q})})},"item-management-menu")}),$={size:"stretch",isEditable:k,isInSelectionMode:W};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.M,{children:s&&(0,n.jsx)(g.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:(0,n.jsx)(_.n,{projectUuid:t.uuid})})}),(0,n.jsx)("ul",{className:"grid grid-cols-[repeat(auto-fill,minmax(120px,1fr))] gap-3",children:(0,n.jsxs)(x.M,{initial:!1,children:[(0,n.jsx)(l.fz,{isShown:d,...$}),D.map(e=>(0,n.jsx)(P,{projectUuid:t.uuid,syncSource:e,canEditKnowledgeBase:s,isActionsHidden:W||!s,...$,isSelected:J.has(e.uuid),handleSelect:(t,s)=>B({uuid:e.uuid,type:z},t,s)},e.uuid)),(0,n.jsx)(l.fz,{isShown:u,...$}),U.map(e=>(0,n.jsx)(P,{projectUuid:t.uuid,syncSource:e,canEditKnowledgeBase:s,isActionsHidden:W||!s,...$,isSelected:J.has(e.uuid),handleSelect:(t,s)=>B({uuid:e.uuid,type:z},t,s)},e.uuid)),(0,n.jsx)(l.fz,{isShown:m,...$}),C.map(e=>(0,a.createElement)(P,{...$,key:e.uuid,projectUuid:t.uuid,syncSource:e,canEditKnowledgeBase:s,isActionsHidden:W||!s,isSelected:J.has(e.uuid),handleSelect:(t,s)=>B({uuid:e.uuid,type:z},t,s)})),(0,n.jsx)(l.fz,{isShown:i,...$}),A.map(e=>(0,a.createElement)(j,{...$,key:e.uuid,doc:e,canEditKnowledgeBase:s,compressButton:void 0,isSelected:J.has(e.uuid),handleSelect:(t,s)=>B({uuid:e.uuid,type:E},t,s)})),R.map(e=>(0,a.createElement)(v,{...$,key:e.file_uuid,file:e,projectUuid:t.uuid,canEditKnowledgeBase:s,handleSelect:(t,s)=>B({uuid:e.file_uuid,type:Z},t,s),isSelected:J.has(e.file_uuid)}))]})}),X,!!N&&!!S&&K>S&&(0,n.jsx)("div",{children:(0,n.jsxs)(r.z,{variant:"unstyled",onClick:N,className:"hover:text-text-000 hover:underline !px-0 text-sm",children:[(0,n.jsx)(f.Z,{defaultMessage:"View all {count} files",id:"b36mSZ46cW",values:{count:K}}),(0,n.jsx)(c.o,{size:16,className:"inline-block pl-1"})]})})]})}let F=e=>{let{clearUploadingState:t,numItems:s}=e,n=(0,a.useRef)(s);(0,a.useEffect)(()=>{s>n.current&&t(),n.current=s},[s,t])},O=e=>{let{projectUuid:t,maxItems:s}=e,{data:n=[],isLoading:a}=(0,m.Kf)(t),l=[...n],{data:i=[],isLoading:r}=(0,h.yg)(t),{data:o=[],isLoading:c}=(0,m.pK)(t),u=[...o],x=i.filter(e=>{let{type:t}=e;return t===d.Fg.GDRIVE}),g=i.filter(e=>{let{type:t}=e;return t===d.Fg.OUTLINE}),f=i.filter(e=>{let{type:t}=e;return t===d.Fg.GITHUB});if(s){let e=s;[x,g,f,l,u].forEach(t=>{t.splice(e),e=Math.max(0,e-t.length)})}let p=[l,i,u].reduce((e,t)=>{var s;return e+(null!==(s=null==t?void 0:t.length)&&void 0!==s?s:0)},0);return{driveSyncSources:x,outlineSyncSources:g,githubSyncSources:f,projectDocs:l,linkedFiles:u,isFetchingKnowledge:a||r||c,knowledgeCount:p}},I=e=>{let{githubSyncSources:t,driveSyncSources:s,outlineSyncSources:n,projectDocs:a,linkedFiles:l,projectUuid:r,isEnabled:o}=e,d=s.map(e=>{let{uuid:t}=e;return{type:z,uuid:t}}).concat(t.map(e=>{let{uuid:t}=e;return{type:z,uuid:t}})).concat(n.map(e=>{let{uuid:t}=e;return{type:z,uuid:t}})).concat(a.map(e=>{let{uuid:t}=e;return{type:E,uuid:t}})).concat(l.map(e=>{let{file_uuid:t}=e;return{type:Z,uuid:t}})),{selectedItems:c,handleSelect:u,selectAllItems:x,isInSelectionMode:g,toggleSelectMode:f}=(0,w.M)(d,!o),{addError:p}=(0,i.e)(),{mutateAsync:j,isPending:v}=(0,h.IP)(r),{mutateAsync:y,isPending:b}=(0,m.op)(r),{mutateAsync:M,isPending:S}=(0,m.h4)(r),N=async()=>{let e=c.filter(e=>{let{type:t}=e;return t===E}),t=c.filter(e=>{let{type:t}=e;return t===z}),s=c.filter(e=>{let{type:t}=e;return t===Z});f(!1);try{await Promise.all([e.length?y({doc_uuids:e.map(e=>{let{uuid:t}=e;return t})}):Promise.resolve(),t.length?j({sync_source_uuids:t.map(e=>{let{uuid:t}=e;return t})}):Promise.resolve(),s.length?M({file_uuids:s.map(e=>{let{uuid:t}=e;return t})}):Promise.resolve()])}catch(e){p("Something went wrong while deleting. Refresh the page and try again")}};return{isDeleting:b||v||S,selectedItems:c,handleSelect:u,selectAllItems:x,isInSelectionMode:g,toggleSelectMode:f,handleDeleteSelected:N}},L=e=>{var t,s;let{canEditKnowledgeBase:a,projectStrings:l}=e;return(0,n.jsxs)("div",{className:"bg-bg-500/10 text-text-400 mb-1 mt-2 flex w-full flex-col items-center gap-3 rounded-lg px-6 pb-10 pt-8 text-center text-sm",children:[(0,n.jsx)(u.g,{size:36,weight:"thin"}),a?null!==(t=null==l?void 0:l.projectNoKnowledgeCanAddMessage)&&void 0!==t?t:(0,n.jsx)(f.Z,{defaultMessage:"No knowledge added yet. Add PDFs, documents, or other text to the project knowledge base that Claude will reference in every project conversation.",id:"j7/C6AKAfW"}):null!==(s=null==l?void 0:l.projectNoKnowledgeCantAddMessage)&&void 0!==s?s:(0,n.jsx)(f.Z,{defaultMessage:"No knowledge added yet.",id:"frsVQgI4+c"})]})}},22269:function(e,t,s){s.d(t,{n:function(){return ei},l:function(){return ee}});var n=s(27573),a=s(26525),l=s(5161),i=s(27218),r=s(27895),o=s(5984),d=s(32006),c=s(70354),u=s(45033),x=s(52939),g=s(32737),f=s(44512),m=s(13262),h=s(87033),p=s(10228),j=s(34505),v=s(89755),y=s(37141),w=s(11919),b=s(49454),M=s(77930),S=s(10607),N=s(7653),k=s(40950),C=s(45790),D=s(95899),P=s(32559),U=s(2949),_=s(89111),z=s(74339),E=s(23098),Z=s(96816),A=s(79208),F=s(31275),O=s(1154),I=s(30684),L=s(86973),R=s(66605),T=s(92676),K=s(9677),G=s(85465);function V(e){let{conversation:t}=e,s=(0,U.ez)(),a=(0,U.EU)(t),{toggleConversationSetting:l}=(0,G.M0)();return s?(0,n.jsx)("div",{className:"px-2 py-1.5 -mx-1 -mb-1 border-t-0.5 border-border-300 hover:bg-bg-200",children:(0,n.jsxs)(u.hP,{className:"flex flex-row gap-4 cursor-pointer px-2 pt-1 pb-2",onSelect:e=>{e.stopPropagation(),e.preventDefault(),l("enabled_bananagrams",!a)},onPointerLeave:e=>e.preventDefault(),onPointerMove:e=>e.preventDefault(),children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{children:(0,n.jsx)(C.Z,{defaultMessage:"Allow Claude to search",id:"zyxxt7OHPv"})}),(0,n.jsx)("p",{className:"text-xs text-text-400",children:(0,n.jsx)(C.Z,{defaultMessage:"Claude will search for relevant documents",id:"JxbYvAvtdV"})})]}),(0,n.jsx)(K.Z,{checked:a,readOnly:!0})]})}):null}var B=s(84344),H=s(10571);function W(e){let{title:t,url:s,isLoading:a,isError:l,isLink:i=!1,defaultErrorTitle:r,defaultDocumentTitle:o}=e,d=(0,n.jsx)("p",{children:o});return(l?d=(0,n.jsx)("p",{children:r}):!a||t||o?t&&(d=(0,n.jsx)("p",{children:t})):d=(0,n.jsx)(H.g,{className:"opacity-25 rounded-md",height:18}),i&&s)?(0,n.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:d}):d}function Y(e){let{uri:t,isError:s,isLink:a=!1}=e,{data:l,isLoading:i}=(0,U.Mv)({documentId:t}),r=(0,B.m)(t);return(0,n.jsx)(W,{title:null==l?void 0:l.title,url:r,isLoading:i,isError:s,isLink:a,defaultErrorTitle:"Google Docs"})}var q=s(70712),J=s(56767);let Q={includeScore:!0,threshold:.3,keys:["title"],ignoreLocation:!0},X=e=>{let{conversation:t,projectUuid:s,trigger:a,align:l,isSubDropdown:i=!1,setIsUploadingDriveSync:d,onCreated:c,isOpen:x,setIsOpen:g,closeWholeDropdown:m=()=>g(!1),shouldAddSyncUponPaste:j}=e,v=(0,k.Z)(),{value:y}=(0,h.FL)("kingfisher_prefetch"),{recentDriveDocs:w,isLoading:b}=(0,U.td)(y||x),[M,S]=(0,N.useState)(""),[C,D]=(0,N.useState)(!1),[P,_]=(0,N.useState)(""),{addError:z}=(0,r.e)(),E=(0,N.useRef)(null),Z=(0,N.useRef)(null),A=()=>{d(!0),D(!0)},F=e=>{null==c||c(e),m(),D(!1)},O=e=>{d(!1),D(!1),z((0,J.A)(e))},{mutate:I}=(0,R.cE)({onMutate:A,onSuccess:F,onError:O,meta:{noToast:!0}}),{mutate:K}=(0,T.gr)(s,{onMutate:A,onSuccess:F,onError:O,meta:{noToast:!0}}),G=(0,N.useMemo)(()=>w&&M?new L.Z(w,Q).search(M).map(e=>e.item):w,[w,M]),B=M?null==G?void 0:G.slice(0,7):null==w?void 0:w.slice(0,5),H=e=>{m(),(s?K:I)({sync_source_type:p.Fg.GDRIVE,sync_source_config:{uri:e}})},W=e=>{let t=(0,q.g)(e);S(e);let s="";if(t)H(t);else if((0,q.k)(e))s=v.formatMessage({defaultMessage:"Only Google Docs are supported at this time",id:"P3m20xflVA"});else try{new URL(e),s=v.formatMessage({defaultMessage:"Not a valid Google Doc URL",id:"S//j6oF0j8"})}catch(e){}_(s)};(0,f.p)({target:E,shouldFocus:x}),(0,N.useEffect)(()=>{x||(S(""),D(!1),_(""))},[x,S,D,_]);let Y=!!s,X=i?u.A2:u.Lt;return(0,n.jsxs)(X,{className:"text-md w-[332px] p-0 overflow-hidden",align:l,trigger:a,onKeyDown:e=>{if(!["Enter","ArrowDown","ArrowUp"].includes(e.key)){var t;null===(t=E.current)||void 0===t||t.focus()}},onFocusOutside:e=>e.preventDefault(),...i?{forceMount:!0}:{open:x,onOpenChange:g,unstyledTrigger:!0},children:[(0,n.jsx)(u.YG,{children:(0,n.jsx)(o.oi,{ref:E,value:M,placeholder:v.formatMessage({defaultMessage:"Search recents or paste URL",id:"jprBObbn5b"}),className:"w-full bg-inherit border-none select-none",onChange:e=>{W(e.target.value)},onPasteCapture:e=>{if(e.stopPropagation(),!x)return;let t=e.clipboardData.getData("text"),s=(0,q.g)(t);s&&j&&H(s)},onKeyDown:e=>{if("ArrowLeft"===e.key&&M)e.stopPropagation();else if("Enter"===e.key)W(e.currentTarget.value);else if("ArrowDown"===e.key&&B&&B.length>0){var t;e.preventDefault(),null===(t=Z.current)||void 0===t||t.focus()}},"data-1p-ignore":!0,autoComplete:"off",autoFocus:!0})}),(0,n.jsx)($,{inputRef:E,firstDocumentRef:Z,handleAddDocument:H,documents:B,isValidatingUrl:C,isFetchingRecentDriveDocs:b,errorMessage:P}),!Y&&!M&&(0,n.jsx)(V,{conversation:t})]})},$=e=>{let{inputRef:t,firstDocumentRef:s,handleAddDocument:a,documents:l,isValidatingUrl:i,isFetchingRecentDriveDocs:r,errorMessage:o}=e,c=i||r&&!l.length,x=!!o,g=!c&&(!l||!l.length);return c?(0,n.jsx)("div",{className:"flex flex-col items-center justify-center h-[220px]",children:(0,n.jsx)(O.$,{className:"animate-spin mx-auto"})}):x?(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-[220px] text-center",children:[(0,n.jsx)(I.l,{size:24,className:"text-text-400",weight:"duotone"}),(0,n.jsx)("p",{className:"text-md text-text-400 mt-4",children:(0,n.jsx)(C.Z,{defaultMessage:"Invalid URL",id:"SASA4f9KO3"})}),(0,n.jsx)("p",{className:"text-sm text-danger-000",children:o})]}):g?(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-[220px]",children:[(0,n.jsx)(I.l,{size:24,className:"text-text-400",weight:"duotone"}),(0,n.jsx)("p",{className:"text-md text-text-400 mt-4",children:(0,n.jsx)(C.Z,{defaultMessage:"No recents found",id:"2FzJykASLO"})}),(0,n.jsx)("p",{className:"text-sm text-text-500",children:(0,n.jsx)(C.Z,{defaultMessage:"Try pasting the URL instead",id:"jf3/+bX0lc"})})]}):(0,n.jsx)("div",{className:"px-1.5 py-1",children:l.map((e,l)=>{let{uri:i,title:r}=e;return(0,n.jsxs)(u.hP,{className:"!grid-cols-[max-content_auto] hover:text-text-000 hover:bg-bg-200",ref:0===l?s:void 0,onClick:()=>a(i),onKeyDown:e=>{if("ArrowUp"===e.key&&0===l){var s;e.preventDefault(),null===(s=t.current)||void 0===s||s.focus()}},textValue:"",onPointerLeave:e=>e.preventDefault(),onPointerMove:e=>e.preventDefault(),children:[(0,n.jsx)(d.j0,{type:p.Fg.GDRIVE,variant:d.cT.DOCS,size:16}),(0,n.jsx)("span",{className:"truncate",children:null!=r?r:(0,n.jsx)(Y,{uri:i})})]},i)})})},ee=e=>{let{projectUuid:t,isStarterProject:s,isUploading:o,setIsUploadingDoc:d,setIsUploadingGithubSync:c,setIsUploadingDriveSync:u,setIsUploadingOutlineSync:x}=e,{activeOrganization:g}=(0,i.t)(),f=null==g?void 0:g.uuid,p=(0,k.Z)(),j=(0,N.useRef)(null),[v,y]=(0,N.useState)(""),[w,b]=(0,N.useState)(""),[S,Z]=(0,N.useState)(!1),[A,O]=(0,N.useState)(!1),[I,L]=(0,N.useState)(!1),{addError:R}=(0,r.e)(),{mutateAsync:T}=(0,D.u3)(t,{onError:()=>d(!1)}),{data:K}=(0,P.Yc)(t),{checkIsGithubAuthenticated:G,initGithubAuth:V}=(0,_.Yn)({callerIdentifier:"project",toggleGithubModalOpen:O}),B=(0,_.H7)(),{isOutlineAuthenticated:H}=(0,z.vc)(),W=(0,z.J$)(),Y=(0,U.Aj)(),q=(0,E.nR)(t),{maxKbTokens:J}=(0,E.mo)(),Q=(null!=q?q:0)>J,X=(0,M.useQueryClient)(),$=(0,N.useCallback)(async(e,s)=>{for(let t of e)await T({file_name:t.file_name,content:t.extracted_content});s.length&&X.invalidateQueries({queryKey:[m.jb,{orgUuid:f,projectUuid:t}]})},[T,f,t,X]),ee=(0,l.eh)(),es=(0,a.H0)(),{value:en}=(0,h.FL)("project_janus"),{value:ea}=(0,h.FL)("project_image"),{handleUpload:ei}=(0,a.Vn)({imagesEnabled:ea,blobFileUploadsEnabled:ee,rasterizePdfUploadsEnabled:es&&en,onUploadComplete:async function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];await $(...t)},onError:()=>{d(!1)},projectUuid:t}),er=(0,N.useCallback)(async e=>{let t=e.target.files;t&&(d(!0),await ei(Array.from(t),J-(null!=q?q:0)),d(!1)),e.target.value=""},[ei,d,q,J]),eo=async()=>{try{Z(!1),d(!0),await T({file_name:w,content:v}),b(""),y("")}catch(e){d(!1),R(p.formatMessage({defaultMessage:"Error saving text content",id:"9U64gLEIVo"}))}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{"data-testid":"project-doc-upload",ref:j,type:"file",className:"hidden",accept:(0,l.tB)({imagesEnabled:ea,outOfContextFilesEnabled:ee}).join(","),onChange:er,multiple:!0}),(0,n.jsx)(et,{projectUuid:t,shouldShowGithubSyncSource:B,shouldShowDriveSyncSource:Y,shouldShowOutlineSyncSource:W,handleGithubClick:()=>{G().then(e=>{if(e){O(!0);return}V()})},handleOutlineClick:()=>{H?L(!0):R((0,n.jsxs)("div",{className:"flex flex-col items-start",children:[(0,n.jsx)("div",{children:(0,n.jsx)(C.Z,{defaultMessage:"You need to connect to Outline before using this feature.",id:"PejG+e4wN5"})}),(0,n.jsx)("button",{onClick:()=>{window.location.href="/settings/profile"},className:"mt-2 underline",children:(0,n.jsx)(C.Z,{defaultMessage:"Connect to Outline",id:"m1DuTWXorQ"})})]}))},handleFileUploadClick:()=>{j.current&&j.current.click()},handleTextContentClick:()=>Z(!0),isPrivateProject:!!(null==K?void 0:K.is_private),isStarterProject:s,isOverProjectKnowledgeLimit:Q,isLoading:o,setIsUploadingDriveSync:u}),(0,n.jsx)(el,{isOpen:S,onClose:()=>Z(!1),title:w,setTitle:b,content:v,setContent:y,onSave:eo}),B&&(0,n.jsx)(F.U,{location:"project",isOpen:A,onClose:()=>O(!1),projectUuid:t,setIsUploadingGithubSync:c}),W&&""]})},et=e=>{let{projectUuid:t,shouldShowGithubSyncSource:s,shouldShowDriveSyncSource:a,handleGithubClick:l,handleFileUploadClick:i,handleTextContentClick:r,isPrivateProject:o,isStarterProject:d,isOverProjectKnowledgeLimit:c,isLoading:x,shouldShowOutlineSyncSource:g,handleOutlineClick:f,setIsUploadingDriveSync:m}=e,[h,v]=(0,N.useState)(!1),[y,b]=(0,N.useState)(!1),M=a||s,{isDriveAuthenticated:S,initDriveAuth:k,handleDriveTrigger:D}=(0,U.nC)({callerIdentifier:"project",handleAuthSuccess:e=>{v(e),e?setTimeout(()=>{b(e)},100):b(e)}}),P=S&&o;return(0,n.jsxs)(u.Lt,{align:"end",unstyledTrigger:!0,trigger:(0,n.jsx)(es,{isStarterProject:d,isOverProjectKnowledgeLimit:c,isLoading:x}),open:h,onOpenChange:v,children:[(0,n.jsx)(u.hP,{onClick:i,className:"text-left",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(w.p,{size:16}),(0,n.jsx)(C.Z,{defaultMessage:"Upload from device",id:"vMaZk5Jcnv"})]})}),(0,n.jsx)(u.hP,{onClick:r,className:"text-left",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(j.P,{size:16}),(0,n.jsx)(C.Z,{defaultMessage:"Add text content",id:"G7XW3Mvn8X"})]})}),M?(0,n.jsx)(u.u2,{}):null,s&&(0,n.jsx)(en,{type:p.Fg.GITHUB,isPrivateProject:o,onClick:l}),a&&(0,n.jsx)(ea,{projectUuid:t,isPrivateProject:o,setIsUploadingDriveSync:m,isOpen:y,setIsOpen:b,closeWholeDropdown:()=>{b(!1),v(!1)},showGoogleDriveSubDropdown:P,handleGoogleDriveButtonClick:()=>{!P&&o&&(S?D():k())}}),g&&(0,n.jsx)(en,{type:p.Fg.OUTLINE,isPrivateProject:o,onClick:f})]})},es=(0,N.forwardRef)((e,t)=>{let{isStarterProject:s,isOverProjectKnowledgeLimit:a,isLoading:l,...i}=e,r=(0,n.jsx)(c.z,{...i,ref:t,className:"bg-inherit border-0.5 hover:bg-bg-300/70 border-border-300 transition rounded-lg  scale-100",size:"icon_sm",variant:"unstyled","data-testid":"project-doc-uploader-dropdown-trigger",disabled:s||a||l,loading:l,children:(0,n.jsx)(v.v,{size:14,weight:"bold"})});return s?(0,n.jsx)(Z.H,{children:(0,n.jsx)("div",{children:r})}):a?(0,n.jsx)(g.u,{side:"bottom",tooltipContent:(0,n.jsx)(C.Z,{defaultMessage:"Project knowledge at capacity. Remove an existing file in order to add to knowledge",id:"g3hx72ya32"}),children:(0,n.jsx)("div",{children:r})}):(0,n.jsx)(g.u,{side:"bottom",tooltipContent:(0,n.jsx)(C.Z,{defaultMessage:"Add content to project",id:"kLVlcps4zm"}),children:r})});es.displayName="ProjectDocUploaderDropdownTrigger";let en=e=>{let{type:t,isPrivateProject:s,isSubTrigger:a=!1,isSubDropdownOpen:l=!1,onClick:i}=e,r=a?u.WR:u.hP,o=(0,n.jsxs)(r,{onClick:i,onPointerLeave:e=>{a&&l&&e.preventDefault()},onPointerMove:e=>{a&&l&&e.preventDefault()},disabled:!s,className:"text-left",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(d.j0,{type:t,size:16}),(0,A.DH)(t)]}),a&&(0,n.jsx)(y.T,{size:16})]});return s?o:(0,n.jsx)(g.u,{side:"left",tooltipContent:(0,n.jsx)(C.Z,{defaultMessage:"Only accessible from private projects",id:"lNrma+LwGe"}),children:(0,n.jsx)("div",{children:o})})},ea=e=>{let{projectUuid:t,isPrivateProject:s,setIsUploadingDriveSync:a,isOpen:l,setIsOpen:i,closeWholeDropdown:r,showGoogleDriveSubDropdown:o,handleGoogleDriveButtonClick:d}=e;return o?(0,n.jsxs)(u.Vy,{open:l,onOpenChange:i,children:[(0,n.jsx)(en,{type:p.Fg.GDRIVE,isPrivateProject:s,isSubTrigger:!0,isSubDropdownOpen:l}),(0,n.jsx)(u.nI,{children:(0,n.jsx)(X,{projectUuid:t,isSubDropdown:!0,setIsUploadingDriveSync:a,isOpen:l,setIsOpen:i,closeWholeDropdown:r,shouldAddSyncUponPaste:!0})})]}):(0,n.jsx)(en,{type:p.Fg.GDRIVE,isPrivateProject:s,onClick:d})},el=e=>{let{isOpen:t,onClose:s,title:a,setTitle:l,content:i,setContent:r,onSave:d}=e,u=(0,k.Z)(),g=(0,N.useRef)(null);return(0,f.p)({shouldFocus:t,target:g}),(0,n.jsx)(x.u_,{isOpen:t,onClose:s,modalSize:"xl",className:"p-7 pt-6",children:(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),""!==a.trim()&&""!==i.trim()&&d()},children:[(0,n.jsx)("h2",{className:"font-tiempos mb-3 text-xl",children:(0,n.jsx)(C.Z,{defaultMessage:"Add text content",id:"G7XW3Mvn8X"})}),(0,n.jsx)(o.oi,{ref:g,placeholder:u.formatMessage({defaultMessage:"Name your content",id:"C7Sx4g/l21"}),className:"mb-2 w-full",size:"lg",label:(0,n.jsx)(C.Z,{defaultMessage:"Title",id:"9a9+wwWy4u"}),value:a,onChange:e=>l(e.target.value),required:!0}),(0,n.jsx)(o.Kx,{placeholder:u.formatMessage({defaultMessage:"Type or paste in content...",id:"f5RDuqxeT2"}),label:u.formatMessage({defaultMessage:"Content",id:"Jq3FDzj0/T"}),minRows:12,value:i,onChange:e=>r(e.target.value),required:!0,className:"max-h-[50vh] overflow-y-auto"}),(0,n.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,n.jsx)(c.z,{variant:"secondary",onClick:e=>{e.preventDefault(),s()},children:(0,n.jsx)(C.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,n.jsx)(c.z,{type:"submit",children:(0,n.jsx)(C.Z,{defaultMessage:"Add Content",id:"66s1201qd9"})})]})]})})},ei=e=>{let{size:t="default",projectUuid:s,tooltipContent:a}=e,l=(0,E.nR)(s),{maxKbTokens:i}=(0,E.mo)(),r=(0,E.sn)(s),o=(0,E.i6)(),d=(0,E.PE)(s);if(!l)return null;let u=Math.ceil(l/i*100),x=u>80&&u<100,f=u>=100,m=r?Math.min(100,r/i*100):void 0;return(0,n.jsxs)("div",{className:(0,S.Z)("default"!==t&&"flex items-center gap-3"),children:[(0,n.jsxs)("div",{className:(0,S.Z)("bg-bg-300 rounded-full p-px border-border-300 border-0.5 relative","small"===t&&"w-24"),children:[(0,n.jsx)("div",{style:{width:"".concat(Math.max(2,Math.min(100,u)),"%")},className:(0,S.Z)("h-1.5 rounded-full transition-all",!x&&!f&&"bg-accent-secondary-100",x&&"bg-warning-orange",f&&"bg-danger-100")}),o&&void 0!==m&&l>=(r||0)&&(0,n.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-text-100 rounded-full mix-blend-normal",style:{left:"".concat(m,"%"),transform:"translate(-50%, -50%)"}})]}),(0,n.jsxs)("div",{className:(0,S.Z)("flex gap-2 items-center text-xs","default"===t&&"mt-2"),children:[(0,n.jsx)("div",{className:(0,S.Z)("flex-1",u<100&&"text-text-400",u>=100&&"text-danger-000 font-medium"),children:(0,n.jsx)(C.Z,{defaultMessage:"{pctUsed}% of project capacity used",id:"JfriU6oVgp",values:{pctUsed:u}})}),!o&&(0,n.jsx)(g.u,{className:"text-center mt-0.5",side:"left",tooltipContent:null!=a?a:(0,n.jsx)(C.Z,{defaultMessage:"Project knowledge is currently limited to Claude’s maximum context window size.",id:"aAeavdIV/P"}),children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(c.z,{size:"unset",variant:"unstyled",href:"https://support.anthropic.com/en/articles/9517075-what-are-projects",target:"_blank",className:"rounded-full text-text-500 hover:text-text-200",children:(0,n.jsx)(b.k,{size:14})})})}),d&&(0,n.jsx)("div",{className:"text-text-400 text-xs flex gap-1",children:(0,n.jsx)(g.u,{className:"text-center mt-0.5",side:"bottom",tooltipContent:null!=a?a:(0,n.jsx)(C.Z,{defaultMessage:"To save space, Claude looks up information as needed.",id:"a/OO1blv/l"}),children:(0,n.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,n.jsx)("div",{className:"w-1.5 h-1.5 bg-text-500 rounded-full"}),(0,n.jsx)(C.Z,{defaultMessage:"Retrieving",id:"RmdvWf4BuF"})]})})})]}),u>=100&&(0,n.jsx)("div",{className:"text-text-400 text-xs",children:(0,n.jsx)(C.Z,{defaultMessage:"Remove an existing file in order to add to knowledge",id:"mSQjDnX2IA"})})]})}},79208:function(e,t,s){s.d(t,{DH:function(){return i},c$:function(){return r},pz:function(){return l}});var n=s(10228),a=s(91598);let l="settings",i=e=>n.hP[e]||e,r=()=>{let e=(0,a.zO)();return t=>t===n.Fg.FIDDLEHEAD&&e[a.mz]?e[a.mz]:n.hP[t]||t}},76742:function(e,t,s){s.d(t,{M:function(){return a}});var n=s(7653);let a=(e,t)=>{let[s,a]=(0,n.useState)(!1),[l,i]=(0,n.useState)([]),r=(s,n)=>{t||i(t=>{if(!n||0===Object.keys(t).length)return[...t,s];let a=t[Object.keys(t).length-1],l=e.findIndex(e=>{let{uuid:t,type:s}=e;return t===a.uuid&&s===a.type});if(-1===l)return[...t,s];let i=e.findIndex(e=>{let{uuid:t}=e;return t===s.uuid}),r=e.slice(Math.min(l+1,i),Math.max(l-1,i)+1),o=t.map(e=>{let{uuid:t}=e;return t});return[...t,...r.filter(e=>{let{uuid:t}=e;return -1===o.indexOf(t)})]})},o=e=>{t||i(t=>t.filter(t=>{let{uuid:s,type:n}=t;return s!==e.uuid||n!==e.type}))};return(0,n.useEffect)(()=>{a(l.length>0)},[l]),{selectedItems:l,handleSelect:(e,s,n)=>{t||(s?r(e,n):o(e))},selectAllItems:()=>{t||i(e)},isInSelectionMode:!t&&s,toggleSelectMode:e=>{a(e),e||i([])}}}},36041:function(e,t,s){s.d(t,{J:function(){return i}});var n=s(27573),a=s(70354);s(7653);var l=s(45790);let i=e=>{let{isLoading:t,numSelected:s,totalNumItems:i,handleSelectAll:r,handleCancel:o,handleDeleteSelected:d}=e;return(0,n.jsxs)(n.Fragment,{children:[s<i&&(0,n.jsx)(a.z,{variant:"underline",className:"text-sm rounded-md text-accent-secondary-000 mr-2 !opacity-100 h-8",size:"unset",onClick:r,children:(0,n.jsx)(l.Z,{defaultMessage:"Select all",id:"94Fg25VD0N"})}),(0,n.jsx)(a.z,{size:"sm",variant:"secondary",onClick:o,children:(0,n.jsx)(l.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,n.jsx)(a.z,{size:"sm",variant:"danger",disabled:0===s,onClick:d,loading:t,children:(0,n.jsx)(l.Z,{defaultMessage:"Delete <hidden>{space}Selected</hidden>",id:"QE60Po3yK8",values:{space:(0,n.jsx)(n.Fragment,{children:"\xa0"}),hidden:e=>(0,n.jsxs)("span",{className:"max-sm:hidden",children:[" ",e]})}})})]})}}}]);