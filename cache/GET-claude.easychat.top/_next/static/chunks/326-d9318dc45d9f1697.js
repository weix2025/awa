"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[326],{23098:function(e,t,r){r.d(t,{$P:function(){return N},Lc:function(){return _},PE:function(){return C},Vq:function(){return L},i6:function(){return k},mo:function(){return M},nR:function(){return S},sn:function(){return E}});var n=r(76220),i=r(66557),s=r(27218),a=r(48410),l=r(6385),o=r(87033),d=r(10228),c=r(98649),u=r(7653),h=r(41270),f=r(89705),x=r(95899),m=r(92676),p=r(32559),g=r(35548),v=r(95586);let b={hardLimit:1e5},j={default:{max:b,raven:b,pro:b,free:b}},y=h.z.object({hardLimit:h.z.number().optional(),tokensPerImage:h.z.number().optional()}),w=h.z.object({free:y.optional(),pro:y.optional(),raven:y.optional(),max:y.optional()}),N=h.z.record(w.optional()),_=()=>{let{data:e}=(0,p.VR)(),t=(0,v.H)();return void 0!==t&&void 0!==e&&e>=t},k=()=>{let{value:e}=(0,o.FL)("claude_ai_project_bananagrams");return e},C=e=>{let t=k(),{data:r}=(0,f.VV)(e,t);return!!t&&(void 0!==r?!!(t&&r.use_project_knowledge_search):void 0)},M=()=>{let e=(0,s.Cf)(),t=(0,s.ZJ)(),r=(0,s.ue)(),{selectedTier:i,shouldOverrideTokenLimits:l,isTierSelectorEnabled:d}=(0,a.i)(),u=d&&l&&!!i,h=(0,o.Zr)("console_default_model","model",null,o.rO),{activeModelOptions:f}=(0,n.uL)(),x=f.map(e=>e.model),m=(0,o.xQ)("hatch_token_limits",j,N),p=k(),g=(0,o.Zr)("project_knowledge_limit","limit",52428800,o.qr);if(p)return{maxKbTokens:g,modelWithLargestContext:null};let v=null,b=Number.NEGATIVE_INFINITY;for(let n of Object.keys(m)){var y,w,_,C,M,S,E,L,z,D,A,F,Z,I,T,P;let s,a;if(!x.includes(n)&&"default"!==n)continue;let l=m[n];(u?i===c.kQ.MAX:r)?(s=null!==(_=null==l?void 0:null===(y=l.max)||void 0===y?void 0:y.hardLimit)&&void 0!==_?_:19e4,a=null!==(C=null==l?void 0:null===(w=l.max)||void 0===w?void 0:w.output)&&void 0!==C?C:8192):(u?i===c.kQ.ENTERPRISE:e)?(s=null!==(E=null==l?void 0:null===(M=l.raven)||void 0===M?void 0:M.hardLimit)&&void 0!==E?E:19e4,a=null!==(L=null==l?void 0:null===(S=l.raven)||void 0===S?void 0:S.output)&&void 0!==L?L:8192):(u?i===c.kQ.PRO:t)?(s=null!==(A=null==l?void 0:null===(z=l.pro)||void 0===z?void 0:z.hardLimit)&&void 0!==A?A:19e4,a=null!==(F=null==l?void 0:null===(D=l.pro)||void 0===D?void 0:D.output)&&void 0!==F?F:8192):(s=null!==(T=null==l?void 0:null===(Z=l.free)||void 0===Z?void 0:Z.hardLimit)&&void 0!==T?T:25e3,a=null!==(P=null==l?void 0:null===(I=l.free)||void 0===I?void 0:I.output)&&void 0!==P?P:8192),(s=Math.round(.9*s)-a)>b?(v="default"===n?h:n,b=s):s===b&&"default"===n&&(v=h)}return{maxKbTokens:b,modelWithLargestContext:v}},S=e=>{let t=k(),{data:r,isLoading:n}=(0,x.Kf)(e,!1===t),{data:s,isLoading:a}=(0,m.yg)(e,!0,!1===t),{data:o,isLoading:c}=(0,x.pK)(e,!1===t),{data:h,isLoading:p}=(0,f.VV)(e,t),v=null==o?void 0:o.filter(e=>"document"===e.file_kind),b=(0,u.useMemo)(()=>{var e;return null!==(e=null==v?void 0:v.reduce((e,t)=>e+(0,g.ZJ)(t),0))&&void 0!==e?e:0},[v]),j=null==o?void 0:o.filter(e=>"image"===e.file_kind),y=(0,u.useMemo)(()=>{var e;return null!==(e=null==j?void 0:j.reduce((e,t)=>e+(0,g.Rv)(t),0))&&void 0!==e?e:0},[j]),w=(0,u.useMemo)(()=>(r||[]).map(e=>e.content).join(" "),[r]),N=(0,i.c)(w,{skip:null==t||t})+b+y,_=(0,u.useMemo)(()=>{var e,t;let r=null==s?void 0:s.filter(e=>e.type===d.Fg.GITHUB),n=null==s?void 0:s.filter(e=>e.type!==d.Fg.GITHUB),i=null!==(e=null==r?void 0:r.map(e=>e.status.current_size_bytes).filter(e=>!!e&&"number"==typeof e).reduce((e,t)=>e+t,0))&&void 0!==e?e:0,a=null!==(t=null==n?void 0:n.map(e=>e.status.current_size_bytes).filter(e=>!!e&&"number"==typeof e).reduce((e,t)=>e+t,0))&&void 0!==t?t:0;return Math.floor(i/l.dS+a/l.r6)},[s]);if(!n&&!a&&!c&&!p){if(t){var C;return null!==(C=null==h?void 0:h.knowledge_size)&&void 0!==C?C:0}return void 0!==r?void 0!==s?N+_:N:void 0!==s?_:void 0}},E=e=>{let t=k(),{data:r}=(0,f.VV)(e,t);if(r)return r.project_knowledge_search_threshold},L=e=>{let{mutate:t}=(0,p.dY)(e),{data:r}=(0,p.Yc)(e);return()=>{t({is_starred:!(null==r?void 0:r.is_starred)})}}},6688:function(e,t,r){r.d(t,{G:function(){return h},k:function(){return f}});var n=r(27573),i=r(27218),s=r(32737),a=r(11510),l=r(40950),o=r(45790),d=r(32559),c=r(53545);let u=e=>{let{intl:t}=e;return(0,n.jsx)(s.u,{tooltipContent:t.formatMessage({defaultMessage:"Claude will guide your learning process instead of just giving answers. You can adjust these instructions in the project anytime.",id:"X9ioIsDrqe"}),side:"right",align:"end",children:(0,n.jsx)(a.k,{size:16,className:"shrink-0"})})},h=(e,t)=>{let r=(0,i.Cf)(),s=(0,l.Z)(),a=(0,c.DU)();e=null!=e?e:null==a?void 0:a.type,t=null!=t?t:null==a?void 0:a.subtype;let h={};return r&&(h.createProjectTitle=s.formatMessage({defaultMessage:"Create a project",id:"HR5A+UPiIu"})),e===d.cd.Student&&(t===d.nL.Study&&(h.createProjectTitle=s.formatMessage({defaultMessage:"Create a study project",id:"aM+8eAE0xv"}),h.createProjectNameLabel=(0,n.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,n.jsx)(o.Z,{defaultMessage:"What course are you studying?",id:"v36OurBGgA"}),(0,n.jsx)(u,{intl:s})]}),h.createProjectDescriptionDefault=s.formatMessage({defaultMessage:"A project for studying your course materials, where Claude helps visualize key concepts, build comprehensive study guides, and tutor you according to your learning needs.",id:"KXxo+Xoski"})),t===d.nL.Career&&(h.createProjectTitle=s.formatMessage({defaultMessage:"Create a career project",id:"so02zrH0dG"}),h.createProjectNameLabel=s.formatMessage({defaultMessage:"What are you working towards?",id:"lqTAz2gpwu"}),h.createProjectDescriptionDefault=s.formatMessage({defaultMessage:"A project for exploring career opportunities, where Claude helps match your skills to potential careers, improve your resume, and develop personalized roadmaps for professional growth.",id:"JlrkubQL9D"})),t===d.nL.Research&&(h.createProjectTitle=s.formatMessage({defaultMessage:"Create a research project",id:"L9PkdSYTu+"}),h.createProjectNameLabel=s.formatMessage({defaultMessage:"What are you researching?",id:"gsRiHcI+J7"}),h.createProjectDescriptionDefault=s.formatMessage({defaultMessage:"A project for developing academic research, where Claude helps identify key themes in your research, create structured outlines, and provide feedback to improve your drafts.",id:"WI7ROAQaAW"}))),h},f=e=>{let t=(0,l.Z)();if(!e)return{};let r=e.type,n=e.subtype,i={};return r===d.cd.Student&&(i.projectKnowledgeTitle=t.formatMessage({defaultMessage:"Reference materials",id:"IAK8rLiiAO"}),i.projectNoChatsMessage=t.formatMessage({defaultMessage:"Start a chat to keep conversations organized and re-use reference materials.",id:"ShAr8vcP2v"}),i.projectNoKnowledgeCantAddMessage=t.formatMessage({defaultMessage:"No reference materials added yet.",id:"2Gz7oaDTj0"}),i.projectKnowledgeDragDropMessage=t.formatMessage({defaultMessage:"Drop files here to add to reference materials",id:"hNUGHHYeEK"}),n===d.nL.Study&&(i.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop course materials like syllabi, lecture notes, or text-book excerpts so Claude can help you learn.",id:"hlIot3aXce"})),n===d.nL.Career&&(i.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop career materials like your resume, cover letters, or job descriptions to help Claude provide personalized professional advice.",id:"LXnjolwaEB"})),n===d.nL.Research&&(i.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop research materials like draft papers, source notes, or literature reviews to help Claude provide targeted academic guidance.",id:"c5oBAmpUAc"}))),i}},18409:function(e,t,r){r.d(t,{e:function(){return f}});var n=r(71817),i=r(6766),s=r(27218),a=r(48410),l=r(87033),o=r(98649),d=r(23098);let c={raven:{hardLimit:19e4,output:16384},pro:{hardLimit:19e4,output:8192},max:{hardLimit:19e4,output:16384},free:{hardLimit:30500,output:8192}},u={default:c},h=e=>{var t,r,n,i,h,f;let x;let m=(0,s.Cf)(),p=(0,s.ZJ)(),g=(0,s.ue)(),{selectedTier:v,shouldOverrideTokenLimits:b,isTierSelectorEnabled:j}=(0,a.i)(),y=j&&b&&!!v,w=(0,l.xQ)("hatch_token_limits",u,d.$P),N=null!==(r=null!==(t=w[e])&&void 0!==t?t:w.default)&&void 0!==r?r:c;return null!=(x=(y?v===o.kQ.MAX:g)?null==N?void 0:null===(n=N.max)||void 0===n?void 0:n.hardLimit:(y?v===o.kQ.ENTERPRISE:m)?null==N?void 0:null===(i=N.raven)||void 0===i?void 0:i.hardLimit:(y?v===o.kQ.PRO:p)?null==N?void 0:null===(h=N.pro)||void 0===h?void 0:h.hardLimit:null==N?void 0:null===(f=N.free)||void 0===f?void 0:f.hardLimit)?x:30500},f=(e,t)=>{let r=(0,n.wN)(e),{stickyModelPreference:s}=(0,i.M)();return h(e?r:t||s||r)}},35548:function(e,t,r){r.d(t,{Rv:function(){return a},ZJ:function(){return s},ZW:function(){return d},hn:function(){return l},y1:function(){return o}});var n=r(66557);r(87033);var i=r(7653);let s=e=>2e3*e.document_asset.page_count,a=e=>Math.min(1600,Math.ceil(e.preview_asset.image_width*e.preview_asset.image_height/700)),l=e=>e.reduce((e,t)=>e+a(t),0),o=(e,t,r)=>{let s=(0,n.c)(e),a=(0,i.useMemo)(()=>r.map(e=>e.extracted_content).join(" "),[r]);return s+(0,n.c)(a)+l(t)},d=(e,t)=>e/t>.4},57393:function(e,t,r){r.d(t,{e:function(){return d}});var n=r(27573),i=r(32737),s=r(88146),a=r(7653),l=r(45790),o=r(23098);let d=e=>{let t,{children:r,enabledWrapperStyles:d="",disabledWrapperStyles:c=""}=e,u=(0,o.Lc)();return t=u?c:d,(0,n.jsx)(i.u,{tooltipContent:u?(0,n.jsx)(l.Z,{defaultMessage:"You have reached the maximum number of projects. <upgradeLink>Upgrade</upgradeLink> for more.",id:"8XKCSUNy79",values:{upgradeLink:e=>(0,n.jsx)(s.default,{href:"/upgrade",className:"underline",children:e})}}):null,side:"bottom",children:(0,n.jsx)("div",{className:t,children:a.cloneElement(r,{disabled:u})})})}},53545:function(e,t,r){r.d(t,{Nv:function(){return C},DU:function(){return w}});var n=r(27573),i=r(3053),s=r(27218),a=r(87033),l=r(81695),o=r(45790),d=r(41270),c=r(32559),u=r(10607),h=r(50294);r(7653);var f=r(57393);let x=e=>{let{icon:t,title:r,description:i,onClick:s,variant:a,disabled:l=!1}=e;return(0,n.jsxs)("button",{className:(0,u.Z)("flex p-4 w-full items-center h-full","projects"===a?"flex-row-reverse sm:flex-col sm:items-start lg:flex-row-reverse lg:items-center":"flex-row sm:flex-col sm:items-start"),onClick:s,disabled:l,children:[(0,n.jsx)("div",{className:(0,u.Z)("relative mb-1","projects"===a?"lg:mb-0 lg:ml-2":"mr-2"),children:(0,n.jsx)(h.default,{src:t,height:50,width:50,alt:"",style:{opacity:l?"50%":"100%"}})}),(0,n.jsxs)("div",{className:"flex flex-col items-start w-full h-full",children:[(0,n.jsx)("h3",{className:(0,u.Z)("text-md font-medium text-text-200 text-left",l&&"text-text-500"),children:r}),(0,n.jsx)("p",{className:(0,u.Z)("text-sm text-text-200 text-left",l&&"text-text-500"),children:i})]})]})},m=e=>{let{variant:t="home",...r}=e;return(0,n.jsx)("div",{className:(0,u.Z)("w-full","projects"===t?"sm:w-48 sm:grow lg:w-52":"sm:w-48 lg:w-52"),children:(0,n.jsx)(f.e,{enabledWrapperStyles:"from-bg-100 to-bg-100/30 border-0.5 border-border-300 hover:from-bg-000/70 hover:to-bg-000/50 hover:border-border-300/30 text-text-200 hover:text-text-100 relative flex cursor-pointer flex-col gap-1.5 rounded-xl bg-gradient-to-b transition-all ease-in-out hover:shadow-sm active:scale-[0.995] md:gap-2 overflow-hidden h-full",disabledWrapperStyles:"border-0.5 border-border-300 text-text-200 relative flex cursor-pointer flex-col gap-1.5 rounded-xl md:gap-2 overflow-hidden h-full",children:(0,n.jsx)(x,{...r,variant:t})})})},p=d.z.object({type:d.z.nativeEnum(c.cd),subtype:d.z.nativeEnum(c.nL),icon_type:d.z.string(),custom_instructions:d.z.string()}),g=e=>{switch(e){case"edu_lightbulb":return"/images/illustrations/edu/edu-lightbulb.svg";case"edu_paper_and_quill":return"/images/illustrations/edu/edu-paper-and-quill.svg";case"edu_paper_and_magnifying_glass":return"/images/illustrations/edu/edu-paper-and-magnifying-glass.svg";default:return""}},v=(e,t)=>{if(e===c.cd.Student)switch(t){case c.nL.Study:return(0,n.jsx)(o.Z,{defaultMessage:"Study project",id:"SDlohOAVzo"});case c.nL.Career:return(0,n.jsx)(o.Z,{defaultMessage:"Career project",id:"MsM+7biLzH"});case c.nL.Research:return(0,n.jsx)(o.Z,{defaultMessage:"Research project",id:"OR/ar3drnQ"})}},b=(e,t)=>{if(e===c.cd.Student)switch(t){case c.nL.Study:return(0,n.jsx)(o.Z,{defaultMessage:"Learn and master any subject",id:"3vYdF/hF/f"});case c.nL.Career:return(0,n.jsx)(o.Z,{defaultMessage:"Find the next step for your career",id:"v6qrZ8g/Vy"});case c.nL.Research:return(0,n.jsx)(o.Z,{defaultMessage:"Analyze and organize research",id:"R19a/TH47z"})}},j=e=>e.map(e=>({id:"".concat(e.type,"-").concat(e.subtype),type:e.type,subtype:e.subtype,icon:g(e.icon_type),title:v(e.type,e.subtype),description:b(e.type,e.subtype),customInstructions:e.custom_instructions})),y=e=>e?(0,n.jsx)(o.Z,{defaultMessage:"Set up Claude for your classes, career, and research",id:"aU/3NrmiTd"}):"",w=()=>{let e=(0,l.useSearchParams)().get("projectStarter"),t=k();return e?t.options.find(t=>t.id===e):void 0},N=d.z.array(p),_=[],k=()=>{let e=(0,s.Zd)(),t=(0,a.Zr)("claude_ai_experience","project_templates",_,N);return{sectionTitle:y(e),options:j(t)}},C=e=>{let{variant:t="home"}=e,r=(0,l.useRouter)(),s=(0,i.z$)(),a=k();if(a.options.length)return(0,n.jsxs)("div",{className:"w-full mb-6",children:[(0,n.jsx)("h2",{className:"text-sm text-text-200 font-medium leading-6 ml-1",children:a.sectionTitle}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 w-full mt-3 justify-center items-stretch",children:a.options.map(e=>(0,n.jsx)(m,{variant:t,icon:e.icon,title:e.title,description:e.description,onClick:()=>{s.track({event_key:"claudeai.projects.project_starter.clicked",project_type:e.type,project_subtype:e.subtype,path:window.location.pathname}),r.push("/projects/create?projectStarter="+e.id)}},e.id))})]})}},8628:function(e,t,r){r.d(t,{g:function(){return G},o:function(){return W}});var n=r(27573),i=r(8571),s=r(32006),a=r(70354),l=r(60949),o=r(11607),d=r(32737),c=r(30947),u=r(6385);let h=e=>new Intl.NumberFormat().format(e);var f=r(10228),x=r(10484),m=r(35807),p=r(96346),g=r(34174),v=r(13140),b=r(39992),j=r(80151),y=r(67578),w=r(30070),N=r(76203),_=r(6092),k=r(16058),C=r(10607),M=r(8927),S=r(68425),E=r(87590),L=r.n(E),z=r(88146),D=r(7653),A=r(45790),F=r(40950),Z=r(89111),I=r(34326);let T="lastSelectedRepo";function P(e,t){return{name:e,path:t.endsWith("/")?t:t+"/",size:0,children:new Map}}function G(e){var t,r;let{initialConfig:i,tokenLimit:s,alreadyUsedTokens:a,onSubmit:l,isSubmitting:o}=e,[d,c]=(0,D.useState)("/"),h=void 0===i,f=s*u.dS,[x,m]=(0,D.useState)(()=>{if(i)return i;let e=function(){let e=localStorage.getItem(T);if(e){var t;let r=JSON.parse(e);if(r&&"object"==typeof(t=r)&&null!==t&&"string"==typeof t.owner&&"string"==typeof t.repo&&"string"==typeof t.branch)return r}return null}();return e?{owner:e.owner,repo:e.repo,branch:e.branch,filters:{filters:{}}}:{}}),{owner:p,repo:g,branch:v,filters:b}=x;(0,D.useEffect)(()=>{c("/")},[g]);let j=e=>{m({owner:p,repo:g,branch:v,filters:{filters:e}})},y=(0,D.useMemo)(()=>!L()(null==i?void 0:i.filters,b),[i,b]),{data:w,isFetching:N,error:_}=(0,Z.Y$)({owner:p,repo:g,branch:v}),k=(0,D.useMemo)(()=>(function(e,t){if(!t||!e)return[];let r=[];for(let n of t.tree)"blob"===n.type&&(0,I.VG)(e,"/"+n.path)&&r.push(n);return r})(null==b?void 0:b.filters,w.tree),[null==b?void 0:b.filters,w.tree]),C=Math.ceil(100*k.map(e=>e.size).reduce((e,t)=>e+t,0)/f)+Math.ceil(100*a/s),M=(0,D.useMemo)(()=>w.tree?function(e){let t={name:"",path:"/",size:0,children:new Map};for(let r of e.tree){let e=r.path.split("/"),n=e.pop(),i=t;for(let t=0;t<e.length;t++){let n=e[t];if(!i.children.has(n)){let r="/"+e.slice(0,t+1).join("/");i.children.set(n,P(n,r))}"blob"===r.type&&(i.size+=r.size),i=i.children.get(n)}"blob"===r.type?(i.children.set(n,{name:n,path:"/"+r.path,size:r.size}),i.size+=r.size):i.children.set(n,P(n,"/"+r.path))}return t}(w.tree):null,[w.tree]);(0,D.useEffect)(()=>{(null==w?void 0:w.repo)&&(null==w?void 0:w.repo.default_branch)&&!v&&m(e=>({...e,branch:w.repo.default_branch}))},[null==w?void 0:w.repo,v,m]),(0,D.useEffect)(()=>{if(p&&g&&v){var e;e={owner:p,repo:g,branch:v},localStorage.setItem(T,JSON.stringify(e))}},[p,g,v]);let[S,E]=(0,D.useState)("");return(0,n.jsxs)("div",{className:"rounded-xl border-0.5 border-border-300 bg-bg-000 shadow-sm h-[600px] flex flex-col",children:[(0,n.jsx)(H,{isCreating:h,config:x,setConfig:m,searchQuery:S,setSearchQuery:E,isSubmitting:o,percentUsed:C,onSubmit:l,areFiltersDirty:y,enforceSizeLimit:!0}),N?(0,n.jsx)(O,{}):null!==_?(0,n.jsx)(U,{error:_}):g&&p&&v?S?(0,n.jsx)(Y,{rootNode:M,searchQuery:S,filters:null!==(t=null==b?void 0:b.filters)&&void 0!==t?t:{},setFilters:j,sizeLimit:f,setCurrentDirectory:c,setSearchQuery:E,enforceSizeLimit:!0}):(0,n.jsx)(W,{repo:g,rootNode:M,filters:null!==(r=null==b?void 0:b.filters)&&void 0!==r?r:{},setFilters:j,sizeLimit:f,currentDirectory:d,setCurrentDirectory:c,enforceSizeLimit:!0}):(0,n.jsx)(R,{}),(0,n.jsx)(K,{percentUsed:C,selectedPaths:k,alreadyUsedTokens:a,tokenLimit:s,enforceSizeLimit:!0})]})}function R(){return(0,n.jsx)("div",{className:"flex items-center justify-center h-full bg-bg-000 text-sm text-text-300 border-border-300 border-t-0.5",children:(0,n.jsx)(A.Z,{defaultMessage:"Select a repository or paste a URL above to get started",id:"aGsfPG9sTD"})})}let O=()=>(0,n.jsxs)("div",{className:"flex items-center justify-center gap-3 h-full bg-bg-000 shadow-sm text-sm text-text-300",children:[(0,n.jsx)("div",{children:(0,n.jsx)(o.Loading,{size:"sm"})}),(0,n.jsx)(A.Z,{defaultMessage:"Fetching repository...",id:"hnjVW1oRt2"})]});function U(e){let{error:t}=e,{githubAppUrl:r}=(0,i.mX)(),s="".concat(r,"/installations/select_target"),a=t instanceof c.Hx&&404===t.statusCode,l=t instanceof c.Hx&&"github_get_tree_api_call_limit_exceeded"===t.errorCode;return(0,n.jsx)("div",{className:"flex h-full bg-bg-000 text-sm text-text-300 border-border-300 border-t-0.5",children:(0,n.jsx)("div",{className:"flex items-center gap-2 m-6",children:a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Q,{size:16}),(0,n.jsx)("span",{children:(0,n.jsx)(A.Z,{defaultMessage:"Claude cannot access that resource. If you know that it exists, you may first need to grant or request access <link>here</link>.",id:"41xNOZpKM8",values:{link:e=>(0,n.jsx)(z.default,{href:s,target:"_blank",className:"underline",children:e})}})})]}):l?(0,n.jsx)("span",{className:"text-danger-000",children:(0,n.jsx)(A.Z,{defaultMessage:"Please try a smaller repo.",id:"lvImCTHUvN"})}):(0,n.jsx)("span",{className:"text-danger-000",children:(0,n.jsx)(A.Z,{defaultMessage:"An error occurred while fetching that resource. Please try again.",id:"u8OHhkIcYv"})})})})}function H(e){var t,r;let{config:i,setConfig:l,isCreating:o,isSubmitting:d,percentUsed:c,searchQuery:u,setSearchQuery:h,onSubmit:x,areFiltersDirty:p,enforceSizeLimit:g}=e,[v,b]=(0,D.useState)(!1),[j,y]=(0,D.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-row gap-2 items-center py-2 min-h-14 px-4 text-sm font-styrene border-b-0.5 border-border-300",children:[(0,n.jsx)(s.j0,{size:18,type:f.Fg.GITHUB,className:"flex-shrink-0"}),!v&&(0,n.jsx)(V,{config:i,setConfig:l,isCreating:o}),(0,n.jsxs)("div",{className:"inline-flex gap-0 items-center",children:[(0,n.jsx)(q,{isCreating:o,isExpanded:v,setIsExpanded:b,setConfig:l,className:(0,C.Z)({"flex-1 flex-shrink":o&&v})}),i.repo&&!v&&(0,n.jsx)(B,{isExpanded:j,setIsExpanded:y,searchQuery:u,setSearchQuery:h,className:"flex-1 flex-shrink"})]}),(0,n.jsx)(M.M,{children:!v&&i.repo&&!(0,I.xb)(null!==(r=null===(t=i.filters)||void 0===t?void 0:t.filters)&&void 0!==r?r:{})&&(o||p)&&(0,n.jsx)(S.E.div,{className:"ml-auto",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20,stiffness:400,delay:0},children:(0,n.jsx)(a.z,{disabled:d||g&&c>100||!i.owner||!i.repo||!i.branch,onClick:()=>x(i),children:d?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(m.U,{className:"animate-spin"})}):o?(0,n.jsx)(A.Z,{defaultMessage:"Add files",id:"xrAjmQ72mN"}):(0,n.jsx)(A.Z,{defaultMessage:"Update",id:"BWpuKlRSA1"})})})})]})}function V(e){let{config:t,setConfig:r,isCreating:i,className:s}=e,{data:a=[]}=(0,Z.Mr)(),l=a.map(e=>({owner:e.owner.login,repo:e.name,branch:e.default_branch}));t.owner&&t.repo&&t.branch&&!l.some(e=>e.repo===t.repo&&e.owner===t.owner&&e.branch===t.branch)&&l.unshift({owner:t.owner,repo:t.repo,branch:t.branch});let[o,d]=(0,D.useState)(void 0);return(0,D.useEffect)(()=>{t.owner&&t.repo&&t.branch?d(JSON.stringify({owner:t.owner,repo:t.repo,branch:t.branch})):d(void 0)},[t]),(0,n.jsx)("div",{className:s,children:(0,n.jsxs)(k.fC,{value:o,onValueChange:e=>{r({...JSON.parse(e),filters:{filters:{}}}),d(e)},disabled:!i,children:[(0,n.jsxs)(k.xz,{className:(0,C.Z)("flex flex-row rounded-md border-0.5 px-2 border-border-300 py-1 items-center gap-1 text-nowrap overflow-x-hidden",{"max-w-96  pointer-cursor select-none hover:bg-bg-100 ":i,"bg-bg-100":!i}),children:[(0,n.jsx)(k.B4,{placeholder:"Select a repository"}),i&&(0,n.jsx)(k.JO,{className:"pl-1",children:(0,n.jsx)(p.p,{})})]}),(0,n.jsx)(k.h_,{children:(0,n.jsx)(k.VY,{className:"border-0.5 border-border-300 bg-bg-100 min-w-72 rounded-lg shadow-sm z-dropdown mt-1 p-1 max-h-96 overflow-y-auto",position:"popper",children:(0,n.jsx)(k.l_,{className:"overflow-auto",children:l.map((e,t)=>(0,n.jsx)(k.ck,{value:JSON.stringify(e),className:(0,C.Z)("relative flex flex-row p-1.5 cursor-pointer hover:bg-bg-200 focus:outline-none focus:bg-bg-200 rounded-md"),children:(0,n.jsx)(k.eT,{children:(0,n.jsxs)("span",{className:"flex flex-row text-sm items-center ",children:[(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"text-text-300",children:e.owner}),"\xa0",(0,n.jsx)("span",{className:"text-text-500/50",children:"/"}),"\xa0",(0,n.jsx)("span",{className:"text-text-000",children:e.repo})]}),(!i||i&&"master"!==e.branch&&"main"!==e.branch)&&(0,n.jsxs)("span",{className:" flex flex-row font-mono text-xs text-text-300 rounded-full px-1.5 ml-2 gap-1 items-center bg-border-400/[0.03] border-border-300 border-0.5 ",children:[(0,n.jsx)(g.S,{}),e.branch]})]})})},t))})})})]})})}function q(e){let{isCreating:t,isExpanded:r,setIsExpanded:i,setConfig:s,className:l}=e,o=(0,F.Z)(),[c,u]=(0,D.useState)(""),h=()=>{let{owner:e,repo:t,branch:r}=function(e){let t;try{t=new URL(null!=e?e:"")}catch(e){return{}}if("github.com"!==t.hostname)return{};let[,r,n,i,...s]=t.pathname.split("/");return{owner:r,repo:n,location:i,branch:s.join("/").replace(/\/$/,"")}}(c);s({owner:e,repo:t,branch:r,filters:{filters:{}}}),i(!1),u("")};return t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:(0,C.Z)("flex flex-row gap-1 items-center text-sm px-0.5",{"border-0.5 border-border-300 rounded-md h-[29px] w-64 transition":r},l),children:[(0,n.jsx)(d.u,{tooltipContent:"Paste GitHub URL",children:!r&&(0,n.jsx)(a.z,{onClick:()=>i(!r),size:"icon_sm",variant:"ghost",disabled:r,children:(0,n.jsx)(v.a,{size:16})})}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{className:"flex-1 border-none bg-transparent bg-none px-0 focus:ring-0 p-0 text-sm ml-2",type:"text",value:c,onChange:e=>u(e.target.value),placeholder:o.formatMessage({defaultMessage:"Paste GitHub URL",id:"RobpzbjbFb"}),autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&h()}}),c&&(0,n.jsx)(M.M,{children:(0,n.jsx)(S.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20,stiffness:400,delay:0},children:(0,n.jsx)(a.z,{onClick:h,size:"icon_xs",children:(0,n.jsx)(b.U,{})})})})]})]}),r&&(0,n.jsx)(a.z,{onClick:()=>{i(!1),u("")},size:"icon_sm",variant:"ghost",className:"ml-2",children:(0,n.jsx)(j.X,{})})]})}function B(e){let{isExpanded:t,setIsExpanded:r,searchQuery:i,setSearchQuery:s,className:l}=e,o=(0,F.Z)();return(0,n.jsxs)("div",{className:(0,C.Z)("flex flex-row items-center text-sm pl-0 p-1",{"border-0.5 border-border-300 rounded-md h-[29px] transition":t},l),children:[(0,n.jsx)(d.u,{tooltipContent:"Search files",children:(0,n.jsx)(a.z,{onClick:()=>r(!t),size:"icon_sm",variant:"ghost",disabled:t,children:(0,n.jsx)(y.Y,{size:"16"})})}),t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"text",placeholder:o.formatMessage({defaultMessage:"Search files",id:"8xPuGUna7W"}),value:i,className:"flex-1 border-none bg-transparent bg-none px-0 focus:ring-0 p-0 text-sm ",onChange:e=>s(e.target.value),autoFocus:!0}),(0,n.jsx)(a.z,{onClick:()=>{s(""),r(!1)},size:"icon_xs",variant:"ghost",children:(0,n.jsx)(j.X,{})})]})]})}function W(e){let{repo:t,rootNode:r,filters:i,setFilters:s,sizeLimit:a,currentDirectory:o,setCurrentDirectory:d,enforceSizeLimit:c}=e,u=function(e,t){let r=t.split("/").slice(1,-1),n=e;for(let e of r){if(!n.children)return null;n=n.children.get(e)}return n}(r,o),h=(null==u?void 0:u.children)?[...u.children.values()].sort((e,t)=>e.children?t.children?e.path.localeCompare(t.path):-1:1):[],f=(0,D.useMemo)(()=>{let e=[],r=o;for(;r;){let n=r.slice(r.lastIndexOf("/",r.length-2)).slice(1,-1);e.unshift({name:n||t,path:r}),r=(0,I.Il)(r)}return e},[t,o]),x=u?Q(u,i)?"partial":(0,I.VG)(i,u.path)?"checked":"unchecked":"unchecked";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2 py-2 px-4 border-b-0.5 border-border-300 bg-bg-100/50 text-sm",children:[u&&(0,n.jsx)(l.g,{checkState:x,onClick:e=>{let{didCheck:t}=e;t?s((0,I.Yw)(i,u.path)):s((0,I.F8)(i,u.path))}}),(0,n.jsx)("div",{className:"flex-row gap-1 ",children:f.map((e,t)=>{let{path:r,name:i}=e;return f.length===t+1?(0,n.jsx)("span",{children:i},t):(0,n.jsxs)("span",{className:"first-child:pointer-events-none",children:[(0,n.jsx)("button",{className:"hover:text-text-200 text-text-500 transition",onClick:()=>d(r),children:i}),t<f.length-1&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:"mx-1 text-text-500/50",children:"/"})})]},t)})})]},"breadcrumbs")}),(0,n.jsx)("div",{className:"flex flex-col h-full overflow-y-scroll",children:h.map(e=>(0,n.jsx)(X,{node:e,showPath:!1,filters:i,sizeLimit:a,onUpdateFilters:s,onClick:e.children?()=>d(e.path):void 0,enforceSizeLimit:c},e.path))},"rows")]})}function Y(e){let{rootNode:t,searchQuery:r,filters:i,setFilters:s,sizeLimit:a,setCurrentDirectory:l,setSearchQuery:o,enforceSizeLimit:d}=e,c=(0,D.useMemo)(()=>{let e=[],n=[t],i=r.toLowerCase();for(;n.length>0&&e.length<50;){let t=n.pop();t.children&&n.push(...t.children.values()),t.path.toLowerCase().includes(i)&&e.push(t)}return e},[r,t]);return(0,n.jsx)("div",{className:"flex flex-col h-full overflow-y-scroll",children:c.slice(0,100).map(e=>(0,n.jsx)(X,{node:e,showPath:!0,filters:i,sizeLimit:a,onUpdateFilters:s,onClick:e.children?()=>{l(e.path),o("")}:void 0,onNavigate:e=>{l(e),o("")},enforceSizeLimit:d},e.path))},"rows")}function K(e){let{percentUsed:t,selectedPaths:r,alreadyUsedTokens:i,tokenLimit:s,enforceSizeLimit:a}=e,{progressBarPercentPrimary:l,progressBarPercentSecondary:o}=(0,D.useMemo)(()=>{let e=Math.min(100,Math.ceil(100*i/s));return{progressBarPercentPrimary:Math.min(100,t-e),progressBarPercentSecondary:e}},[t,i,s]),c=a?(0,n.jsx)(A.Z,{defaultMessage:"{percentUsed}% of capacity used",id:"1VbFlPsYRL",values:{percentUsed:J(t)}}):null;return(0,n.jsxs)("div",{className:(0,C.Z)("flex text-xs items-center justify-between border-border-300 border-t-0.5 py-2 px-4 rounded-b-lg transition",{"bg-danger-100 text-danger-900":a&&t>=100},{"text-text-300":!a||t<100}),children:[r.length&&(!a||t<100)?(0,n.jsx)("p",{children:(0,n.jsx)(A.Z,{defaultMessage:"{selected, plural, one {# file} other {# files}} selected",id:"F7Bwhc8GRB",values:{selected:r.length}})}):!a||t<100?(0,n.jsx)("p",{children:(0,n.jsx)(A.Z,{defaultMessage:"Select files to add to chat context",id:"t6XeSPdQqI"})}):(0,n.jsxs)("div",{className:"inline-flex gap-2 items-center ",children:[(0,n.jsx)(w.v,{className:"opacity-80",size:14}),(0,n.jsx)("p",{children:(0,n.jsx)(A.Z,{defaultMessage:"Remove some files to stay within size limits",id:"k+ns1o6klw"})})]}),(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[a&&(0,n.jsx)($,{totalPercent:t,secondaryPercent:o}),a&&(0,n.jsx)("span",{className:"min-w-10 text-right",children:o>0?(0,n.jsx)(d.u,{tooltipContent:"".concat(J(o),"% used by other knowledge + ").concat(J(l),"% by this content"),children:(0,n.jsx)("span",{children:c})}):c})]})]})}function Q(e,t){if(void 0===e.children)return!1;if((0,I.VG)(t,e.path)){for(let r of e.children.values())if(!(0,I.VG)(t,r.path)||Q(r,t))return!0}else for(let r of e.children.values())if((0,I.VG)(t,r.path)||Q(r,t))return!0;return!1}function X(e){let{node:t,showPath:r,filters:i,sizeLimit:s,onUpdateFilters:a,onClick:o,onNavigate:d,enforceSizeLimit:c}=e,u=void 0!==t.children,h=(0,I.VG)(i,t.path),f=Q(t,i);return(0,n.jsxs)("div",{onClick:o,className:(0,C.Z)("group flex justify-start items-center gap-2 py-2 px-4 border-b-0.5 border-border-400 hover:bg-bg-100",{"cursor-pointer":o}),children:[(0,n.jsx)(l.g,{checkState:f?"partial":h?"checked":"unchecked",onClick:e=>{let{didCheck:r}=e;r?a((0,I.Yw)(i,t.path)):a((0,I.F8)(i,t.path))}}),void 0===t.children?(0,n.jsx)(N.$,{weight:"light",size:20,className:"flex-shrink-0 text-text-400"}):(0,n.jsx)(_.g,{weight:"fill",className:"flex-shrink-0 text-accent-secondary-200",size:20}),(0,n.jsx)("div",{className:(0,C.Z)("w-5/6 text-text-100 overflow-x-hidden text-ellipsis text-nowrap",{"text-text-200 group-hover:text-text-000":u}),onClick:e=>{u&&o&&(e.stopPropagation(),o())},children:r?(e=>{let t=e.replace(/^\/+|\/+$/g,"").split("/");return(0,n.jsx)("span",{children:t.map((e,r)=>{let i="/"+t.slice(0,r+1).join("/")+"/",s=r===t.length-1,a=!s&&d?e=>{e.stopPropagation(),d(i)}:void 0;return(0,n.jsxs)("span",{children:[(0,n.jsx)(s?"span":"button",{className:(0,C.Z)(s?"text-text-000":"text-text-400",a?"hover:text-text-100 transition":""),onClick:a,children:e}),!s&&(0,n.jsx)("span",{className:"opacity-25 mx-1",children:"/"})]},r)})})})(t.path):t.name}),s&&c&&(0,n.jsxs)("span",{className:"w-1/6 text-text-400 text-xs text-right",children:[J(100*t.size/s),"%"]})]})}function J(e){return 0===e?"0":e<1?"<1":h(Math.ceil(e))}function $(e){let{totalPercent:t,secondaryPercent:r=0}=e,i=t>=100,s=t-r;return(0,n.jsx)("div",{className:"bg-bg-100 border-0.5 border-border-300 w-24 h-2 rounded-full overflow-hidden relative",children:(0,n.jsxs)("div",{className:"absolute inset-0",children:[r>0?(0,n.jsx)("div",{style:{width:"".concat(Math.min(100,Math.max(0,r)),"%")},className:"absolute inset-y-0 left-0 bg-border-400"}):null,s>0?(0,n.jsx)("div",{style:{width:"".concat(Math.min(100-(r||0),Math.max(s>0?4:0,s)),"%"),left:"".concat(r||0,"%")},className:(0,C.Z)("absolute inset-y-0 transition-all",{"bg-danger-100":i,"bg-text-100":!i})}):null]})})}},31275:function(e,t,r){r.d(t,{U:function(){return f}});var n=r(27573),i=r(52939),s=r(6385),a=r(10228),l=r(7653),o=r(66605),d=r(92676),c=r(23098),u=r(18409),h=r(8628);function f(e){let{isOpen:t,onClose:r,onCreated:f,projectUuid:x,location:m,syncSource:p,setIsUploadingGithubSync:g}=e,{maxKbTokens:v}=(0,c.mo)(),b=(0,u.e)(null),j="project"===m&&x?v:b,y=(0,c.nR)(x),w=(0,l.useMemo)(()=>{if(x&&void 0!==y){var e;return Math.max(0,y-((null==p?void 0:null===(e=p.status)||void 0===e?void 0:e.current_size_bytes)?p.type===a.Fg.GITHUB?p.status.current_size_bytes/s.dS:p.status.current_size_bytes/s.r6:0))}return 0},[x,y,p]),N=(0,l.useCallback)(e=>{null==f||f(e)},[f]),{mutate:_,isPending:k}=(0,d.gr)(x,{onSuccess:N,onError:()=>null==g?void 0:g(!1)}),{mutate:C,isPending:M}=(0,d.l2)(x,{onSuccess:r}),{mutate:S,isPending:E}=(0,o.cE)({onSuccess:N,onError:()=>null==g?void 0:g(!1)}),{mutate:L,isPending:z}=(0,o.P9)({onSuccess:r}),D=(0,l.useCallback)(e=>{p?("project"===m&&x?C:L)({sync_source_uuid:p.uuid,sync_source_config:e}):(null==g||g(!0),r(),("project"===m&&x?_:S)({sync_source_type:a.Fg.GITHUB,sync_source_config:e}))},[p,m,x,_,C,S,L,r,g]);return(0,n.jsx)(i.u_,{isOpen:t,onClose:r,title:"Add content from GitHub",subtitle:"Select the files you would like to add to this ".concat(x?"project":"chat"),modalSize:"xl",hasCloseButton:!0,autoCloseOnFocusOut:!1,children:(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(h.g,{initialConfig:null==p?void 0:p.config,tokenLimit:j,alreadyUsedTokens:w,isSubmitting:k||M||E||z,onSubmit:D})})})}},56971:function(e,t,r){r.d(t,{n4:function(){return _},dF:function(){return v}});var n=r(27573),i=r(69735),s=r(67677),a=r(32006),l=r(10228);let o=e=>e===l.co.ACCESS_DENIED||e===l.co.UNAUTHENTICATED||e===l.co.DISABLED;l.Fg.GDRIVE,l.Fg.GITHUB,l.Fg.OUTLINE,l.Fg.SALESFORCE,l.Fg.GMAIL,l.Fg.GCAL,l.Fg.SLACK,l.Fg.ASANA,l.Fg.FIDDLEHEAD;var d=r(7653),c=r(40950),u=r(2949),h=r(74339),f=r(85465),x=r(31275),m=r(84344);let p=e=>{let t=(0,c.Z)(),r={[l.co.UNAUTHENTICATED]:t.formatMessage({defaultMessage:"Authentication needed",id:"AYP3OHxyGn"}),[l.co.ACCESS_DENIED]:t.formatMessage({defaultMessage:"Content not accessible",id:"IPK01iLM7n"}),[l.co.DISABLED]:t.formatMessage({defaultMessage:"Feature disabled by organization",id:"0mkp6rxalw"})};return e in r?r[e]:void 0},g=e=>{var t;let{syncSourceType:r,syncStatus:s,title:a,url:d,handleClick:c,isLoading:u,actions:h,isSyncing:x,...m}=e,g=o(s),v=p(s),b=(0,f.lP)(),y={};return y=s===l.co.UNAUTHENTICATED?{handleClick:()=>{b(r)}}:c?{handleClick:c}:{url:d},(0,n.jsx)(i.vQ,{actions:h,title:null!==(t=null!=v?v:a)&&void 0!==t?t:"Untitled",tag:(0,n.jsx)(j,{type:r}),isError:g,isLoading:u,isSyncing:x,...y,...m})},v=e=>{let{syncSourceType:t,syncStatus:r,url:i,...a}=e,d=o(r),c=p(r),u=(0,f.lP)(),h={};return(h=r===l.co.UNAUTHENTICATED?{handleClick:()=>{u(t)}}:{url:i},d)?(0,n.jsx)(s.s,{...a,...h,isError:!0,title:c,subtitles:void 0,tag:void 0}):(0,n.jsx)(s.s,{...a,...h})},b={[l.Fg.GDRIVE]:"DOC",[l.Fg.OUTLINE]:"DOC",[l.Fg.GITHUB]:"GITHUB",[l.Fg.SALESFORCE]:"SALESFORCE",[l.Fg.GMAIL]:"EMAIL",[l.Fg.GCAL]:"CALENDAR",[l.Fg.SLACK]:"SLACK",[l.Fg.ASANA]:"ASANA",[l.Fg.FIDDLEHEAD]:"FIDDLEHEAD"},j=e=>{let{type:t}=e;return(0,n.jsxs)(i.l1,{children:[(0,n.jsx)(a.j0,{type:t,size:12,variant:t===l.Fg.GDRIVE?a.cT.DOCS:void 0}),(0,n.jsx)("p",{className:"uppercase truncate font-styrene text-text-300 text-[11px] leading-[13px]",children:b[t]})]})},y=e=>{let{projectUuid:t,syncSource:r,location:i,actions:s,isSyncing:a,...l}=e,[c,u]=(0,d.useState)(!1),{owner:h,repo:f}=r.config,m="".concat(h,"/").concat(f),p=r.config.branch,v=!o(r.status.state),b=l.isEditable&&v,j=b||l.isInSelectionMode;return(0,n.jsxs)(n.Fragment,{children:[b&&(0,n.jsx)(x.U,{projectUuid:t,location:i,isOpen:c,onClose:()=>u(!1),syncSource:r}),(0,n.jsx)(g,{...l,syncSourceType:r.type,syncStatus:r.status.state,title:m,subtitle:p,handleClick:j?()=>{if(l.isInSelectionMode){var e;null===(e=l.handleSelect)||void 0===e||e.call(l,!0,!1)}u(!0)}:void 0,actions:s,isSyncing:a})]})},w=e=>{let{syncSource:t,actions:r,isSyncing:i,...s}=e,a=(0,m.m)(t.config.uri),{title:l,isLoading:o}=(0,u.Xv)({uri:t.config.uri}),d=s.isInSelectionMode?()=>{var e;null===(e=s.handleSelect)||void 0===e||e.call(s,!0,!1)}:void 0;return(0,n.jsx)(g,{handleClick:d,...s,syncSourceType:t.type,syncStatus:t.status.state,title:l,url:a,isLoading:s.isLoading||o,actions:r,isSyncing:i})},N=e=>{let{syncSource:t,actions:r,isSyncing:i,...s}=e,a=(0,m.v)(t.config.outline_uri),{title:l,isLoading:o}=(0,h.Zf)({uri:t.config.outline_uri}),d=s.isInSelectionMode?()=>{var e;null===(e=s.handleSelect)||void 0===e||e.call(s,!0,!1)}:void 0;return(0,n.jsx)(g,{handleClick:d,...s,syncSourceType:t.type,syncStatus:t.status.state,title:l,url:a,isLoading:s.isLoading||o,actions:r,isSyncing:i})},_=e=>{let{projectUuid:t,syncSource:r,isEditable:s=!1,location:a,actions:o,isSyncing:d,...c}=e;return(null==r?void 0:r.type)?r.type===l.Fg.GITHUB?(0,n.jsx)(y,{...c,projectUuid:t,syncSource:r,isEditable:s,location:a,actions:o,isSyncing:d}):r.type===l.Fg.GDRIVE?(0,n.jsx)(w,{...c,syncSource:r,isEditable:s,actions:o,isSyncing:d}):r.type===l.Fg.OUTLINE?(0,n.jsx)(N,{...c,syncSource:r,isEditable:s,actions:o,isSyncing:d}):void 0:(0,n.jsx)(i.fz,{})}},34326:function(e,t,r){function n(e,t){if(!t.startsWith("/"))throw Error("absolute path required");let r=t;for(;null!==r;){let t=e[r];if("include"===t)return!0;if("exclude"===t)break;r=l(r)}return!1}function i(e,t){if(!t.startsWith("/"))throw Error("absolute path required");return n(e=a(e,t),t)&&(e={...e,[t]:"exclude"}),e}function s(e,t){if(!t.startsWith("/"))throw Error("absolute path required");return n(e=a(e,t),t)||(e={...e,[t]:"include"}),e}function a(e,t){let r={...e};for(let n of Object.keys(e))(t.endsWith("/")&&t===n||n.startsWith(t))&&delete r[n];return r}function l(e){if(!e.startsWith("/"))throw Error("absolute path required");if("/"===e)return null;let t=e.endsWith("/")?e.lastIndexOf("/",e.length-2):e.lastIndexOf("/");return t<=0?"/":e.slice(0,t+1)}function o(e){return 0===Object.keys(e).length}r.d(t,{F8:function(){return i},Il:function(){return l},VG:function(){return n},Yw:function(){return s},xb:function(){return o}})},70712:function(e,t,r){r.d(t,{g:function(){return a},k:function(){return l}});let n=/docs\.google\.com\/document\/d\/([a-zA-Z0-9-_]+)/i,i=/document\/d\/([a-zA-Z0-9-_]+)/i,s=/(docs\.google\.com)|(drive\.google\.com)/i;function a(e){if(!e)return null;try{let t=new URL(e),r=!!t.toString().match(n),s=t.pathname.match(i);if(r&&s&&s[1])return s[1]}catch(e){}return null}function l(e){if(!e)return!1;try{return!!new URL(e).toString().match(s)}catch(e){}return!1}},56767:function(e,t,r){r.d(t,{A:function(){return i}});var n=r(30947);function i(e){let t="Unable to add Google Doc.";return e instanceof n.Hx&&"access_denied"===e.errorCode?t+=" Please check that link is a valid Google Doc that you have access to.":t+=" "+e.message,t}},84344:function(e,t,r){r.d(t,{m:function(){return n},v:function(){return i}});let n=e=>"https://docs.google.com/document/d/".concat(e),i=e=>"https://outline.ant.dev/doc/".concat(e)},69735:function(e,t,r){r.d(t,{vQ:function(){return et},mB:function(){return K},yL:function(){return er},fz:function(){return en},l1:function(){return ea}});var n,i,s=r(41596),a=r(27573),l=r(5161),o=r(5984),d=r(9788),c=r(10571),u=r(32737);let h=e=>{if(!e.preview_asset)return!1;let{image_width:t,image_height:r}=e.preview_asset;return t<200||r<200};var f=r(1133),x=r(53949),m=r(30070),p=r(80151),g=r(10607),v=r(68425),b=r(8927),j=r(7653),y=r(45790);r(59821);var w=r(11607),N=r(52939),_=r(49167),k=r(88738),C=r(11510),M=r(5362),S=r(27218),E=r(13262);function L(e){let{isOpen:t,setIsOpen:r,fileName:n,fileUuid:s}=e,{data:l,isLoading:o}=function(e){let{fileUuid:t,enabled:r}=e,{activeOrganization:n}=(0,S.t)(),i=null==n?void 0:n.uuid;return(0,M.WE)("/api/organizations/".concat(i,"/files/").concat(t,"/content_preview"),{queryKey:[E.Ej,{orgUuid:i,fileUuid:t}],enabled:!!n&&r})}({fileUuid:s,enabled:t}),d=null;return d=o?(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(w.Loading,{size:"md"})}):l?l.file_type===i.Csv?(0,a.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[(0,a.jsxs)("div",{className:"bg-bg-100 w-[15rem] h-[12.5rem] rounded-lg border border-border-400 mb-5",children:[(0,a.jsxs)("div",{className:"h-[2.25rem] text-text-100 font-medium border-b border-border-400 px-3 flex items-center",children:[(0,a.jsx)(k.z,{className:"mr-2",size:16}),(0,a.jsx)("div",{children:(0,a.jsx)(y.Z,{defaultMessage:"Columns",id:"SUa8mpheAG"})})]}),(0,a.jsx)(_.$,{className:"h-[10.25rem] w-[15rem] pt-3 px-3 pb-1 text-text-200",children:l.column_names.map((e,t)=>(0,a.jsx)("div",{className:"truncate mb-2",children:e},t))})]}),(0,a.jsx)("div",{className:"text-lg text-text-100 mb-2",children:(0,a.jsx)(y.Z,{defaultMessage:"{columnCount, plural, one {# column} other {# columns}}, {rowCount, plural, one {# row} other {# rows}}",id:"wvGBF/FvBd",values:{columnCount:l.column_count,rowCount:l.row_count}})}),(0,a.jsxs)("div",{className:"flex items-center text-text-300 text-xs",children:[(0,a.jsx)(C.k,{className:"mr-2",size:12}),(0,a.jsx)("div",{children:(0,a.jsx)(y.Z,{defaultMessage:"Claude can analyze CSVs with the Analysis tool.",id:"gtvz8LDd6q"})})]})]}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(y.Z,{defaultMessage:"File previews are not supported for this file type",id:"99ghrgx5j8"})}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(y.Z,{defaultMessage:"Could not load file preview",id:"ATy/CxAxS4"})}),(0,a.jsx)(N.u_,{isOpen:t,hasCloseButton:!0,title:n,onClose:()=>r(!1),className:"w-[40rem] h-[24rem]",modalSize:"xl",children:d})}(n=i||(i={})).Generic="generic",n.Csv="csv",n.Excel="excel";var z=r(2130),D=r(82274);let A=e=>{let{file:t,isOpen:r,onClose:n}=e,i=(0,j.useMemo)(()=>(0,z.G)(t),[t]);return(0,a.jsx)("div",{children:(0,a.jsx)(N.u_,{modalSize:"xl",isOpen:!!r,onClose:n,hasCloseButton:!0,title:i.title,subtitle:(0,a.jsx)(D.R,{showPDFWarning:"pdf"===t.file_type,metaData:i.metaData}),autoCloseOnFocusOut:!0,children:(0,a.jsx)("div",{className:"bg-bg-000 rounded-lg border-0.5 border-border-300 shadow-sm whitespace-pre-wrap break-all text-xs p-4 font-mono",children:t.extracted_content})})})};var F=r(70354),Z=r(34422);let I=e=>{let{isOpen:t,children:r,initialFocus:n,className:i,onClose:s}=e;return(0,a.jsx)(b.M,{children:t&&(0,a.jsx)(Z.V,{open:t,onClose:s,initialFocus:n,className:i,static:!0,children:r})})};var T=r(40950);function P(){let e=(0,s._)(["\n  rounded-md\n  overflow-hidden\n  shadow-[0_4px_32px_hsl(var(--always-black)/30%),_0_0_0_0.5px_hsl(var(--always-black)/25%)]\n"]);return P=function(){return e},e}let G=e=>{let{file:t,isOpen:r,onClose:n}=e,i=(0,T.Z)(),s=(0,j.useRef)(null);return(0,a.jsxs)(I,{isOpen:r,initialFocus:s,onClose:n,className:"fixed inset-0 z-modal grid place-items-center px-3 pb-14 pt-3",children:[(0,a.jsx)(v.E.div,{onClick:e=>{e.preventDefault(),e.stopPropagation(),n()},className:"fixed inset-0 bg-always-black/70 backdrop-blur-[0px]",initial:{opacity:0},animate:{opacity:1,transition:{duration:.15,delay:.015}},exit:{opacity:0,transition:{opacity:{duration:.15}}}}),(0,a.jsxs)(v.E.div,{className:"relative max-w-[40rem]",initial:{opacity:0,scaleY:.925,scaleX:.95,translateY:"12px"},animate:{opacity:1,scaleX:1,scaleY:1,translateY:"0px",transition:{type:"spring",stiffness:750,damping:38,opacity:{duration:.15}}},exit:{opacity:0,scale:.95,transition:{duration:.15}},children:[(0,a.jsx)(F.z,{className:"hover:!text-text-100 !ring-border-200 !absolute left-full top-0 ml-1.5 !text-always-white !ring-offset-0",variant:"ghost",size:"icon_sm","aria-label":i.formatMessage({defaultMessage:"Close image preview",id:"gylVBxmE7Z"}),onClick:e=>{e.preventDefault(),e.stopPropagation(),n()},ref:s,option:"rounded","data-testid":"close-file-preview",children:(0,a.jsx)(p.X,{size:"16"})}),(0,a.jsx)(R,{children:(0,a.jsx)("img",{loading:"eager",src:t.preview_asset.url,width:t.preview_asset.image_width,height:t.preview_asset.image_height,onClick:e=>{e.preventDefault(),e.stopPropagation(),n()},alt:i.formatMessage({defaultMessage:"Preview of {fileName}",id:"djtHiJ5aej"},{fileName:t.file_name}),onDragStart:e=>e.preventDefault(),className:"block w-full max-h-[calc(100vh-4rem)]"})}),(0,a.jsx)("div",{style:{textShadow:"0 0 8px hsl(var(--always-black)/25%)"},className:"pt-1.5 text-center text-always-white",children:t.file_name})]})]})},R=d.q.div(P());var O=r(78278);function U(e){let{isOpen:t,setIsOpen:r,documentFile:n}=e,i=(0,T.Z)();return(0,a.jsx)(N.u_,{isOpen:t,hasCloseButton:!0,title:n.file_name,onClose:()=>r(!1),children:(0,a.jsxs)("a",{className:"self-center group text-center",href:"".concat(n.document_asset.url,"/").concat(n.file_name),target:"_blank",children:[(0,a.jsxs)("div",{className:"w-fit rounded-lg relative m-2 mt-8",children:[(0,a.jsx)("img",{className:"bg-always-white rounded-lg border border-border-300 group-hover:border-accent-secondary-000/70 shadow-sm group-hover:-rotate-1 transition",alt:i.formatMessage({defaultMessage:"{fileName} thumbnail",id:"1bEhiGnHtL"},{fileName:n.file_name}),src:n.thumbnail_asset.url,style:{width:n.thumbnail_asset.image_width/1.5,height:n.thumbnail_asset.image_height/1.5}}),(0,a.jsx)("div",{className:"absolute w-full h-full inset-0 group-hover:bg-gradient-to-t from-accent-secondary-200/5 to-60% group-hover:-rotate-1 transition rounded-lg"}),(0,a.jsx)(e=>{let{pageCount:t}=e;return t<=1?null:(0,a.jsxs)("div",{className:"*:absolute *:w-full *:bg-always-white *:rounded-lg *:group-hover:border-accent-secondary-100/50 *:transition-all *:border *:border-border-300",children:[(0,a.jsx)("div",{className:"h-[98%] ml-1 group-hover:ml-[5px] group-hover:rotate-2 -z-10 shadow-sm top-[1%] opacity-70"}),(0,a.jsx)("div",{className:"h-[96%] ml-2 group-hover:ml-[10px] group-hover:rotate-3 group-hover:top-[2%]  -z-20 shadow top-[2%] opacity-50"})]})},{pageCount:n.document_asset.page_count})]}),(0,a.jsxs)("div",{className:"relative text-center inline-flex items-center justify-center text-pretty gap-2 p-1 text-sm text-text-300 *:transition",children:[(0,a.jsx)("p",{className:"group-hover:opacity-0 group-hover:scale-75",children:(0,a.jsx)(y.Z,{defaultMessage:"{count, plural, one {# page} other {# pages}}",id:"RyCW0gT/7M",values:{count:n.document_asset.page_count}})}),(0,a.jsxs)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 inline-flex items-center justify-center gap-1 text-accent-secondary-000",children:[(0,a.jsx)(O.b,{size:16,weight:"fill",className:"scale-50 group-hover:scale-100 transition-all "}),(0,a.jsx)("p",{children:(0,a.jsx)(y.Z,{defaultMessage:"Download",id:"5q3qC0sC3r"})})]})]})]})})}function H(){let e=(0,s._)(["\n  min-w-0\n  h-[18px] \n  flex \n  flex-row \n  items-center \n  justify-center\n  gap-0.5\n  px-1 \n  border-0.5\n  border-border-300/25\n  shadow-sm\n  rounded\n  bg-bg-000/70\n  backdrop-blur-sm\n  font-medium\n"]);return H=function(){return e},e}function V(e){return e.file_name.match(/paste(-\d+)?\.txt/)}function q(e){if("file_kind"in e){if(!e.file_name)return;let t=e.file_name.split(".");return t.length>1?t[t.length-1]:void 0}if(V(e))return"pasted";if("text/plain"===e.file_type)return"txt";if("text/html"===e.file_type)return"html";{if(""===e.file_name)return"";let t=e.file_name.match(/\.[^.]+$/);return t&&(0,l.tB)({imagesEnabled:!0}).includes(t[0].toLowerCase())?t[0].slice(1):"text"}}let B=e=>{let{handleClick:t,isInSelectionMode:r,handleSelect:n}=e,[i,s]=(0,j.useState)(!1);return{onClick:()=>{r&&n?n(!0,!1):t?t():s(!0)},isPreviewOpen:i,setIsPreviewOpen:s}},W={icon:{height:28,width:28},normal:{height:120,width:120},stretch:{height:120,width:"100%"}},Y=e=>e&&W[e]?W[e]:W.normal,K=e=>{let{file:t,isEditable:r,showWarnings:n,...i}=e;if("file_kind"in t)switch(t.file_kind){case x.Y.Image:return(0,a.jsx)(Q,{...i,file:t,showWarnings:n,isEditable:r});case x.Y.Blob:return(0,a.jsx)(X,{...i,file:t,isEditable:r});case x.Y.SanitizedDocument:return(0,a.jsx)($,{...i,file:t,isEditable:r})}return(0,a.jsx)(J,{...i,file:t,isEditable:r})},Q=e=>{let{disabled:t,size:r,file:n,showWarnings:i,handleRemove:s,handleClick:l,isSelected:o,handleSelect:d,isInSelectionMode:c,isEditable:u}=e,{height:f,width:x}=Y(r),{onClick:m,isPreviewOpen:p,setIsPreviewOpen:v}=B({handleClick:l,isInSelectionMode:c,handleSelect:d}),b=i&&h(n);return(0,a.jsxs)("div",{className:"relative group/thumbnail",children:[(0,a.jsxs)("div",{"data-testid":n.file_name,style:{width:x,height:f,minWidth:x,minHeight:f},className:(0,g.Z)("rounded-lg overflow-hidden can-focus-within rounded-lg",!t&&"cursor-pointer"),children:[(0,a.jsx)(ee,{"data-testid":"file-thumbnail",disabled:t,width:x,height:f,fileName:n.file_name,src:n.preview_asset.url,onClick:m}),(0,a.jsx)(el,{isAbsolute:!0,right:b?(0,a.jsx)(ed,{type:"warning",tooltipText:"Attach a higher resolution image for better results"}):void 0,isSelected:o,handleSelect:d,isEditable:u}),(0,a.jsx)(G,{file:n,isOpen:p,onClose:()=>v(!1)}),(0,a.jsx)("div",{className:(0,g.Z)("transition-colors absolute pointer-events-none top-0 left-0 right-0 bottom-0 rounded-lg shadow-always-white/40 shadow-[inset_0_0_0_2px_var(--tw-shadow-color)]",!t&&"group-hover/thumbnail:shadow-always-white/60")})]}),(0,a.jsx)(ec,{disabled:t,handleRemove:s,isEditable:u,isInSelectionMode:c})]})},X=e=>{let{file:t,handleClick:r,...n}=e,{onClick:i,isPreviewOpen:s,setIsPreviewOpen:l}=B({handleClick:r,isInSelectionMode:n.isInSelectionMode,handleSelect:n.handleSelect}),o=q(t);return(0,a.jsxs)("div",{children:[(0,a.jsx)(et,{...n,"data-testid":t.file_name,title:t.file_name,handleClick:i,tag:!!o&&(0,a.jsx)(eo,{tagName:o,tooltipText:o?"Claude can analyze ".concat(o.toUpperCase()," files with the analysis tool."):"Claude can analyze this file with the Analysis tool."})}),(0,a.jsx)(L,{isOpen:s,setIsOpen:l,fileName:t.file_name,fileUuid:t.file_uuid})]})},J=e=>{let{file:t,handleClick:r,...n}=e,{onClick:i,isPreviewOpen:s,setIsPreviewOpen:l}=B({handleClick:r,isInSelectionMode:n.isInSelectionMode,handleSelect:n.handleSelect}),o=V(t),d=o?"Pasted Text":t.file_name,c=t.extracted_content.split("\n").length,u=(0,a.jsx)(y.Z,{defaultMessage:"{count, plural, one {# line} other {# lines}}",id:"AFTxeGB4qO",values:{count:c}}),h=t.extracted_content.substring(0,300),f=q(t);return(0,a.jsxs)("div",{children:[(0,a.jsx)(et,{...n,"data-testid":t.file_name,...o?{text:h}:{title:d,subtitle:u},handleClick:i,tag:!!f&&(0,a.jsx)(eo,{tagName:f,tooltipText:"pdf"===t.file_type?"PDF converted to text":void 0})}),(0,a.jsx)(A,{file:t,isOpen:s,onClose:()=>l(!1)})]})},$=e=>{let{disabled:t,size:r,file:n,handleRemove:i,handleClick:s,isSelected:l,handleSelect:o,isInSelectionMode:d,isEditable:c}=e,{height:u,width:h}=Y(r),{onClick:f,isPreviewOpen:x,setIsPreviewOpen:m}=B({handleClick:s,isInSelectionMode:d,handleSelect:o}),p=q(n);return(0,a.jsxs)("div",{className:"group/thumbnail relative",children:[(0,a.jsxs)("div",{"data-testid":n.file_name,style:{width:h,height:u,minWidth:h,minHeight:u},className:(0,g.Z)("rounded-lg overflow-hidden border-0.5 border-border-300/25 shadow-sm shadow-always-black/5 can-focus-within rounded-lg",!t&&"cursor-pointer hover:border-border-200/50 hover:shadow-always-black/10"),children:[(0,a.jsx)(ee,{disabled:t,width:"100%",height:"100%",fileName:n.file_name,src:n.thumbnail_asset.url,onClick:f}),(0,a.jsx)(el,{isSelected:l,handleSelect:o,isAbsolute:!0,left:p?(0,a.jsx)(eo,{tagName:p}):void 0,isEditable:c}),(0,a.jsx)(U,{isOpen:x,setIsOpen:m,documentFile:n})]}),(0,a.jsx)(ec,{disabled:t,handleRemove:i,isEditable:c,isInSelectionMode:d})]})},ee=e=>{let{disabled:t,width:r,height:n,fileName:i,src:s,onClick:l}=e,[o,d]=(0,j.useState)(!1);return(0,a.jsx)("button",{className:"relative bg-bg-000",style:{width:r,height:n},disabled:t,onClick:l,children:(0,a.jsx)("img",{className:(0,g.Z)("w-full h-full object-cover transition duration-400",o?"opacity-1":"opacity-0 blur-sm"),onLoad:()=>d(!0),alt:i,src:s,onDragStart:e=>e.preventDefault()})})},et=e=>{let{disabled:t,size:r,url:n,handleClick:i,title:s,subtitle:l,text:o,isLoading:d=!1,tag:c,actions:u,isError:h,handleRemove:f,isEditable:x,isSyncing:m,handleSelect:p,isSelected:b,isInSelectionMode:j}=e,{height:y,width:w}=Y(r),N=(0,a.jsxs)(v.E.div,{className:"group/thumbnail relative",whileHover:x?"actionsVisible":m||j?"actionsVisible":void 0,animate:j||m?"actionsVisible":"initial","data-testid":"file-thumbnail",children:[(0,a.jsxs)("div",{style:{width:w,height:y,minWidth:w},className:(0,g.Z)("font-styrene transition-all rounded-lg border-0.5 border-border-300/25 flex flex-col justify-between gap-2.5 overflow-hidden px-2.5 py-2",h?"bg-danger-200/5":d?"bg-bg-100":"bg-bg-000",!!(n||i)&&!d&&!t&&"hover:border-border-200/50 hover:shadow-always-black/10",!d&&"shadow-sm shadow-always-black/5"),children:[(0,a.jsxs)("div",{className:"relative flex flex-col gap-1 min-h-0",children:[o?(0,a.jsx)("div",{className:"max-w-full overflow-hidden absolute h-[112px] [mask-image:linear-gradient(to_bottom,hsl(var(--always-black)/80%)_0%,_hsl(var(--always-black)/10%)_100%)]",children:(0,a.jsx)(v.E.p,{initial:{opacity:0},animate:{opacity:1},className:"text-[8px] text-text-100 break-words",children:o})}):h||s&&!d?(0,a.jsx)(v.E.h3,{initial:{opacity:0},animate:{opacity:1},inherit:!1,className:(0,g.Z)("text-[12px] tracking-tighter break-words",h?"text-text-500":"text-text-100",l?"line-clamp-3":"line-clamp-4"),children:s}):(0,a.jsx)(ei,{}),!!l&&!d&&!h&&(0,a.jsx)(v.E.p,{initial:{opacity:0},animate:{opacity:1},inherit:!1,className:"text-[10px] line-clamp-1 tracking-tighter break-words text-text-500",children:l})]}),d?(0,a.jsx)(es,{}):(0,a.jsx)(el,{isSelected:b,handleSelect:p,left:c,right:h&&(0,a.jsx)(ed,{type:"error"}),actions:u,isEditable:x})]}),(0,a.jsx)(ec,{disabled:t,handleRemove:f,isEditable:x,isInSelectionMode:j})]});return i?(0,a.jsx)("button",{disabled:t,style:{width:w,height:y,minWidth:w},className:(0,g.Z)("rounded-lg text-left block",!t&&"cursor-pointer"),onClick:i,children:N}):n?(0,a.jsx)("a",{style:{width:w,height:y,minWidth:w},href:t?void 0:n,target:"_blank",className:"block rounded-lg",children:N}):N},er=e=>{let{file:t}=e,r=q(t);return(0,a.jsx)("div",{className:"w-[38px] h-[38px] min-w-[38px] font-styrene rounded-lg border-0.5 border-border-300/25 shadow-sm shadow-always-black/5 flex items-center justify-center overflow-hidden bg-bg-000",children:!!r&&(0,a.jsx)("p",{className:"font-bold uppercase font-styrene text-text-300 text-[9px] tracking-tighter pt-0.5",children:r})})},en=e=>{let{size:t,tag:r,isShown:n=!0}=e,{width:i}=Y(t);return(0,a.jsx)(b.M,{children:!!n&&(0,a.jsx)(v.E.div,{initial:{opacity:0,maxWidth:0},animate:{opacity:1,maxWidth:i},children:(0,a.jsx)(et,{isLoading:!0,tag:r,size:t})})})},ei=()=>(0,a.jsxs)(v.E.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full flex flex-col",children:[(0,a.jsx)(c.g,{width:"100%",height:"12px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"}),(0,a.jsx)(c.g,{width:"66%",height:"12px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"})]}),es=()=>(0,a.jsx)(v.E.div,{initial:{opacity:0},animate:{opacity:1},children:(0,a.jsx)(c.g,{width:"48px",height:"18px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"})}),ea=d.q.div(H()),el=e=>{let{isAbsolute:t=!1,left:r,right:n,actions:i,handleSelect:s,isSelected:l,isEditable:d}=e,c=!!r,u=!!n||!!s;return c||u?(0,a.jsx)("div",{className:(0,g.Z)(t&&"absolute bottom-2 left-0 right-0 px-2.5 overflow-x-hidden overflow-y-visible"),children:(0,a.jsxs)("div",{className:(0,g.Z)("relative flex flex-row items-center gap-1",u&&!c?"justify-end":"justify-between"),children:[c&&(0,a.jsx)(v.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-row gap-1 shrink min-w-0",children:r}),u&&(0,a.jsxs)("div",{className:"flex flex-row gap-1 shrink-0",children:[n,!!s&&!!d&&(0,a.jsxs)(v.E.div,{variants:{actionsVisible:{opacity:1,position:"relative"},initial:{opacity:0,position:"absolute"}},className:"flex flex-row gap-1 h-[18px] right-0 top-0",onClick:e=>e.stopPropagation(),transition:{ease:"easeOut",duration:.2},children:[i,(0,a.jsx)(o.XZ,{checked:l,onChange:s,label:"Select file",hideLabel:!0,className:(0,g.Z)("!w-[18px] !h-[18px] !border-0.5 !border-border-300/25 !shadow-sm !rounded"),size:12})]})]})]})}):null},eo=e=>{let{tagName:t,tooltipText:r,className:n}=e,i=(0,a.jsx)(ea,{className:n,children:(0,a.jsx)("p",{className:"uppercase truncate font-styrene text-text-300 text-[11px] leading-[13px]",children:t})});return r?(0,a.jsx)(u.u,{tooltipContent:r,children:i}):i},ed=e=>{let{type:t,tooltipText:r,className:n}=e,i=(0,a.jsx)(ea,{className:(0,g.Z)("shrink-0","error"===t?"text-danger-000 border-danger-200/50 bg-danger-900":"text-warning-orange border-warning-orange/50 bg-bg-000/70",n),children:(0,a.jsx)(m.v,{size:12})});return r?(0,a.jsx)(u.u,{tooltipContent:r,children:i}):i},ec=e=>{let{disabled:t,handleRemove:r,isEditable:n,isInSelectionMode:i}=e;return!r||!n||i||t?null:(0,a.jsx)(u.u,{tooltipContent:(0,a.jsx)(y.Z,{defaultMessage:"Remove",id:"G/yZLul6P1"}),side:"bottom",children:(0,a.jsx)("button",{className:(0,g.Z)("transition-all hover:bg-bg-000/50 text-text-500 hover:text-text-200 group-focus-within/thumbnail:opacity-100 group-hover/thumbnail:opacity-100 opacity-0 w-5 h-5 absolute -top-2 -left-2 rounded-full border-0.5 border-border-300/25 bg-bg-000/90 backdrop-blur-sm flex items-center justify-center",(0,f.tq)()&&"!opacity-100 !bg-bg-000/50"),onClick:e=>{e.stopPropagation(),e.preventDefault(),r()},children:(0,a.jsx)(p.X,{size:12,weight:"bold"})})})}},67677:function(e,t,r){r.d(t,{s:function(){return a}});var n=r(27573),i=r(30070),s=r(10607);let a=e=>{let{icon:t,title:r,subtitles:a,tag:l,disabled:o,url:d,isError:c,handleClick:u}=e,h=(0,s.Z)("flex flex-row gap-4 items-center justify-between rounded-md tracking-tight shrink-0 h-[2rem] px-1 w-full min-w-0",!o&&(u||d)?"cursor-pointer hover:bg-bg-100":"cursor-default"),f=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2 min-w-0",children:[(!!t||c)&&(0,n.jsx)("div",{className:"h-5 w-5 flex items-center justify-center shrink-0",children:c?(0,n.jsx)(i.v,{size:12,className:"text-danger-000"}):t}),(0,n.jsx)("p",{className:(0,s.Z)("relative bottom-[1px] text-[0.875rem] whitespace-nowrap overflow-hidden text-ellipsis shrink",c?"text-text-500":"text-text-000"),children:r}),!!(null==a?void 0:a.length)&&a.map((e,t)=>(0,n.jsx)("p",{className:"relative bottom-[1px] text-[0.75rem] text-text-500 line-clamp-1 shrink-0",children:e},t))]}),!!l&&(0,n.jsx)("div",{className:"shrink-0 flex items-center",children:(0,n.jsx)("div",{className:"text-[0.625rem] text-text-300 border-border-400 border-0.5 rounded px-1 h-[1.125rem] inline-flex items-center justify-center uppercase font-medium shrink-0",children:l})})]});return d?(0,n.jsx)("a",{target:"_blank",href:o?void 0:d,tabIndex:-1,children:(0,n.jsx)("button",{disabled:o,className:h,onClick:u,children:f})}):u?(0,n.jsx)("button",{disabled:o,className:h,onClick:u,children:f}):(0,n.jsx)("div",{className:h,children:f})}},82274:function(e,t,r){r.d(t,{R:function(){return s}});var n=r(27573),i=r(45790);function s(e){let{showPDFWarning:t=!1,metaData:r}=e;return(0,n.jsxs)("span",{className:"text-text-500 mb-3 mt-0.5 flex flex-wrap gap-y-2 items-start items-center text-xs",children:[(0,n.jsx)("span",{children:r}),(0,n.jsx)("span",{className:"mx-1.5 opacity-50 hidden lg:inline",children:""}),t?(0,n.jsx)("span",{children:(0,n.jsx)(i.Z,{defaultMessage:"This PDF was converted to text due to its large size",id:"o/G2cAuU9n"})}):(0,n.jsx)("span",{children:(0,n.jsx)(i.Z,{defaultMessage:"Formatting may be inconsistent from source",id:"9NeTb00/cM"})})]})}},2130:function(e,t,r){r.d(t,{G:function(){return s}});var n=r(27573),i=r(45790);function s(e){return{title:(()=>{if("html"===e.file_type){let t=e.extracted_content.match(/<title>(.*?)<\/title>/);return t?t[1]:e.file_name}return"paste.txt"===e.file_name?(0,n.jsx)(i.Z,{defaultMessage:"Pasted content",id:"okKwHjIO0b"}):e.file_name})(),metaData:(()=>{var t;let r=(0,n.jsx)(i.Z,{defaultMessage:"{count, plural, one {# line} other {# lines}}",id:"AFTxeGB4qO",values:{count:e.extracted_content.split("\n").length}}),s=(t=e.file_size)<1048576?(0,n.jsx)(i.Z,{defaultMessage:"{size} KB",id:"/hgypvsrtJ",description:"File size in kilobytes",values:{size:(t/1024).toFixed(2)}}):(0,n.jsx)(i.Z,{defaultMessage:"{size} MB",id:"8amcCGO7ya",description:"File size in megabytes",values:{size:(t/1048576).toFixed(2)}});if("html"===e.file_type){let t=e.file_name,i=e.file_name.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\\/\n?]+)/gim);return i&&(t=i[0].replace("www.","")),(0,n.jsxs)("span",{children:[r,"\xa0",(0,n.jsx)("span",{className:"opacity-50 mx-1",children:""}),t]})}return(0,n.jsxs)("span",{children:[s,"\xa0",(0,n.jsx)("span",{className:"opacity-50 mx-1",children:""}),r]})})()}}},66557:function(e,t,r){r.d(t,{c:function(){return s}});var n=r(6385),i=r(7653);function s(e){let{skip:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[s,a]=(0,i.useState)(e.length/n.r6*.8),l=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(!t){if(!l.current){if("undefined"==typeof Worker)return;try{let e=new Worker(r.tu(new URL(r.p+r.u(6344),r.b)));e.onmessage=e=>a(e.data),l.current=e}catch(t){var e;throw(null==t?void 0:null===(e=t.toString)||void 0===e?void 0:e.call(t).includes("Invalid URL"))&&console.error("useTokenCounter invalid URL error hit; baseUrl = ".concat("file:///app/packages/chat/utils/useTokenCounter.tsx","")),t}}return()=>{var e;null===(e=l.current)||void 0===e||e.terminate(),l.current=null}}},[t]),(0,i.useEffect)(()=>{l.current&&l.current.postMessage(e)},[e]),s}},35354:function(e,t,r){r.d(t,{EO:function(){return o},h7:function(){return i},rE:function(){return d}});var n,i,s=r(27573),a=r(7653);(n=i||(i={})).IDLE="IDLE",n.DRAGGING_OFF_TARGET="DRAGGING_OFF_TARGET",n.DRAGGING_ON_TARGET="DRAGGING_ON_TARGET",n.DROPPED="DROPPED";let l=(0,a.createContext)(void 0),o=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useDropZone must be used within a DropZoneProvider");return e},d=e=>{let{onDrop:t,children:r,className:n,disabled:i=!1}=e,[o,d]=(0,a.useState)("IDLE"),c=a.useRef(null),u=(0,a.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),(null===(t=c.current)||void 0===t?void 0:t.contains(e.target))?d("DRAGGING_ON_TARGET"):d("DRAGGING_OFF_TARGET")},[]),h=(0,a.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),(null===(t=c.current)||void 0===t?void 0:t.contains(e.relatedTarget))||e.target!==document.body&&null!==e.relatedTarget||d("IDLE")},[]),f=(0,a.useCallback)(e=>{var t;(null===(t=c.current)||void 0===t?void 0:t.contains(e.target))||(e.preventDefault(),d("IDLE"))},[]),x=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),t(e),d("DROPPED"),setTimeout(()=>{d("IDLE")},500)},[t]);return(0,a.useEffect)(()=>{if(!i)return document.body.addEventListener("dragover",u),document.body.addEventListener("dragleave",h),document.body.addEventListener("drop",f),()=>{document.body.removeEventListener("dragover",u),document.body.removeEventListener("dragleave",h),document.body.removeEventListener("drop",f)};d("IDLE")},[u,h,f,x,i]),(0,s.jsx)(l.Provider,{value:{dragState:o,setDragState:d},children:(0,s.jsx)("div",{ref:c,className:n,onDrop:i?void 0:x,children:r})})}},45033:function(e,t,r){r.d(t,{A2:function(){return C},AZ:function(){return _},HF:function(){return w},Lt:function(){return p},Vy:function(){return j},WR:function(){return k},YG:function(){return g},hP:function(){return N},nI:function(){return y},u2:function(){return M}});var n=r(41596),i=r(27573),s=r(9788),a=r(49002);function l(){let e=(0,n._)(["\n  outline-none\n  py-2\n  px-1.5\n  -mx-1\n  -mt-1\n  mb-1\n  border-b-0.5\n  border-border-300\n"]);return l=function(){return e},e}function o(){let e=(0,n._)(["\n  z-dropdown\n  bg-bg-000\n  border-0.5\n  border-border-300\n  backdrop-blur-xl\n  rounded-lg\n  min-w-[8rem]\n  overflow-hidden\n  p-1\n  text-text-300\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n  max-h-[min(var(--radix-dropdown-menu-content-available-height),var(--dropdown-max-height))]\n  overflow-y-auto\n"]);return o=function(){return e},e}function d(){let e=(0,n._)(["\n  rounded\n  py-1\n  px-2\n  max-w-full\n  whitespace-nowrap\n  text-ellipsis\n  overflow-hidden\n"]);return d=function(){return e},e}function c(){let e=(0,n._)(["text-text-500 pt-1 px-2"]);return c=function(){return e},e}function u(){let e=(0,n._)(["\n  py-1\n  px-2\n  rounded-md\n  cursor-pointer\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  grid\n  grid-cols-[minmax(0,_1fr)_auto]\n  gap-2\n  items-center\n  outline-none\n  select-none\n  [&[data-highlighted]]:bg-bg-200\n  [&[data-highlighted]]:text-text-300\n  ","\n  ","\n"]);return u=function(){return e},e}function h(){let e=(0,n._)(["\n  py-1\n  px-2\n  rounded-md\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  flex\n  justify-between\n  gap-2\n  items-center\n"]);return h=function(){return e},e}function f(){let e=(0,n._)(["\n  py-1\n  px-2\n  rounded\n  cursor-pointer\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  grid\n  grid-cols-[minmax(0,_1fr)_auto]\n  gap-2\n  items-center\n  outline-none\n  select-none\n  [&[data-highlighted]]:bg-bg-200\n  [&[data-highlighted]]:text-text-300\n"]);return f=function(){return e},e}function x(){let e=(0,n._)(["\n  z-dropdown\n  bg-bg-000\n  border-0.5\n  border-border-300\n  backdrop-blur-xl\n  rounded-lg\n  min-w-[8rem]\n  overflow-hidden\n  p-1\n  text-text-300\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n  overflow-y-scroll\n  max-h-[min(100vh,var(--dropdown-max-height))]\n"]);return x=function(){return e},e}function m(){let e=(0,n._)(["\n  h-0\n  border-t-0.5\n  border-border-300\n  m-1\n"]);return m=function(){return e},e}function p(e){var t;let{trigger:r,children:n,unstyledTrigger:s=!1,matchTriggerWidth:l=!1,open:o,onOpenChange:d,...c}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(a.fC,{open:o,onOpenChange:d,children:[s?(0,i.jsx)(a.xz,{asChild:!0,children:r}):(0,i.jsx)(b,{asChild:!0,children:r}),(0,i.jsx)(a.Uv,{children:(0,i.jsx)(v,{style:l?{width:"var(--radix-dropdown-menu-trigger-width)"}:void 0,sideOffset:null!==(t=c.sideOffset)&&void 0!==t?t:4,...c,children:n})})]})})}r(7653);let g=(0,s.q)(a.Ju)(l()),v=(0,s.q)(a.VY)(o()),b=(0,s.q)(a.xz)(d());a.Qk;let j=a.Tr,y=a.Uv,w=(0,s.q)(a.Ju)(c()),N=(0,s.q)(a.ck)(u(),e=>{let{disabled:t}=e;return t&&"\n    opacity-50\n    pointer-events-none\n  "},e=>{let{danger:t}=e;return t&&"\n    !text-danger-000\n    [&[data-highlighted]]:bg-danger-900\n  "}),_=s.q.div(h()),k=(0,s.q)(a.fF)(f()),C=(0,s.q)(a.tu)(x()),M=(0,s.q)(a.VD)(m())},60949:function(e,t,r){r.d(t,{g:function(){return l}});var n=r(27573),i=r(26824),s=r(85689),a=r(10607);let l=(0,r(7653).forwardRef)((e,t)=>{let{checkState:r,onClick:l,label:o,...d}=e,c="partial"===r?i.W:s.J;return(0,n.jsxs)("div",{className:"p-2 -m-2 flex items-center",onClick:e=>{e.stopPropagation(),l({didCheck:"unchecked"===r})},children:[(0,n.jsx)("button",{ref:t,className:(0,a.Z)("rounded p-[0.5px] border-0.5 flex items-center justify-center transition","unchecked"!==r?"bg-accent-secondary-000 border-accent-secondary-200 shadow-sm":"border-border-200 hover:bg-bg-000 hover:shadow-sm"),...d,children:(0,n.jsx)(c,{className:(0,a.Z)("text-always-white transition",{invisible:"unchecked"===r}),weight:"bold",size:14})}),o&&(0,n.jsx)("span",{className:"ml-2 cursor-pointer",children:o})]})});l.displayName="PartialCheckbox"},10571:function(e,t,r){r.d(t,{g:function(){return c}});var n=r(41596),i=r(27573),s=r(9788),a=r(10607),l=r(45790);function o(){let e=(0,n._)(["\n  relative\n  bg-text-500/50\n  overflow-hidden\n  after:absolute\n  after:inset-0\n  after:translate-x-[-100%]\n  after:bg-gradient-to-r after:from-always-white/0 after:from-0% after:via-always-white/20 after:via-50% after:to-100% after:to-always-white/0\n  after:animate-[shimmer_1.5s_infinite]\n"]);return o=function(){return e},e}function d(){let e=(0,n._)(["\n  relative\n  bg-bg-400\n  overflow-hidden\n  after:absolute\n  after:inset-0\n  after:translate-x-[-100%]\n  after:bg-gradient-to-r after:from-bg-000/0 after:from-0% after:via-bg-000/20 after:via-50% after:to-100% after:to-bg-000/0\n  after:animate-[shimmer_1.5s_infinite]\n"]);return d=function(){return e},e}function c(e){let{className:t,height:r=24,width:n,rounded:s="full",repeat:o=1,variant:d="default"}=e,c={height:r,width:n||"100%"},f="light"===d?h:u;return(0,i.jsx)(i.Fragment,{children:Array.from({length:o}).map((e,r)=>(0,i.jsx)(f,{className:(0,a.Z)(t,{"rounded-full":"full"===s,"rounded-xl":"xl"===s,"rounded-lg":"lg"===s,"rounded-md":"md"===s,"rounded-sm":"sm"===s}),style:c,children:0===r&&(0,i.jsx)("span",{className:"sr-only",children:(0,i.jsx)(l.Z,{defaultMessage:"Loading...",id:"gjBiyjshwX"})})},r))})}let u=s.q.div(o()),h=s.q.div(d())},49167:function(e,t,r){r.d(t,{$:function(){return d}});var n=r(41596),i=r(27573),s=r(47190),a=r(9788),l=r(7653);function o(){let e=(0,n._)(["",""]);return o=function(){return e},e}let d=e=>{let{hideBottomShadow:t,scrollContainerRef:r,persistedScrollToRef:n,...s}=e,a=(null==n?void 0:n.current)!==void 0,o=(0,l.useRef)(null),d=r||o,u=(0,l.useCallback)(()=>{let e=d.current;if(e&&!t){let{scrollTop:t,offsetHeight:r,scrollHeight:i}=e;t+r>=i?e.classList.remove("has-bottom-scroll"):e.classList.add("has-bottom-scroll"),a&&0!==t&&Math.abs(t-n.current)>10&&(n.current=t)}},[t,d,a,n]);return u(),(0,l.useEffect)(()=>{let e=d.current;requestAnimationFrame(()=>{a&&e&&(null==e||e.scrollTo({top:n.current,behavior:"instant"}))})},[d,a,n]),(0,l.useEffect)(()=>{let e=d.current;return null==e||e.addEventListener("scroll",u),()=>null==e?void 0:e.removeEventListener("scroll",u)},[u,d]),(0,i.jsx)(c,{ref:d,...s,children:s.children})},c=a.q.div(o(),s.X)},44512:function(e,t,r){r.d(t,{n:function(){return a},p:function(){return s}});var n=r(60705),i=r(7653);let s=e=>{let{shouldFocus:t,target:r,delayMs:n=100}=e;(0,i.useEffect)(()=>{if(t&&r){let e=setTimeout(()=>{var e;null===(e=r.current)||void 0===e||e.focus()},n);return()=>clearTimeout(e)}},[t,r,n])},a=(e,t)=>{let r=(0,n.f)(),s=r.get(e),[a,l]=(0,i.useState)(void 0!==s?"true"===s:t);return[a,(0,i.useCallback)(t=>{l(n=>{let i="function"==typeof t?t(n):t;return r.set(e,i.toString()),i})},[r,e])]}},53949:function(e,t,r){var n,i,s,a;r.d(t,{Y:function(){return i},i:function(){return n}}),(s=n||(n={})).URLParameter="url_parameter",s.UserUpload="user_upload",s.FirstParty="first_party",(a=i||(i={})).Image="image",a.Blob="blob",a.SanitizedDocument="document"}}]);